{"/Users/tharathip_loom/Documents/dashboard/src/utils.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/utils.ts","statementMap":{"0":{"start":{"line":8,"column":20},"end":{"line":8,"column":29}},"1":{"start":{"line":10,"column":23},"end":{"line":10,"column":59}},"2":{"start":{"line":12,"column":4},"end":{"line":14,"column":33}},"3":{"start":{"line":18,"column":22},"end":{"line":18,"column":71}},"4":{"start":{"line":19,"column":4},"end":{"line":19,"column":39}},"5":{"start":{"line":21,"column":33},"end":{"line":24,"column":1}},"6":{"start":{"line":26,"column":4},"end":{"line":26,"column":57}},"7":{"start":{"line":28,"column":21},"end":{"line":30,"column":1}},"8":{"start":{"line":29,"column":4},"end":{"line":29,"column":71}},"9":{"start":{"line":29,"column":36},"end":{"line":29,"column":69}},"10":{"start":{"line":32,"column":4},"end":{"line":33,"column":18}},"11":{"start":{"line":33,"column":8},"end":{"line":33,"column":18}},"12":{"start":{"line":34,"column":4},"end":{"line":34,"column":50}},"13":{"start":{"line":36,"column":31},"end":{"line":38,"column":2}},"14":{"start":{"line":36,"column":47},"end":{"line":38,"column":1}},"15":{"start":{"line":37,"column":58},"end":{"line":37,"column":84}},"16":{"start":{"line":40,"column":21},"end":{"line":40,"column":36}},"17":{"start":{"line":42,"column":4},"end":{"line":50,"column":5}},"18":{"start":{"line":43,"column":8},"end":{"line":43,"column":37}},"19":{"start":{"line":44,"column":8},"end":{"line":44,"column":45}},"20":{"start":{"line":47,"column":8},"end":{"line":47,"column":128}},"21":{"start":{"line":47,"column":75},"end":{"line":47,"column":125}},"22":{"start":{"line":48,"column":26},"end":{"line":48,"column":68}},"23":{"start":{"line":49,"column":8},"end":{"line":49,"column":72}},"24":{"start":{"line":51,"column":4},"end":{"line":51,"column":17}},"25":{"start":{"line":52,"column":4},"end":{"line":52,"column":16}},"26":{"start":{"line":54,"column":31},"end":{"line":68,"column":1}},"27":{"start":{"line":70,"column":4},"end":{"line":75,"column":5}},"28":{"start":{"line":71,"column":8},"end":{"line":71,"column":45}},"29":{"start":{"line":74,"column":8},"end":{"line":74,"column":23}},"30":{"start":{"line":78,"column":4},"end":{"line":83,"column":5}},"31":{"start":{"line":79,"column":8},"end":{"line":79,"column":45}},"32":{"start":{"line":82,"column":8},"end":{"line":82,"column":23}},"33":{"start":{"line":85,"column":34},"end":{"line":85,"column":107}},"34":{"start":{"line":85,"column":47},"end":{"line":85,"column":107}},"35":{"start":{"line":86,"column":36},"end":{"line":86,"column":119}},"36":{"start":{"line":86,"column":49},"end":{"line":86,"column":119}},"37":{"start":{"line":88,"column":4},"end":{"line":90,"column":5}},"38":{"start":{"line":89,"column":8},"end":{"line":89,"column":63}},"39":{"start":{"line":91,"column":4},"end":{"line":91,"column":17}},"40":{"start":{"line":97,"column":19},"end":{"line":101,"column":5}},"41":{"start":{"line":102,"column":18},"end":{"line":102,"column":61}},"42":{"start":{"line":103,"column":4},"end":{"line":114,"column":5}},"43":{"start":{"line":104,"column":31},"end":{"line":104,"column":90}},"44":{"start":{"line":104,"column":59},"end":{"line":104,"column":82}},"45":{"start":{"line":105,"column":30},"end":{"line":105,"column":88}},"46":{"start":{"line":105,"column":58},"end":{"line":105,"column":80}},"47":{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},"48":{"start":{"line":108,"column":12},"end":{"line":108,"column":65}},"49":{"start":{"line":111,"column":12},"end":{"line":111,"column":59}},"50":{"start":{"line":113,"column":8},"end":{"line":113,"column":65}},"51":{"start":{"line":115,"column":4},"end":{"line":115,"column":24}},"52":{"start":{"line":123,"column":19},"end":{"line":123,"column":49}},"53":{"start":{"line":125,"column":20},"end":{"line":125,"column":70}},"54":{"start":{"line":125,"column":45},"end":{"line":125,"column":69}},"55":{"start":{"line":126,"column":4},"end":{"line":131,"column":5}},"56":{"start":{"line":127,"column":8},"end":{"line":127,"column":34}},"57":{"start":{"line":128,"column":24},"end":{"line":128,"column":67}},"58":{"start":{"line":129,"column":8},"end":{"line":129,"column":30}},"59":{"start":{"line":130,"column":8},"end":{"line":130,"column":65}},"60":{"start":{"line":134,"column":4},"end":{"line":134,"column":102}},"61":{"start":{"line":137,"column":4},"end":{"line":140,"column":25}},"62":{"start":{"line":140,"column":8},"end":{"line":140,"column":25}},"63":{"start":{"line":142,"column":17},"end":{"line":142,"column":28}},"64":{"start":{"line":143,"column":4},"end":{"line":144,"column":18}},"65":{"start":{"line":144,"column":8},"end":{"line":144,"column":18}},"66":{"start":{"line":145,"column":4},"end":{"line":146,"column":22}},"67":{"start":{"line":146,"column":8},"end":{"line":146,"column":22}},"68":{"start":{"line":147,"column":4},"end":{"line":148,"column":23}},"69":{"start":{"line":148,"column":8},"end":{"line":148,"column":23}},"70":{"start":{"line":149,"column":4},"end":{"line":150,"column":26}},"71":{"start":{"line":150,"column":8},"end":{"line":150,"column":26}},"72":{"start":{"line":151,"column":4},"end":{"line":152,"column":29}},"73":{"start":{"line":152,"column":8},"end":{"line":152,"column":29}},"74":{"start":{"line":153,"column":4},"end":{"line":154,"column":24}},"75":{"start":{"line":154,"column":8},"end":{"line":154,"column":24}},"76":{"start":{"line":155,"column":4},"end":{"line":156,"column":26}},"77":{"start":{"line":156,"column":8},"end":{"line":156,"column":26}},"78":{"start":{"line":157,"column":4},"end":{"line":158,"column":24}},"79":{"start":{"line":158,"column":8},"end":{"line":158,"column":24}},"80":{"start":{"line":159,"column":4},"end":{"line":160,"column":26}},"81":{"start":{"line":160,"column":8},"end":{"line":160,"column":26}},"82":{"start":{"line":161,"column":4},"end":{"line":161,"column":14}},"83":{"start":{"line":163,"column":34},"end":{"line":163,"column":77}},"84":{"start":{"line":164,"column":35},"end":{"line":164,"column":82}}},"fnMap":{"0":{"name":"formatToCrypto","decl":{"start":{"line":9,"column":16},"end":{"line":9,"column":30}},"loc":{"start":{"line":9,"column":39},"end":{"line":15,"column":1}},"line":9},"1":{"name":"parseToWei","decl":{"start":{"line":16,"column":16},"end":{"line":16,"column":26}},"loc":{"start":{"line":16,"column":49},"end":{"line":20,"column":1}},"line":16},"2":{"name":"getRandomInt","decl":{"start":{"line":25,"column":16},"end":{"line":25,"column":28}},"loc":{"start":{"line":25,"column":39},"end":{"line":27,"column":1}},"line":25},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":21},"end":{"line":28,"column":22}},"loc":{"start":{"line":28,"column":39},"end":{"line":30,"column":1}},"line":28},"4":{"name":"(anonymous_4)","decl":{"start":{"line":29,"column":23},"end":{"line":29,"column":24}},"loc":{"start":{"line":29,"column":36},"end":{"line":29,"column":69}},"line":29},"5":{"name":"capitalize","decl":{"start":{"line":31,"column":16},"end":{"line":31,"column":26}},"loc":{"start":{"line":31,"column":30},"end":{"line":35,"column":1}},"line":31},"6":{"name":"(anonymous_6)","decl":{"start":{"line":36,"column":31},"end":{"line":36,"column":32}},"loc":{"start":{"line":36,"column":47},"end":{"line":38,"column":1}},"line":36},"7":{"name":"(anonymous_7)","decl":{"start":{"line":37,"column":37},"end":{"line":37,"column":38}},"loc":{"start":{"line":37,"column":58},"end":{"line":37,"column":84}},"line":37},"8":{"name":"getCardByTokenId","decl":{"start":{"line":39,"column":16},"end":{"line":39,"column":32}},"loc":{"start":{"line":39,"column":37},"end":{"line":53,"column":1}},"line":39},"9":{"name":"(anonymous_9)","decl":{"start":{"line":47,"column":67},"end":{"line":47,"column":68}},"loc":{"start":{"line":47,"column":75},"end":{"line":47,"column":125}},"line":47},"10":{"name":"formatToLoomAddress","decl":{"start":{"line":69,"column":16},"end":{"line":69,"column":35}},"loc":{"start":{"line":69,"column":45},"end":{"line":76,"column":1}},"line":69},"11":{"name":"formatFromLoomAddress","decl":{"start":{"line":77,"column":16},"end":{"line":77,"column":37}},"loc":{"start":{"line":77,"column":47},"end":{"line":84,"column":1}},"line":77},"12":{"name":"(anonymous_12)","decl":{"start":{"line":85,"column":34},"end":{"line":85,"column":35}},"loc":{"start":{"line":85,"column":47},"end":{"line":85,"column":107}},"line":85},"13":{"name":"(anonymous_13)","decl":{"start":{"line":86,"column":36},"end":{"line":86,"column":37}},"loc":{"start":{"line":86,"column":49},"end":{"line":86,"column":119}},"line":86},"14":{"name":"getRequired","decl":{"start":{"line":87,"column":16},"end":{"line":87,"column":27}},"loc":{"start":{"line":87,"column":41},"end":{"line":92,"column":1}},"line":87},"15":{"name":"getWalletFromLocalStorage","decl":{"start":{"line":96,"column":16},"end":{"line":96,"column":41}},"loc":{"start":{"line":96,"column":47},"end":{"line":116,"column":1}},"line":96},"16":{"name":"(anonymous_16)","decl":{"start":{"line":104,"column":48},"end":{"line":104,"column":49}},"loc":{"start":{"line":104,"column":59},"end":{"line":104,"column":82}},"line":104},"17":{"name":"(anonymous_17)","decl":{"start":{"line":105,"column":47},"end":{"line":105,"column":48}},"loc":{"start":{"line":105,"column":58},"end":{"line":105,"column":80}},"line":105},"18":{"name":"setNewTokenToLocalStorage","decl":{"start":{"line":122,"column":16},"end":{"line":122,"column":41}},"loc":{"start":{"line":122,"column":54},"end":{"line":132,"column":1}},"line":122},"19":{"name":"(anonymous_19)","decl":{"start":{"line":125,"column":32},"end":{"line":125,"column":33}},"loc":{"start":{"line":125,"column":45},"end":{"line":125,"column":69}},"line":125},"20":{"name":"isMobile","decl":{"start":{"line":133,"column":16},"end":{"line":133,"column":24}},"loc":{"start":{"line":133,"column":27},"end":{"line":135,"column":1}},"line":133},"21":{"name":"detectedWallet","decl":{"start":{"line":136,"column":16},"end":{"line":136,"column":30}},"loc":{"start":{"line":136,"column":33},"end":{"line":162,"column":1}},"line":136}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":11},"end":{"line":14,"column":32}},"type":"cond-expr","locations":[{"start":{"line":13,"column":10},"end":{"line":13,"column":32}},{"start":{"line":14,"column":10},"end":{"line":14,"column":32}}],"line":12},"1":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":47}},"type":"binary-expr","locations":[{"start":{"line":12,"column":11},"end":{"line":12,"column":27}},{"start":{"line":12,"column":31},"end":{"line":12,"column":47}}],"line":12},"2":{"loc":{"start":{"line":16,"column":35},"end":{"line":16,"column":47}},"type":"default-arg","locations":[{"start":{"line":16,"column":45},"end":{"line":16,"column":47}}],"line":16},"3":{"loc":{"start":{"line":32,"column":4},"end":{"line":33,"column":18}},"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":33,"column":18}},{"start":{"line":32,"column":4},"end":{"line":33,"column":18}}],"line":32},"4":{"loc":{"start":{"line":42,"column":4},"end":{"line":50,"column":5}},"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":50,"column":5}},{"start":{"line":42,"column":4},"end":{"line":50,"column":5}}],"line":42},"5":{"loc":{"start":{"line":49,"column":25},"end":{"line":49,"column":71}},"type":"cond-expr","locations":[{"start":{"line":49,"column":51},"end":{"line":49,"column":59}},{"start":{"line":49,"column":62},"end":{"line":49,"column":71}}],"line":49},"6":{"loc":{"start":{"line":70,"column":4},"end":{"line":75,"column":5}},"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":75,"column":5}},{"start":{"line":70,"column":4},"end":{"line":75,"column":5}}],"line":70},"7":{"loc":{"start":{"line":78,"column":4},"end":{"line":83,"column":5}},"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":83,"column":5}},{"start":{"line":78,"column":4},"end":{"line":83,"column":5}}],"line":78},"8":{"loc":{"start":{"line":85,"column":47},"end":{"line":85,"column":107}},"type":"cond-expr","locations":[{"start":{"line":85,"column":69},"end":{"line":85,"column":97}},{"start":{"line":85,"column":100},"end":{"line":85,"column":107}}],"line":85},"9":{"loc":{"start":{"line":86,"column":49},"end":{"line":86,"column":119}},"type":"cond-expr","locations":[{"start":{"line":86,"column":81},"end":{"line":86,"column":109}},{"start":{"line":86,"column":112},"end":{"line":86,"column":119}}],"line":86},"10":{"loc":{"start":{"line":88,"column":4},"end":{"line":90,"column":5}},"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":90,"column":5}},{"start":{"line":88,"column":4},"end":{"line":90,"column":5}}],"line":88},"11":{"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":45}},"type":"binary-expr","locations":[{"start":{"line":88,"column":8},"end":{"line":88,"column":22}},{"start":{"line":88,"column":26},"end":{"line":88,"column":45}}],"line":88},"12":{"loc":{"start":{"line":103,"column":4},"end":{"line":114,"column":5}},"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":114,"column":5}},{"start":{"line":103,"column":4},"end":{"line":114,"column":5}}],"line":103},"13":{"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":55}},"type":"binary-expr","locations":[{"start":{"line":103,"column":8},"end":{"line":103,"column":16}},{"start":{"line":103,"column":20},"end":{"line":103,"column":55}}],"line":103},"14":{"loc":{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},{"start":{"line":107,"column":8},"end":{"line":112,"column":9}}],"line":107},"15":{"loc":{"start":{"line":126,"column":4},"end":{"line":131,"column":5}},"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":131,"column":5}},{"start":{"line":126,"column":4},"end":{"line":131,"column":5}}],"line":126},"16":{"loc":{"start":{"line":137,"column":4},"end":{"line":140,"column":25}},"type":"if","locations":[{"start":{"line":137,"column":4},"end":{"line":140,"column":25}},{"start":{"line":137,"column":4},"end":{"line":140,"column":25}}],"line":137},"17":{"loc":{"start":{"line":137,"column":8},"end":{"line":139,"column":59}},"type":"binary-expr","locations":[{"start":{"line":137,"column":8},"end":{"line":137,"column":27}},{"start":{"line":139,"column":9},"end":{"line":139,"column":29}},{"start":{"line":139,"column":33},"end":{"line":139,"column":58}}],"line":137},"18":{"loc":{"start":{"line":143,"column":4},"end":{"line":144,"column":18}},"type":"if","locations":[{"start":{"line":143,"column":4},"end":{"line":144,"column":18}},{"start":{"line":143,"column":4},"end":{"line":144,"column":18}}],"line":143},"19":{"loc":{"start":{"line":145,"column":4},"end":{"line":146,"column":22}},"type":"if","locations":[{"start":{"line":145,"column":4},"end":{"line":146,"column":22}},{"start":{"line":145,"column":4},"end":{"line":146,"column":22}}],"line":145},"20":{"loc":{"start":{"line":147,"column":4},"end":{"line":148,"column":23}},"type":"if","locations":[{"start":{"line":147,"column":4},"end":{"line":148,"column":23}},{"start":{"line":147,"column":4},"end":{"line":148,"column":23}}],"line":147},"21":{"loc":{"start":{"line":149,"column":4},"end":{"line":150,"column":26}},"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":150,"column":26}},{"start":{"line":149,"column":4},"end":{"line":150,"column":26}}],"line":149},"22":{"loc":{"start":{"line":151,"column":4},"end":{"line":152,"column":29}},"type":"if","locations":[{"start":{"line":151,"column":4},"end":{"line":152,"column":29}},{"start":{"line":151,"column":4},"end":{"line":152,"column":29}}],"line":151},"23":{"loc":{"start":{"line":153,"column":4},"end":{"line":154,"column":24}},"type":"if","locations":[{"start":{"line":153,"column":4},"end":{"line":154,"column":24}},{"start":{"line":153,"column":4},"end":{"line":154,"column":24}}],"line":153},"24":{"loc":{"start":{"line":155,"column":4},"end":{"line":156,"column":26}},"type":"if","locations":[{"start":{"line":155,"column":4},"end":{"line":156,"column":26}},{"start":{"line":155,"column":4},"end":{"line":156,"column":26}}],"line":155},"25":{"loc":{"start":{"line":157,"column":4},"end":{"line":158,"column":24}},"type":"if","locations":[{"start":{"line":157,"column":4},"end":{"line":158,"column":24}},{"start":{"line":157,"column":4},"end":{"line":158,"column":24}}],"line":157},"26":{"loc":{"start":{"line":159,"column":4},"end":{"line":160,"column":26}},"type":"if","locations":[{"start":{"line":159,"column":4},"end":{"line":160,"column":26}},{"start":{"line":159,"column":4},"end":{"line":160,"column":26}}],"line":159}},"s":{"0":1,"1":0,"2":0,"3":4,"4":4,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":3,"17":3,"18":0,"19":0,"20":3,"21":211,"22":3,"23":3,"24":3,"25":3,"26":1,"27":0,"28":0,"29":0,"30":2,"31":0,"32":2,"33":1,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":1},"f":{"0":0,"1":4,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":3,"9":211,"10":0,"11":2,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"0":[0,0],"1":[0,0],"2":[4],"3":[0,0],"4":[0,3],"5":[0,3],"6":[0,0],"7":[0,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/utils.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import BN from \"bn.js\"\nimport BigNumber from \"bignumber.js\"\nimport Cards from \"./data/cards.json\"\nimport CardDetails from \"./data/cardDetail.json\"\nimport { TokenData } from \"./services/TokenService\"\nimport productionTokens from \"@/assets/tokens/production.tokens.json\"\nimport extDevTokens from \"@/assets/tokens/ext-dev.tokens.json\"\nimport devTokens from \"@/assets/tokens/dev.tokens.json\"\n\nexport const ZERO = new BN(0)\n\nexport function formatToCrypto(amount) {\n  const conversion = new BigNumber(amount / 10 ** 18, 10)\n  // show gwei if less than one\n  return conversion.lt(1) && conversion.gt(0)\n    ? conversion.toFormat(9)\n    : conversion.toFormat(2)\n}\n\nexport function parseToWei(amount: string, decimal = 18) {\n  // BN is ints only\n  const bigNumber = new BigNumber(amount).multipliedBy(10 ** decimal)\n  return new BN(bigNumber.toFixed())\n}\n\nexport const DOMAIN_NETWORK_ID = {\n  1: [\"loom\"],\n  4: [\"rinkeby\", \"local\"],\n}\n\nexport function getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min\n}\n\nexport const sleep = (milliseconds) => {\n  return new Promise((resolve) => setTimeout(resolve, milliseconds))\n}\n\nexport function capitalize(s: string) {\n  if (typeof s !== \"string\") return \"\"\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport const simpleMutations = (stateName) => ({\n  [`set${capitalize(stateName)}`]: (state, payload) =>\n    (state[stateName] = payload),\n})\n\nexport function getCardByTokenId(id: string) {\n  let cardDetail = CardDetails[id]\n  let card\n  if (!cardDetail) {\n    cardDetail = defaultCardData\n    card = Object.assign({}, cardDetail)\n  } else {\n    card = Object.assign(\n      {},\n      defaultCardData,\n      Cards.cards.find((cd) => parseInt(cd.mould_type, 10) === cardDetail.mouldId),\n    )\n    const variation = cardDetail.variant.replace(\"-edition\", \"\")\n    card.variation = variation === \"backers\" ? \"backer\" : variation\n  }\n  card.id = id\n  return card\n}\n\nexport const defaultCardData = {\n  display_name: \"Card\",\n  priceInUSD: 0.0,\n  priceInETH: 0.0,\n  image: \"question_card\",\n  title: \"A Great Zombie\",\n  inventory: 0,\n  variant: \"standard-edition\",\n  variation: \"standard\",\n  mould_type: \"001\",\n  element: \"AIR\",\n  originalID: \"001\",\n  id: \"001\",\n  tradeable: false,\n}\n\nexport function formatToLoomAddress(address: string) {\n  if (/^0x/.test(address)) {\n    return address.replace(\"0x\", \"loom\")\n  } else {\n    return address\n  }\n}\n\nexport function formatFromLoomAddress(address: string) {\n  if (address.slice(0, 4) === \"loom\") {\n    return address.replace(\"loom\", \"0x\")\n  } else {\n    return address\n  }\n}\n\nexport const formatToBNBAddress = (address: string) =>\n  /^0x/.test(address) ? address.replace(\"0x\", \"bnb\") : address\n\nexport const formatFromBNBAddress = (address: string) =>\n  address.slice(0, 3) === \"bnb\" ? address.replace(\"bnb\", \"0x\") : address\n\nexport function getRequired<T>(value: T | null | undefined, name: string): T {\n  if (value === null || value === undefined) {\n    throw new Error(\"Value required but was null \" + name)\n  }\n  return value\n}\n\n/**\n * Return list of token symbol from localStorage\n */\nexport function getWalletFromLocalStorage(env: string) {\n  const tokens = {\n    \"production\": productionTokens,\n    \"ext-dev\": extDevTokens,\n    \"dev\": devTokens,\n  }\n  let wallets = JSON.parse(localStorage.getItem(\"wallets\")!) // Get wallet from localStorage\n\n  if (!wallets || !Object.keys(wallets).includes(env)) {\n    const plasmaLoomAddr = tokens[env].find((token) => token.symbol === \"LOOM\")!.plasma\n    const plasmaEthAddr = tokens[env].find((token) => token.symbol === \"ETH\")!.plasma\n\n    // Create default wallet\n    if (!wallets) {\n      wallets = { [env]: [plasmaLoomAddr, plasmaEthAddr] }\n    } else {\n      wallets[env] = [plasmaLoomAddr, plasmaEthAddr]\n    }\n\n    localStorage.setItem(\"wallets\", JSON.stringify(wallets)) // set wallet to localStorage\n  }\n\n  return wallets[env]\n}\n\n/**\n * To add the new token symbol into wallet, then update wallet in localStorage\n * @param token Token data\n * @param env Current environment\n */\nexport function setNewTokenToLocalStorage(token: TokenData, env: string) {\n  const wallet = getWalletFromLocalStorage(env)\n  // check symbol not exist in wallet\n  const isExist = wallet.find((address) => token.plasma === address)\n  if (!isExist) {\n    wallet.push(token.plasma)\n    const wallets = JSON.parse(localStorage.getItem(\"wallets\")!)\n    wallets[env] = wallet\n    localStorage.setItem(\"wallets\", JSON.stringify(wallets))\n  }\n}\n\nexport function isMobile() {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\n}\n\nexport function detectedWallet() {\n  if (\"imToken\" in window ||\n    // @ts-ignore\n    (\"ethereum\" in window && window.ethereum.isImToken)\n  ) return \"imToken\"\n\n  // @ts-ignore\n  const web3 = window.web3\n  if (!web3) return \"\"\n\n  if (web3.isCobo) return \"cobo\"\n\n  if (web3.currentProvider.isTrust) return \"trust\"\n\n  if (web3.currentProvider.isGoWallet) return \"goWallet\"\n\n  if (web3.currentProvider.isAlphaWallet) return \"alphaWallet\"\n\n  if (web3.currentProvider.isStatus) return \"status\"\n\n  if (web3.currentProvider.isToshi) return \"coinbase\"\n\n  if (\"__CIPHER__\" in window) return \"cipher\"\n\n  if (web3.currentProvider.isMetaMask) return \"metamask\"\n\n  return \"\"\n}\nexport const ETH_WITHDRAW_LIMIT = new BN(300).mul(new BN(10).pow(new BN(18))) // 300 ETH\nexport const LOOM_WITHDRAW_LIMIT = new BN(1000000).mul(new BN(10).pow(new BN(18))) // 1 million LOOM\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"eb6be836ce8de9d09520a8777b408f78ef5ed8be"},"/Users/tharathip_loom/Documents/dashboard/src/feedback/store/mutations.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/feedback/store/mutations.ts","statementMap":{"0":{"start":{"line":2,"column":4},"end":{"line":2,"column":31}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":36}},"2":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"3":{"start":{"line":9,"column":4},"end":{"line":9,"column":33}},"4":{"start":{"line":10,"column":4},"end":{"line":14,"column":13}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":34}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":40}},"8":{"start":{"line":17,"column":4},"end":{"line":17,"column":37}},"9":{"start":{"line":18,"column":4},"end":{"line":18,"column":41}},"10":{"start":{"line":21,"column":4},"end":{"line":21,"column":40}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":41}},"12":{"start":{"line":25,"column":4},"end":{"line":25,"column":39}},"13":{"start":{"line":26,"column":4},"end":{"line":26,"column":41}},"14":{"start":{"line":29,"column":4},"end":{"line":29,"column":31}},"15":{"start":{"line":30,"column":4},"end":{"line":30,"column":30}},"16":{"start":{"line":31,"column":4},"end":{"line":31,"column":34}},"17":{"start":{"line":34,"column":4},"end":{"line":34,"column":38}},"18":{"start":{"line":35,"column":4},"end":{"line":35,"column":30}},"19":{"start":{"line":36,"column":4},"end":{"line":36,"column":34}},"20":{"start":{"line":37,"column":4},"end":{"line":37,"column":38}},"21":{"start":{"line":40,"column":4},"end":{"line":40,"column":30}}},"fnMap":{"0":{"name":"setTask","decl":{"start":{"line":1,"column":16},"end":{"line":1,"column":23}},"loc":{"start":{"line":1,"column":37},"end":{"line":3,"column":1}},"line":1},"1":{"name":"setStep","decl":{"start":{"line":4,"column":16},"end":{"line":4,"column":23}},"loc":{"start":{"line":4,"column":37},"end":{"line":7,"column":1}},"line":4},"2":{"name":"endTask","decl":{"start":{"line":8,"column":16},"end":{"line":8,"column":23}},"loc":{"start":{"line":8,"column":31},"end":{"line":15,"column":1}},"line":8},"3":{"name":"(anonymous_3)","decl":{"start":{"line":10,"column":15},"end":{"line":10,"column":16}},"loc":{"start":{"line":10,"column":21},"end":{"line":14,"column":5}},"line":10},"4":{"name":"showInfo","decl":{"start":{"line":16,"column":16},"end":{"line":16,"column":24}},"loc":{"start":{"line":16,"column":41},"end":{"line":19,"column":1}},"line":16},"5":{"name":"showSuccess","decl":{"start":{"line":20,"column":16},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":44},"end":{"line":23,"column":1}},"line":20},"6":{"name":"showError","decl":{"start":{"line":24,"column":16},"end":{"line":24,"column":25}},"loc":{"start":{"line":24,"column":42},"end":{"line":27,"column":1}},"line":24},"7":{"name":"showAlert","decl":{"start":{"line":28,"column":16},"end":{"line":28,"column":25}},"loc":{"start":{"line":28,"column":53},"end":{"line":32,"column":1}},"line":28},"8":{"name":"requireConfirmation","decl":{"start":{"line":33,"column":16},"end":{"line":33,"column":35}},"loc":{"start":{"line":33,"column":74},"end":{"line":38,"column":1}},"line":33},"9":{"name":"showLoadingBar","decl":{"start":{"line":39,"column":16},"end":{"line":39,"column":30}},"loc":{"start":{"line":39,"column":47},"end":{"line":41,"column":1}},"line":39}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1},"f":{"0":1,"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/feedback/store/mutations.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/feedback/store/mutations.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,OAAO,CAAC,KAAoB,EAAE,IAAY;IACtD,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAA;AAC9B,CAAC;AAED,MAAM,UAAU,OAAO,CAAC,KAAoB,EAAE,IAAY;IACtD,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IAC/B,KAAK,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAA;AAChC,CAAC;AAED,MAAM,UAAU,OAAO,CAAC,KAAoB;IACxC,KAAK,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAA;IAC5B,UAAU,CAAC,GAAG,EAAE;QACZ,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,EAAE,CAAA;QACxB,KAAK,CAAC,QAAQ,CAAC,KAAK,GAAG,EAAE,CAAA;QACzB,KAAK,CAAC,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC,CAAA;IACnC,CAAC,EAAE,IAAI,CAAC,CAAA;AACZ,CAAC;AAED,MAAM,UAAU,QAAQ,CAAC,KAAoB,EAAE,OAAe;IAC1D,KAAK,CAAC,YAAY,CAAC,IAAI,GAAG,MAAM,CAAA;IAChC,KAAK,CAAC,YAAY,CAAC,OAAO,GAAG,OAAO,CAAA;AACxC,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,KAAoB,EAAE,OAAe;IAC7D,KAAK,CAAC,YAAY,CAAC,IAAI,GAAG,SAAS,CAAA;IACnC,KAAK,CAAC,YAAY,CAAC,OAAO,GAAG,OAAO,CAAA;AACxC,CAAC;AAED,MAAM,UAAU,SAAS,CAAC,KAAoB,EAAE,OAAe;IAC3D,KAAK,CAAC,YAAY,CAAC,IAAI,GAAG,QAAQ,CAAA;IAClC,KAAK,CAAC,YAAY,CAAC,OAAO,GAAG,OAAO,CAAA;AACxC,CAAC;AAED,MAAM,UAAU,SAAS,CAAC,KAAoB,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE;IAC9D,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,CAAA;IAC1B,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAA;IACzB,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAA;AACjC,CAAC;AAED,MAAM,UAAU,mBAAmB,CAAC,KAAoB,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE;IACnF,KAAK,CAAC,KAAK,CAAC,IAAI,GAAG,cAAc,CAAA;IACjC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAA;IACzB,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAA;IAC7B,KAAK,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAA;AACrC,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,KAAoB,EAAE,OAAgB;IACjE,KAAK,CAAC,SAAS,GAAG,OAAO,CAAA;AAC7B,CAAC","sourcesContent":["import { FeedbackState } from \"./types\"\n\nexport function setTask(state: FeedbackState, task: string) {\n    state.progress.task = task\n}\n\nexport function setStep(state: FeedbackState, step: string) {\n    state.progress.steps.push(step)\n    state.progress.currentStep++\n}\n\nexport function endTask(state: FeedbackState) {\n    state.progress.currentStep++\n    setTimeout(() => {\n        state.progress.task = \"\"\n        state.progress.steps = []\n        state.progress.currentStep = -1\n    }, 1500)\n}\n\nexport function showInfo(state: FeedbackState, message: string) {\n    state.notification.type = \"info\"\n    state.notification.message = message\n}\n\nexport function showSuccess(state: FeedbackState, message: string) {\n    state.notification.type = \"success\"\n    state.notification.message = message\n}\n\nexport function showError(state: FeedbackState, message: string) {\n    state.notification.type = \"danger\"\n    state.notification.message = message\n}\n\nexport function showAlert(state: FeedbackState, { title, message }) {\n    state.alert.type = \"alert\"\n    state.alert.title = title\n    state.alert.message = message\n}\n\nexport function requireConfirmation(state: FeedbackState, { title, message, onConfirm }) {\n    state.alert.type = \"confirmation\"\n    state.alert.title = title\n    state.alert.message = message\n    state.alert.onConfirm = onConfirm\n}\n\nexport function showLoadingBar(state: FeedbackState, payload: boolean) {\n    state.isLoading = payload\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"b759a2335e306d838fe4a721d66399443077e341"},"/Users/tharathip_loom/Documents/dashboard/src/feedback/store/index.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/feedback/store/index.ts","statementMap":{"0":{"start":{"line":7,"column":12},"end":{"line":7,"column":29}},"1":{"start":{"line":8,"column":21},"end":{"line":27,"column":1}},"2":{"start":{"line":23,"column":12},"end":{"line":23,"column":19}},"3":{"start":{"line":28,"column":16},"end":{"line":28,"column":66}},"4":{"start":{"line":29,"column":20},"end":{"line":29,"column":35}},"5":{"start":{"line":30,"column":23},"end":{"line":43,"column":1}},"6":{"start":{"line":32,"column":8},"end":{"line":32,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":22,"column":8},"end":{"line":22,"column":9}},"loc":{"start":{"line":22,"column":20},"end":{"line":24,"column":9}},"line":22},"1":{"name":"(anonymous_1)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":16},"end":{"line":33,"column":5}},"line":31}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":1,"6":0},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/feedback/store/index.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/feedback/store/index.ts"],"names":[],"mappings":"AAAA;;GAEG;AAEH,OAAO,KAAK,MAAM,OAAO,CAAA;AACzB,OAAO,EAAqB,eAAe,EAAE,MAAM,YAAY,CAAA;AAC/D,OAAO,KAAK,SAAS,MAAM,aAAa,CAAA;AAGxC,MAAM,GAAG,GAAG,KAAK,CAAC,UAAU,CAAC,CAAA;AAE7B,MAAM,YAAY,GAAkB;IAClC,YAAY,EAAE;QACZ,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,EAAE;KACZ;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,EAAE;QACR,KAAK,EAAE,EAAE;QACT,WAAW,EAAE,CAAC,CAAC;KAChB;IACD,KAAK,EAAE;QACL,IAAI,EAAE,OAAO;QACb,KAAK,EAAE,EAAE;QACT,OAAO,EAAE,EAAE;QACX,SAAS;YACP,OAAM;QACR,CAAC;KACF;IACD,SAAS,EAAE,KAAK;CACjB,CAAA;AAED,MAAM,OAAO,GAAG,eAAe,EAAoB,CAAC,MAAM,CACxD,UAAU,EACV,YAAY,CACb,CAAA;AACD,MAAM,WAAW,GAAG,OAAO,CAAC,KAAK,EAAE,CAAA;AAEnC,MAAM,cAAc,GAAG;IACrB,IAAI,KAAK;QACP,OAAO,WAAW,EAAE,CAAA;IACtB,CAAC;IAED,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC;IAC1C,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC;IAC1C,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC;IAC1C,QAAQ,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;IAC5C,WAAW,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC;IAClD,SAAS,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;IAC9C,SAAS,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;IAC9C,cAAc,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC;IACxD,mBAAmB,EAAE,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC;CACnE,CAAA;AAED,2BAA2B;AAC3B,OAAO,EAAE,cAAc,EAAE,CAAA","sourcesContent":["/**\n * @module dashboard.feedback\n */\n\nimport debug from \"debug\"\nimport { BareActionContext, getStoreBuilder } from \"vuex-typex\"\nimport * as mutations from \"./mutations\"\nimport { FeedbackState, HasFeedbackState } from \"./types\"\n\nconst log = debug(\"feedback\")\n\nconst initialState: FeedbackState = {\n  notification: {\n    type: \"info\",\n    message: \"\",\n  },\n  progress: {\n    task: \"\",\n    steps: [],\n    currentStep: -1,\n  },\n  alert: {\n    type: \"alert\",\n    title: \"\",\n    message: \"\",\n    onConfirm() {\n      return\n    },\n  },\n  isLoading: false,\n}\n\nconst builder = getStoreBuilder<HasFeedbackState>().module(\n  \"feedback\",\n  initialState,\n)\nconst stateGetter = builder.state()\n\nconst feedbackModule = {\n  get state() {\n    return stateGetter()\n  },\n\n  setTask: builder.commit(mutations.setTask),\n  setStep: builder.commit(mutations.setStep),\n  endTask: builder.commit(mutations.endTask),\n  showInfo: builder.commit(mutations.showInfo),\n  showSuccess: builder.commit(mutations.showSuccess),\n  showError: builder.commit(mutations.showError),\n  showAlert: builder.commit(mutations.showAlert),\n  showLoadingBar: builder.commit(mutations.showLoadingBar),\n  requireConfirmation: builder.commit(mutations.requireConfirmation),\n}\n\n// vuex module as a service\nexport { feedbackModule }\n\ndeclare type ActionContext = BareActionContext<FeedbackState, HasFeedbackState>\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"4d2bad8b55b17ee5fa86f9aa4684c14e219ab689"},"/Users/tharathip_loom/Documents/dashboard/src/i18n.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/i18n.ts","statementMap":{"0":{"start":{"line":4,"column":0},"end":{"line":4,"column":17}},"1":{"start":{"line":5,"column":20},"end":{"line":9,"column":2}},"2":{"start":{"line":10,"column":22},"end":{"line":10,"column":28}},"3":{"start":{"line":11,"column":32},"end":{"line":19,"column":1}},"4":{"start":{"line":21,"column":4},"end":{"line":21,"column":73}},"5":{"start":{"line":21,"column":47},"end":{"line":21,"column":71}},"6":{"start":{"line":24,"column":4},"end":{"line":24,"column":35}},"7":{"start":{"line":25,"column":4},"end":{"line":32,"column":5}},"8":{"start":{"line":26,"column":8},"end":{"line":30,"column":9}},"9":{"start":{"line":27,"column":25},"end":{"line":27,"column":66}},"10":{"start":{"line":28,"column":12},"end":{"line":28,"column":48}},"11":{"start":{"line":29,"column":12},"end":{"line":29,"column":39}},"12":{"start":{"line":31,"column":8},"end":{"line":31,"column":29}}},"fnMap":{"0":{"name":"isLocaleSupported","decl":{"start":{"line":20,"column":16},"end":{"line":20,"column":33}},"loc":{"start":{"line":20,"column":45},"end":{"line":22,"column":1}},"line":20},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":35},"end":{"line":21,"column":36}},"loc":{"start":{"line":21,"column":47},"end":{"line":21,"column":71}},"line":21},"2":{"name":"loadLocale","decl":{"start":{"line":23,"column":22},"end":{"line":23,"column":32}},"loc":{"start":{"line":23,"column":41},"end":{"line":33,"column":1}},"line":23}},"branchMap":{"0":{"loc":{"start":{"line":25,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":32,"column":5}},{"start":{"line":25,"column":4},"end":{"line":32,"column":5}}],"line":25},"1":{"loc":{"start":{"line":26,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":30,"column":9}},{"start":{"line":26,"column":8},"end":{"line":30,"column":9}}],"line":26}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/i18n.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/i18n.ts"],"names":[],"mappings":"AAAA,OAAO,GAAG,MAAM,KAAK,CAAA;AACrB,OAAO,OAAO,MAAM,UAAU,CAAA;AAC9B,OAAO,cAAc,MAAM,mBAAmB,CAAA;AAG9C,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;AAEhB,MAAM,CAAC,MAAM,IAAI,GAAG,IAAI,OAAO,CAAC;IAC9B,MAAM,EAAE,IAAI;IACZ,cAAc,EAAE,IAAI;IACpB,QAAQ,EAAE,EAAE,EAAE,EAAE,cAAc,EAAE;CACjC,CAAC,CAAA;AAEF,MAAM,aAAa,GAAG,CAAC,IAAI,CAAC,CAAA;AAE5B,MAAM,CAAC,MAAM,gBAAgB,GAAG;IAC9B,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,SAAS,EAAE,kBAAkB,EAAE,IAAI,EAAE;IACjE,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,kBAAkB,EAAE,IAAI,EAAE;IAC5D,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,SAAS,EAAE,kBAAkB,EAAE,IAAI,EAAE;IACjE,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,MAAM,EAAE,kBAAkB,EAAE,IAAI,EAAE;IAC9D,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,SAAS,EAAE,kBAAkB,EAAE,KAAK,EAAE;IAClE,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,SAAS,EAAE,kBAAkB,EAAE,KAAK,EAAE;IAClE,EAAE,GAAG,EAAE,IAAI,EAAE,aAAa,EAAE,QAAQ,EAAE,kBAAkB,EAAE,QAAQ,EAAE;CACrE,CAAA;AAED,MAAM,UAAU,iBAAiB,CAAC,SAAS;IACzC,OAAO,CAAC,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,CAAA;AACtE,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,UAAU,CAAC,MAAM;IACrC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAA;IAC9B,IAAI,IAAI,CAAC,MAAM,KAAK,MAAM,EAAE;QAC1B,IAAI,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;YACxC,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,aAAa,MAAM,OAAO,CAAC,CAAA;YACtD,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;YACnC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;SAC3B;QACD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;KACrB;AACH,CAAC","sourcesContent":["import Vue from \"vue\"\nimport VueI18n from \"vue-i18n\"\nimport defaultMessage from \"./locales/en.json\"\nimport Axios from \"axios\"\n\nVue.use(VueI18n)\n\nexport const i18n = new VueI18n({\n  locale: \"en\",\n  fallbackLocale: \"en\",\n  messages: { en: defaultMessage },\n})\n\nconst loadedLocales = [\"en\"]\n\nexport const supportedLocales = [\n  { key: \"en\", localizedName: \"English\", localizedShortName: \"EN\" },\n  { key: \"zh\", localizedName: \"中文\", localizedShortName: \"中文\" },\n  { key: \"es\", localizedName: \"Español\", localizedShortName: \"ES\" },\n  { key: \"ja\", localizedName: \"日本語 \", localizedShortName: \"日本\" },\n  { key: \"th\", localizedName: \"ภาษาไทย\", localizedShortName: \"ไทย\" },\n  { key: \"ko\", localizedName: \"조선말/한국어\", localizedShortName: \"한국어\" },\n  { key: \"hi\", localizedName: \"हिन्दी\", localizedShortName: \"हिन्दी\" },\n]\n\nexport function isLocaleSupported(localeKey) {\n  return !!supportedLocales.find((locale) => locale.key === localeKey)\n}\n\nexport async function loadLocale(locale) {\n  console.log(\"LOCALE \", locale)\n  if (i18n.locale !== locale) {\n    if (loadedLocales.indexOf(locale) === -1) {\n      const msgs = await require(`./locales/${locale}.json`)\n      i18n.setLocaleMessage(locale, msgs)\n      loadedLocales.push(locale)\n    }\n    i18n.locale = locale\n  }\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"ae3d7ff4725e6b890ed347dc23b25a119c70ee5b"},"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/types.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/types.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":8,"column":46}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":4},"end":{"line":4,"column":39}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":4},"end":{"line":6,"column":43}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":41}},"6":{"start":{"line":10,"column":0},"end":{"line":12,"column":28}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":1},"end":{"line":2,"column":2}},"loc":{"start":{"line":2,"column":28},"end":{"line":8,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":1},"end":{"line":10,"column":2}},"loc":{"start":{"line":10,"column":19},"end":{"line":12,"column":1}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":3},"end":{"line":8,"column":44}},"type":"binary-expr","locations":[{"start":{"line":8,"column":3},"end":{"line":8,"column":18}},{"start":{"line":8,"column":23},"end":{"line":8,"column":43}}],"line":8},"1":{"loc":{"start":{"line":12,"column":3},"end":{"line":12,"column":26}},"type":"binary-expr","locations":[{"start":{"line":12,"column":3},"end":{"line":12,"column":9}},{"start":{"line":12,"column":14},"end":{"line":12,"column":25}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1,"1":1},"b":{"0":[1,1],"1":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/types.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/plasma/types.ts"],"names":[],"mappings":"AA4CA,MAAM,CAAN,IAAY,eAMX;AAND,WAAY,eAAe;IACzB,8BAAW,CAAA;IACX,kCAAe,CAAA;IACf,oCAAiB,CAAA;IACjB,sCAAmB,CAAA;IACnB,oCAAiB,CAAA;AACnB,CAAC,EANW,eAAe,KAAf,eAAe,QAM1B;AA4CD,MAAM,CAAN,IAAY,MAEX;AAFD,WAAY,MAAM;IAChB,yCAAW,CAAA;AACb,CAAC,EAFW,MAAM,KAAN,MAAM,QAEjB","sourcesContent":["import BN from \"bn.js\"\n\nimport { Client, LoomProvider } from \"loom-js\"\nimport Web3 from \"web3\"\nimport { BareActionContext } from \"vuex-typex\"\nimport { Provider } from \"ethers/providers\"\n\nexport interface PlasmaConfig {\n  networkId: string\n  chainId: string\n  endpoint: string\n  blockExplorer: string\n  loomGamesEndpoint: string\n  historyUrl: string\n}\n\nexport interface HasPlasmaState {\n  env: string\n  plasma: PlasmaState\n}\n\nexport interface PlasmaState extends PlasmaConfig {\n  client: Client | null\n  provider: LoomProvider | null\n  // for normal contracts\n  web3: Web3 | null\n  ethersProvider: Provider | null\n  address: string\n  signer: PlasmaSigner | null\n  history: any[]\n  appId: {\n    private: string,\n    public: string,\n    address: string,\n  }\n\n  coins: {\n    LOOM: BalanceInfo,\n    [tokenSymbol: string]: BalanceInfo,\n  }\n  selectedToken: string\n\n}\n\nexport enum PlasmaTokenKind {\n  ETH = \"ETH\",\n  ERC20 = \"erc20\",\n  ERC721 = \"erc721\",\n  ERC721X = \"erc721x\",\n  LOOMCOIN = \"LOOM\",\n}\n\nexport interface BalanceInfo {\n  decimals: number\n  balance: BN\n  loading: boolean\n}\n\nexport interface TransferRequest {\n  symbol: string\n  weiAmount: BN\n  to: string\n  fee?: {\n    token: string\n    amount: BN,\n  }\n}\n\nexport interface PackDetail {\n  type: string\n  amount: number\n}\n\nexport interface PlasmaSigner {\n  // chain id to be used with this signer (ex. eth for ethSigner, default for plasama pk)\n  readonly chain: string\n  getAddress(): Promise<string>\n  signAsync(message: string): Promise<string>\n  configureClient(client: Client)\n}\n\nexport interface CardDetail {\n  id: string\n  amount: number\n  display_name: string\n  image: string\n  title: string\n  variant: string\n  variation: string\n  mould_type: string\n  element: string\n  originalID: string\n}\n\nexport enum TierID {\n  DEFAULT = 0,\n}\n\n// helper/shorthand for plasma module action context\nexport declare type PlasmaContext = BareActionContext<\n  PlasmaState,\n  HasPlasmaState\n>\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"f69f6f18429a64411c6f198c19632b3fc98a5402"},"/Users/tharathip_loom/Documents/dashboard/src/services/TokenService.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/services/TokenService.ts","statementMap":{"0":{"start":{"line":7,"column":15},"end":{"line":13,"column":2}},"1":{"start":{"line":16,"column":8},"end":{"line":16,"column":25}},"2":{"start":{"line":19,"column":8},"end":{"line":19,"column":27}},"3":{"start":{"line":27,"column":23},"end":{"line":27,"column":43}},"4":{"start":{"line":28,"column":8},"end":{"line":28,"column":63}},"5":{"start":{"line":28,"column":45},"end":{"line":28,"column":61}},"6":{"start":{"line":30,"column":8},"end":{"line":30,"column":33}},"7":{"start":{"line":33,"column":21},"end":{"line":33,"column":50}},"8":{"start":{"line":34,"column":8},"end":{"line":34,"column":27}},"9":{"start":{"line":42,"column":8},"end":{"line":42,"column":46}},"10":{"start":{"line":48,"column":8},"end":{"line":48,"column":56}},"11":{"start":{"line":48,"column":42},"end":{"line":48,"column":54}},"12":{"start":{"line":55,"column":21},"end":{"line":55,"column":37}},"13":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"14":{"start":{"line":57,"column":12},"end":{"line":57,"column":55}},"15":{"start":{"line":59,"column":8},"end":{"line":59,"column":20}},"16":{"start":{"line":62,"column":8},"end":{"line":62,"column":68}},"17":{"start":{"line":62,"column":43},"end":{"line":62,"column":66}},"18":{"start":{"line":65,"column":21},"end":{"line":65,"column":94}},"19":{"start":{"line":65,"column":49},"end":{"line":65,"column":93}},"20":{"start":{"line":66,"column":8},"end":{"line":72,"column":9}},"21":{"start":{"line":67,"column":12},"end":{"line":67,"column":91}},"22":{"start":{"line":68,"column":12},"end":{"line":68,"column":24}},"23":{"start":{"line":71,"column":12},"end":{"line":71,"column":24}},"24":{"start":{"line":75,"column":28},"end":{"line":75,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":18},"end":{"line":17,"column":5}},"line":15},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":18},"end":{"line":20,"column":5}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":20},"end":{"line":31,"column":5}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":38},"end":{"line":28,"column":39}},"loc":{"start":{"line":28,"column":45},"end":{"line":28,"column":61}},"line":28},"4":{"name":"(anonymous_4)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":30},"end":{"line":35,"column":5}},"line":32},"5":{"name":"(anonymous_5)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":43},"end":{"line":43,"column":5}},"line":41},"6":{"name":"(anonymous_6)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":17},"end":{"line":49,"column":5}},"line":47},"7":{"name":"(anonymous_7)","decl":{"start":{"line":48,"column":31},"end":{"line":48,"column":32}},"loc":{"start":{"line":48,"column":42},"end":{"line":48,"column":54}},"line":48},"8":{"name":"(anonymous_8)","decl":{"start":{"line":54,"column":4},"end":{"line":54,"column":5}},"loc":{"start":{"line":54,"column":29},"end":{"line":60,"column":5}},"line":54},"9":{"name":"(anonymous_9)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":16},"end":{"line":63,"column":5}},"line":61},"10":{"name":"(anonymous_10)","decl":{"start":{"line":62,"column":32},"end":{"line":62,"column":33}},"loc":{"start":{"line":62,"column":43},"end":{"line":62,"column":66}},"line":62},"11":{"name":"(anonymous_11)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":37},"end":{"line":73,"column":5}},"line":64},"12":{"name":"(anonymous_12)","decl":{"start":{"line":65,"column":38},"end":{"line":65,"column":39}},"loc":{"start":{"line":65,"column":49},"end":{"line":65,"column":93}},"line":65}},"branchMap":{"0":{"loc":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},{"start":{"line":56,"column":8},"end":{"line":58,"column":9}}],"line":56},"1":{"loc":{"start":{"line":66,"column":8},"end":{"line":72,"column":9}},"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":72,"column":9}},{"start":{"line":66,"column":8},"end":{"line":72,"column":9}}],"line":66}},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":104,"6":1,"7":6,"8":4,"9":6,"10":4,"11":420,"12":8,"13":8,"14":3,"15":5,"16":8,"17":392,"18":4,"19":284,"20":4,"21":2,"22":2,"23":2,"24":1},"f":{"0":1,"1":0,"2":1,"3":104,"4":6,"5":6,"6":4,"7":420,"8":8,"9":8,"10":392,"11":4,"12":284},"b":{"0":[3,5],"1":[2,2]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/services/TokenService.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/services/TokenService.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,KAAK,MAAM,OAAO,CAAA;AAUzB,MAAM,MAAM,GAAc,MAAM,CAAC,MAAM,CAAC;IACtC,MAAM,EAAE,QAAQ;IAChB,QAAQ,EAAE,EAAE;IACZ,QAAQ,EAAE,4CAA4C;IACtD,MAAM,EAAE,4CAA4C;IACpD,OAAO,EAAE,EAAE;CACZ,CAAC,CAAA;AAEF,MAAM,YAAY;IAAlB;QACE,WAAM,GAAgB,EAAE,CAAA;IA0E1B,CAAC;IAxEC,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,MAAM,CAAA;IACpB,CAAC;IAED;;;;OAIG;IACH,KAAK,CAAC,IAAI,CAAC,GAAW;QACpB,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QACnC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;QACtD,oEAAoE;QACpE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;IAC1B,CAAC;IAED,UAAU,CACR,MAAc,EACd,KAAwC;QAExC,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAA;QAC1C,OAAO,IAAI,CAAC,KAAK,CAAC,CAAA;IACpB,CAAC;IAED;;;;OAIG;IACH,uBAAuB,CACrB,MAAc,EACd,KAAwC;QAExC,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;IACvC,CAAC;IAED;;OAEG;IACH,UAAU;QACR,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;IACjD,CAAC;IACD;;;OAGG;IACH,gBAAgB,CAAC,MAAc;QAC7B,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;QAC7B,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,MAAM,IAAI,KAAK,CAAC,gBAAgB,GAAG,MAAM,CAAC,CAAA;SAC3C;QACD,OAAO,IAAI,CAAA;IACb,CAAC;IAED,GAAG,CAAC,MAAc;QAChB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,KAAK,MAAM,CAAC,CAAA;IAC7D,CAAC;IAED,gBAAgB,CACd,OAAe,EACf,KAA4B;QAE5B,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,OAAO,CAAC,iBAAiB,EAAE,CAAC,CAAA;QACtF,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,OAAO,CAAC,IAAI,CACV,2CAA2C,OAAO,OAAO,KAAK,EAAE,CACjE,CAAA;YACD,OAAO,IAAI,CAAA;SACZ;aAAM;YACL,OAAO,IAAI,CAAA;SACZ;IACH,CAAC;CACF;AAED,MAAM,CAAC,MAAM,YAAY,GAAG,IAAI,YAAY,EAAE,CAAA","sourcesContent":["/**\n * @module loom-dashboard.tokens\n *\n * Service that returns information about tokens.\n */\n\nimport axios from \"axios\"\n\nexport interface TokenData {\n  symbol: string\n  ethereum: string\n  plasma: string\n  binance: string\n  decimals: number\n}\n\nconst ETHBNB: TokenData = Object.freeze({\n  symbol: \"ETHBNB\",\n  decimals: 18,\n  ethereum: \"0xb8c77482e45f1f44de1745f52c74426c631bdd52\",\n  plasma: \"0xcf2851b1ad63d093238ea296524be8d7cd920e0b\",\n  binance: \"\",\n})\n\nclass TokenService {\n  tokens: TokenData[] = []\n\n  get symbols() {\n    return this.tokens\n  }\n\n  /**\n   * should call this method after service class created\n   * @param url to tokens json\n   * json is expected tp be  TokenData[]\n   */\n  async load(url: string) {\n    const result = await axios.get(url)\n    this.tokens = result.data.map((t) => Object.freeze(t))\n    // temporary (gateway until BNB receipts are cleared on ethereum TG)\n    this.tokens.push(ETHBNB)\n  }\n\n  getAddress(\n    symbol: string,\n    chain: \"ethereum\" | \"plasma\" | \"binance\",\n  ): string {\n    const data = this.getTokenbySymbol(symbol)\n    return data[chain]\n  }\n\n  /**\n   *\n   * @param coinSymbol like BNB ETH LOOM... etc\n   * @param chain address from plasma | ethereum\n   */\n  getTokenAddressBySymbol(\n    symbol: string,\n    chain: \"ethereum\" | \"plasma\" | \"binance\",\n  ): string {\n    return this.getAddress(symbol, chain)\n  }\n\n  /**\n   * Return list of token symbol\n   */\n  getSymbols(): string[] {\n    return this.tokens.map((token) => token.symbol)\n  }\n  /**\n   * Return token object\n   * @param coinSymbol\n   */\n  getTokenbySymbol(symbol: string): TokenData {\n    const data = this.get(symbol)\n    if (data === undefined) {\n      throw new Error(\"Unknown token \" + symbol)\n    }\n    return data\n  }\n\n  get(symbol: string): TokenData | undefined {\n    return this.tokens.find((token) => token.symbol === symbol)\n  }\n\n  tokenFromAddress(\n    address: string,\n    chain: \"plasma\" | \"ethereum\",\n  ): TokenData | null {\n    const info = this.tokens.find((token) => token[chain] === address.toLocaleLowerCase())\n    if (info === undefined) {\n      console.warn(\n        `No known token contract matches address ${address} on ${chain}`,\n      )\n      return null\n    } else {\n      return info\n    }\n  }\n}\n\nexport const tokenService = new TokenService()\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"a494030783aae8e93fac0ad3fce2bc5debe37319"},"/Users/tharathip_loom/Documents/dashboard/src/filters.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/filters.ts","statementMap":{"0":{"start":{"line":4,"column":28},"end":{"line":4,"column":78}},"1":{"start":{"line":5,"column":25},"end":{"line":5,"column":70}},"2":{"start":{"line":6,"column":26},"end":{"line":6,"column":40}},"3":{"start":{"line":8,"column":4},"end":{"line":8,"column":58}},"4":{"start":{"line":9,"column":4},"end":{"line":9,"column":52}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":53}},"6":{"start":{"line":12,"column":4},"end":{"line":12,"column":35}},"7":{"start":{"line":13,"column":4},"end":{"line":13,"column":49}},"8":{"start":{"line":14,"column":4},"end":{"line":14,"column":49}},"9":{"start":{"line":15,"column":4},"end":{"line":15,"column":39}},"10":{"start":{"line":16,"column":4},"end":{"line":16,"column":33}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":51}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":49}},"13":{"start":{"line":22,"column":16},"end":{"line":22,"column":56}},"14":{"start":{"line":23,"column":4},"end":{"line":23,"column":83}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":51}},"16":{"start":{"line":29,"column":4},"end":{"line":29,"column":48}},"17":{"start":{"line":32,"column":4},"end":{"line":32,"column":49}},"18":{"start":{"line":34,"column":25},"end":{"line":40,"column":2}},"19":{"start":{"line":42,"column":4},"end":{"line":42,"column":82}},"20":{"start":{"line":45,"column":4},"end":{"line":45,"column":35}},"21":{"start":{"line":46,"column":4},"end":{"line":46,"column":59}},"22":{"start":{"line":54,"column":4},"end":{"line":54,"column":59}},"23":{"start":{"line":62,"column":4},"end":{"line":64,"column":35}},"24":{"start":{"line":67,"column":4},"end":{"line":68,"column":19}},"25":{"start":{"line":68,"column":8},"end":{"line":68,"column":19}},"26":{"start":{"line":69,"column":14},"end":{"line":69,"column":69}},"27":{"start":{"line":70,"column":4},"end":{"line":70,"column":33}},"28":{"start":{"line":73,"column":4},"end":{"line":73,"column":60}}},"fnMap":{"0":{"name":"initFilters","decl":{"start":{"line":7,"column":16},"end":{"line":7,"column":27}},"loc":{"start":{"line":7,"column":30},"end":{"line":20,"column":1}},"line":7},"1":{"name":"formatValidatorWebsite","decl":{"start":{"line":21,"column":16},"end":{"line":21,"column":38}},"loc":{"start":{"line":21,"column":50},"end":{"line":24,"column":1}},"line":21},"2":{"name":"formateDelegationState","decl":{"start":{"line":25,"column":16},"end":{"line":25,"column":38}},"loc":{"start":{"line":25,"column":46},"end":{"line":27,"column":1}},"line":25},"3":{"name":"formateLockTimeTier","decl":{"start":{"line":28,"column":16},"end":{"line":28,"column":35}},"loc":{"start":{"line":28,"column":43},"end":{"line":30,"column":1}},"line":28},"4":{"name":"formatLockTimeBonus","decl":{"start":{"line":31,"column":16},"end":{"line":31,"column":35}},"loc":{"start":{"line":31,"column":43},"end":{"line":33,"column":1}},"line":31},"5":{"name":"formatDate","decl":{"start":{"line":41,"column":16},"end":{"line":41,"column":26}},"loc":{"start":{"line":41,"column":38},"end":{"line":43,"column":1}},"line":41},"6":{"name":"readableDateTime","decl":{"start":{"line":44,"column":16},"end":{"line":44,"column":32}},"loc":{"start":{"line":44,"column":44},"end":{"line":47,"column":1}},"line":44},"7":{"name":"formatDomain","decl":{"start":{"line":53,"column":16},"end":{"line":53,"column":28}},"loc":{"start":{"line":53,"column":42},"end":{"line":55,"column":1}},"line":53},"8":{"name":"formatUrl","decl":{"start":{"line":61,"column":16},"end":{"line":61,"column":25}},"loc":{"start":{"line":61,"column":39},"end":{"line":65,"column":1}},"line":61},"9":{"name":"formatTokenAmount","decl":{"start":{"line":66,"column":16},"end":{"line":66,"column":33}},"loc":{"start":{"line":66,"column":65},"end":{"line":71,"column":1}},"line":66},"10":{"name":"capitalizeWord","decl":{"start":{"line":72,"column":16},"end":{"line":72,"column":30}},"loc":{"start":{"line":72,"column":37},"end":{"line":74,"column":1}},"line":72}},"branchMap":{"0":{"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":56}},"type":"binary-expr","locations":[{"start":{"line":22,"column":16},"end":{"line":22,"column":33}},{"start":{"line":22,"column":37},"end":{"line":22,"column":56}}],"line":22},"1":{"loc":{"start":{"line":23,"column":11},"end":{"line":23,"column":82}},"type":"cond-expr","locations":[{"start":{"line":23,"column":32},"end":{"line":23,"column":49}},{"start":{"line":23,"column":52},"end":{"line":23,"column":82}}],"line":23},"2":{"loc":{"start":{"line":26,"column":11},"end":{"line":26,"column":50}},"type":"binary-expr","locations":[{"start":{"line":26,"column":11},"end":{"line":26,"column":37}},{"start":{"line":26,"column":41},"end":{"line":26,"column":50}}],"line":26},"3":{"loc":{"start":{"line":29,"column":11},"end":{"line":29,"column":47}},"type":"binary-expr","locations":[{"start":{"line":29,"column":11},"end":{"line":29,"column":34}},{"start":{"line":29,"column":38},"end":{"line":29,"column":47}}],"line":29},"4":{"loc":{"start":{"line":32,"column":11},"end":{"line":32,"column":48}},"type":"binary-expr","locations":[{"start":{"line":32,"column":11},"end":{"line":32,"column":35}},{"start":{"line":32,"column":39},"end":{"line":32,"column":48}}],"line":32},"5":{"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":29}},"type":"binary-expr","locations":[{"start":{"line":54,"column":12},"end":{"line":54,"column":23}},{"start":{"line":54,"column":27},"end":{"line":54,"column":29}}],"line":54},"6":{"loc":{"start":{"line":62,"column":11},"end":{"line":64,"column":34}},"type":"cond-expr","locations":[{"start":{"line":63,"column":10},"end":{"line":63,"column":21}},{"start":{"line":64,"column":10},"end":{"line":64,"column":34}}],"line":62},"7":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":29}},"type":"binary-expr","locations":[{"start":{"line":62,"column":12},"end":{"line":62,"column":23}},{"start":{"line":62,"column":27},"end":{"line":62,"column":29}}],"line":62},"8":{"loc":{"start":{"line":66,"column":39},"end":{"line":66,"column":52}},"type":"default-arg","locations":[{"start":{"line":66,"column":50},"end":{"line":66,"column":52}}],"line":66},"9":{"loc":{"start":{"line":67,"column":4},"end":{"line":68,"column":19}},"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":68,"column":19}},{"start":{"line":67,"column":4},"end":{"line":68,"column":19}}],"line":67}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0],"9":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/filters.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/filters.ts"],"names":[],"mappings":"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","sourcesContent":["import { DelegationState, LocktimeTier } from \"loom-js/dist/proto/dposv3_pb\"\nimport Vue from \"vue\"\nimport BN from \"bn.js\"\nimport { formatToLoomAddress } from \"./utils\"\nimport BigNumber from \"bignumber.js\"\n\nconst delegationStateText = [\"Bonding\", \"Bonded\", \"Unbonding\", \"Redelegating\"]\nconst lockTimeTierText = [\"2 weeks\", \"3 months\", \"6 months\", \"1 year\"]\nconst lockTimeTierBonus = [1, 1.5, 2, 3]\n\nexport function initFilters() {\n  Vue.filter(\"delegationState\", formateDelegationState)\n  Vue.filter(\"lockTimeTier\", formateLockTimeTier)\n  Vue.filter(\"lockTimeBonus\", formatLockTimeBonus)\n  // Vue.filter('duration', formatDuration)\n  Vue.filter(\"date\", formatDate)\n  Vue.filter(\"readableDate\", readableDateTime)\n  Vue.filter(\"tokenAmount\", formatTokenAmount)\n  Vue.filter(\"domain\", formatDomain)\n  Vue.filter(\"url\", formatUrl)\n  // Vue.filter('timeFromNow', formatDurationFromNow)\n  Vue.filter(\"loomAddress\", formatToLoomAddress)\n  Vue.filter(\"capitalizeWord\", capitalizeWord)\n}\n\nexport function formatValidatorWebsite(validator: { Website: string }) {\n  const str = validator.Website || \"https://loomx.io/\"\n  return str.match(/^http/) ? validator.Website : \"https://\" + validator.Website\n}\n\nexport function formateDelegationState(value: DelegationState) {\n  return delegationStateText[value] || \"Unknown\"\n}\n\nexport function formateLockTimeTier(value: LocktimeTier) {\n  return lockTimeTierText[value] || \"Unknown\"\n}\n\nexport function formatLockTimeBonus(value: LocktimeTier) {\n  return lockTimeTierBonus[value] || \"Unknown\"\n}\n\nconst DATE_TIME_FORMAT = new Intl.DateTimeFormat(undefined, {\n  year: \"numeric\",\n  month: \"long\",\n  day: \"numeric\",\n  hour: \"2-digit\",\n  minute: \"2-digit\",\n})\nexport function formatDate(timestamp) {\n  return DATE_TIME_FORMAT.format(new Date(parseInt(\"\" + timestamp, 10) * 1000))\n}\n\nexport function readableDateTime(timestamp) {\n  console.log(\"date\", timestamp)\n  return new Date(timestamp * 1000).toLocaleDateString()\n}\n\n/**\n * For some validator website property contains a domain\n * for other the url...\n * @param domainOrUrl\n */\nexport function formatDomain(domainOrUrl: string) {\n  return (domainOrUrl || \"\").replace(/^https?:\\/\\//, \"\")\n}\n/**\n * For some validator website property contains a domain\n * for other the url...\n * @param domainOrUrl\n */\nexport function formatUrl(domainOrUrl: string) {\n  return (domainOrUrl || \"\").match(/^https?:\\/\\//)\n    ? domainOrUrl\n    : \"https://\" + domainOrUrl\n}\n\nexport function formatTokenAmount(wei: BN, decimals = 18, precision?: number) {\n  if (!wei) return wei\n  const c = new BigNumber(wei.toString()).dividedBy(10 ** decimals)\n  return c.toFormat(precision)\n}\n\nexport function capitalizeWord(text: string) {\n  return text.charAt(0).toUpperCase() + text.substring(1)\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"d8f616809c91c6efda02fc63145e4c742ccbf5b1"},"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/tokens.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/tokens.ts","statementMap":{"0":{"start":{"line":13,"column":12},"end":{"line":13,"column":27}},"1":{"start":{"line":14,"column":25},"end":{"line":14,"column":34}},"2":{"start":{"line":16,"column":4},"end":{"line":16,"column":22}},"3":{"start":{"line":27,"column":4},"end":{"line":39,"column":5}},"4":{"start":{"line":29,"column":12},"end":{"line":29,"column":56}},"5":{"start":{"line":30,"column":12},"end":{"line":30,"column":18}},"6":{"start":{"line":32,"column":12},"end":{"line":32,"column":56}},"7":{"start":{"line":33,"column":12},"end":{"line":33,"column":18}},"8":{"start":{"line":35,"column":12},"end":{"line":35,"column":57}},"9":{"start":{"line":36,"column":12},"end":{"line":36,"column":18}},"10":{"start":{"line":38,"column":12},"end":{"line":38,"column":62}},"11":{"start":{"line":40,"column":4},"end":{"line":40,"column":35}},"12":{"start":{"line":47,"column":20},"end":{"line":47,"column":46}},"13":{"start":{"line":48,"column":4},"end":{"line":50,"column":5}},"14":{"start":{"line":49,"column":8},"end":{"line":49,"column":55}},"15":{"start":{"line":51,"column":4},"end":{"line":51,"column":19}},"16":{"start":{"line":55,"column":8},"end":{"line":55,"column":27}},"17":{"start":{"line":56,"column":8},"end":{"line":56,"column":33}},"18":{"start":{"line":59,"column":8},"end":{"line":59,"column":74}},"19":{"start":{"line":62,"column":24},"end":{"line":62,"column":53}},"20":{"start":{"line":63,"column":24},"end":{"line":63,"column":67}},"21":{"start":{"line":64,"column":8},"end":{"line":64,"column":56}},"22":{"start":{"line":67,"column":8},"end":{"line":67,"column":92}},"23":{"start":{"line":70,"column":8},"end":{"line":70,"column":70}},"24":{"start":{"line":73,"column":8},"end":{"line":73,"column":71}},"25":{"start":{"line":76,"column":24},"end":{"line":76,"column":53}},"26":{"start":{"line":77,"column":8},"end":{"line":77,"column":62}},"27":{"start":{"line":82,"column":8},"end":{"line":82,"column":27}},"28":{"start":{"line":83,"column":8},"end":{"line":83,"column":33}},"29":{"start":{"line":86,"column":8},"end":{"line":86,"column":57}},"30":{"start":{"line":89,"column":23},"end":{"line":89,"column":60}},"31":{"start":{"line":90,"column":8},"end":{"line":95,"column":47}},"32":{"start":{"line":95,"column":25},"end":{"line":95,"column":45}},"33":{"start":{"line":98,"column":23},"end":{"line":98,"column":60}},"34":{"start":{"line":99,"column":8},"end":{"line":104,"column":36}},"35":{"start":{"line":104,"column":25},"end":{"line":104,"column":34}},"36":{"start":{"line":107,"column":23},"end":{"line":107,"column":60}},"37":{"start":{"line":108,"column":8},"end":{"line":110,"column":53}},"38":{"start":{"line":113,"column":23},"end":{"line":113,"column":60}},"39":{"start":{"line":114,"column":23},"end":{"line":116,"column":52}},"40":{"start":{"line":117,"column":8},"end":{"line":117,"column":36}},"41":{"start":{"line":118,"column":8},"end":{"line":118,"column":50}},"42":{"start":{"line":119,"column":8},"end":{"line":119,"column":22}},"43":{"start":{"line":123,"column":4},"end":{"line":127,"column":6}},"44":{"start":{"line":130,"column":18},"end":{"line":130,"column":31}},"45":{"start":{"line":131,"column":17},"end":{"line":131,"column":27}},"46":{"start":{"line":133,"column":4},"end":{"line":135,"column":5}},"47":{"start":{"line":134,"column":8},"end":{"line":134,"column":15}},"48":{"start":{"line":136,"column":4},"end":{"line":140,"column":6}},"49":{"start":{"line":141,"column":4},"end":{"line":141,"column":49}},"50":{"start":{"line":142,"column":4},"end":{"line":142,"column":41}},"51":{"start":{"line":144,"column":4},"end":{"line":150,"column":5}},"52":{"start":{"line":145,"column":8},"end":{"line":145,"column":65}},"53":{"start":{"line":146,"column":8},"end":{"line":146,"column":73}},"54":{"start":{"line":149,"column":8},"end":{"line":149,"column":39}},"55":{"start":{"line":151,"column":4},"end":{"line":151,"column":60}},"56":{"start":{"line":159,"column":20},"end":{"line":159,"column":43}},"57":{"start":{"line":161,"column":25},"end":{"line":161,"column":71}},"58":{"start":{"line":162,"column":4},"end":{"line":162,"column":32}},"59":{"start":{"line":163,"column":4},"end":{"line":173,"column":5}},"60":{"start":{"line":164,"column":24},"end":{"line":164,"column":70}},"61":{"start":{"line":165,"column":8},"end":{"line":165,"column":39}},"62":{"start":{"line":168,"column":8},"end":{"line":168,"column":69}},"63":{"start":{"line":169,"column":8},"end":{"line":169,"column":25}},"64":{"start":{"line":172,"column":8},"end":{"line":172,"column":37}},"65":{"start":{"line":181,"column":20},"end":{"line":181,"column":45}},"66":{"start":{"line":182,"column":4},"end":{"line":182,"column":69}},"67":{"start":{"line":190,"column":32},"end":{"line":190,"column":39}},"68":{"start":{"line":191,"column":20},"end":{"line":191,"column":38}},"69":{"start":{"line":192,"column":20},"end":{"line":192,"column":55}},"70":{"start":{"line":193,"column":18},"end":{"line":193,"column":55}},"71":{"start":{"line":194,"column":20},"end":{"line":194,"column":37}},"72":{"start":{"line":196,"column":4},"end":{"line":208,"column":5}},"73":{"start":{"line":198,"column":8},"end":{"line":207,"column":9}},"74":{"start":{"line":199,"column":12},"end":{"line":199,"column":50}},"75":{"start":{"line":203,"column":32},"end":{"line":203,"column":104}},"76":{"start":{"line":204,"column":12},"end":{"line":206,"column":13}},"77":{"start":{"line":205,"column":16},"end":{"line":205,"column":29}},"78":{"start":{"line":209,"column":4},"end":{"line":212,"column":5}},"79":{"start":{"line":211,"column":8},"end":{"line":211,"column":55}},"80":{"start":{"line":213,"column":29},"end":{"line":213,"column":79}},"81":{"start":{"line":214,"column":4},"end":{"line":216,"column":5}},"82":{"start":{"line":215,"column":8},"end":{"line":215,"column":37}},"83":{"start":{"line":219,"column":27},"end":{"line":219,"column":36}},"84":{"start":{"line":220,"column":4},"end":{"line":221,"column":21}},"85":{"start":{"line":222,"column":4},"end":{"line":249,"column":5}},"86":{"start":{"line":223,"column":8},"end":{"line":223,"column":50}},"87":{"start":{"line":224,"column":8},"end":{"line":224,"column":20}},"88":{"start":{"line":227,"column":8},"end":{"line":236,"column":9}},"89":{"start":{"line":228,"column":12},"end":{"line":228,"column":88}},"90":{"start":{"line":229,"column":12},"end":{"line":229,"column":37}},"91":{"start":{"line":232,"column":12},"end":{"line":234,"column":29}},"92":{"start":{"line":235,"column":12},"end":{"line":235,"column":37}},"93":{"start":{"line":237,"column":8},"end":{"line":247,"column":11}},"94":{"start":{"line":238,"column":12},"end":{"line":245,"column":15}},"95":{"start":{"line":246,"column":12},"end":{"line":246,"column":43}},"96":{"start":{"line":248,"column":8},"end":{"line":248,"column":21}},"97":{"start":{"line":256,"column":38},"end":{"line":256,"column":45}},"98":{"start":{"line":257,"column":20},"end":{"line":257,"column":38}},"99":{"start":{"line":258,"column":20},"end":{"line":258,"column":55}},"100":{"start":{"line":259,"column":18},"end":{"line":259,"column":55}},"101":{"start":{"line":260,"column":4},"end":{"line":262,"column":5}},"102":{"start":{"line":261,"column":8},"end":{"line":261,"column":55}},"103":{"start":{"line":264,"column":4},"end":{"line":264,"column":82}},"104":{"start":{"line":265,"column":4},"end":{"line":266,"column":21}},"105":{"start":{"line":267,"column":4},"end":{"line":267,"column":42}},"106":{"start":{"line":268,"column":4},"end":{"line":268,"column":29}}},"fnMap":{"0":{"name":"resetContracts","decl":{"start":{"line":15,"column":16},"end":{"line":15,"column":30}},"loc":{"start":{"line":15,"column":33},"end":{"line":17,"column":1}},"line":15},"1":{"name":"addContract","decl":{"start":{"line":25,"column":22},"end":{"line":25,"column":33}},"loc":{"start":{"line":25,"column":58},"end":{"line":41,"column":1}},"line":25},"2":{"name":"getAdapter","decl":{"start":{"line":46,"column":16},"end":{"line":46,"column":26}},"loc":{"start":{"line":46,"column":40},"end":{"line":52,"column":1}},"line":46},"3":{"name":"(anonymous_3)","decl":{"start":{"line":54,"column":4},"end":{"line":54,"column":5}},"loc":{"start":{"line":54,"column":33},"end":{"line":57,"column":5}},"line":54},"4":{"name":"(anonymous_4)","decl":{"start":{"line":58,"column":4},"end":{"line":58,"column":5}},"loc":{"start":{"line":58,"column":26},"end":{"line":60,"column":5}},"line":58},"5":{"name":"(anonymous_5)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":23},"end":{"line":65,"column":5}},"line":61},"6":{"name":"(anonymous_6)","decl":{"start":{"line":66,"column":4},"end":{"line":66,"column":5}},"loc":{"start":{"line":66,"column":27},"end":{"line":68,"column":5}},"line":66},"7":{"name":"(anonymous_7)","decl":{"start":{"line":69,"column":4},"end":{"line":69,"column":5}},"loc":{"start":{"line":69,"column":24},"end":{"line":71,"column":5}},"line":69},"8":{"name":"(anonymous_8)","decl":{"start":{"line":72,"column":4},"end":{"line":72,"column":5}},"loc":{"start":{"line":72,"column":25},"end":{"line":74,"column":5}},"line":72},"9":{"name":"(anonymous_9)","decl":{"start":{"line":75,"column":4},"end":{"line":75,"column":5}},"loc":{"start":{"line":75,"column":26},"end":{"line":78,"column":5}},"line":75},"10":{"name":"(anonymous_10)","decl":{"start":{"line":81,"column":4},"end":{"line":81,"column":5}},"loc":{"start":{"line":81,"column":33},"end":{"line":84,"column":5}},"line":81},"11":{"name":"(anonymous_11)","decl":{"start":{"line":85,"column":4},"end":{"line":85,"column":5}},"loc":{"start":{"line":85,"column":26},"end":{"line":87,"column":5}},"line":85},"12":{"name":"(anonymous_12)","decl":{"start":{"line":88,"column":4},"end":{"line":88,"column":5}},"loc":{"start":{"line":88,"column":29},"end":{"line":96,"column":5}},"line":88},"13":{"name":"(anonymous_13)","decl":{"start":{"line":95,"column":18},"end":{"line":95,"column":19}},"loc":{"start":{"line":95,"column":25},"end":{"line":95,"column":45}},"line":95},"14":{"name":"(anonymous_14)","decl":{"start":{"line":97,"column":4},"end":{"line":97,"column":5}},"loc":{"start":{"line":97,"column":33},"end":{"line":105,"column":5}},"line":97},"15":{"name":"(anonymous_15)","decl":{"start":{"line":104,"column":18},"end":{"line":104,"column":19}},"loc":{"start":{"line":104,"column":25},"end":{"line":104,"column":34}},"line":104},"16":{"name":"(anonymous_16)","decl":{"start":{"line":106,"column":4},"end":{"line":106,"column":5}},"loc":{"start":{"line":106,"column":30},"end":{"line":111,"column":5}},"line":106},"17":{"name":"(anonymous_17)","decl":{"start":{"line":112,"column":4},"end":{"line":112,"column":5}},"loc":{"start":{"line":112,"column":31},"end":{"line":120,"column":5}},"line":112},"18":{"name":"addCoinState","decl":{"start":{"line":122,"column":16},"end":{"line":122,"column":28}},"loc":{"start":{"line":122,"column":44},"end":{"line":128,"column":1}},"line":122},"19":{"name":"addToken","decl":{"start":{"line":129,"column":22},"end":{"line":129,"column":30}},"loc":{"start":{"line":129,"column":47},"end":{"line":152,"column":1}},"line":129},"20":{"name":"refreshBalance","decl":{"start":{"line":158,"column":22},"end":{"line":158,"column":36}},"loc":{"start":{"line":158,"column":59},"end":{"line":174,"column":1}},"line":158},"21":{"name":"allowance","decl":{"start":{"line":180,"column":22},"end":{"line":180,"column":31}},"loc":{"start":{"line":180,"column":50},"end":{"line":183,"column":1}},"line":180},"22":{"name":"approve","decl":{"start":{"line":189,"column":22},"end":{"line":189,"column":29}},"loc":{"start":{"line":189,"column":48},"end":{"line":250,"column":1}},"line":189},"23":{"name":"(anonymous_23)","decl":{"start":{"line":237,"column":25},"end":{"line":237,"column":26}},"loc":{"start":{"line":237,"column":36},"end":{"line":247,"column":9}},"line":237},"24":{"name":"transfer","decl":{"start":{"line":255,"column":22},"end":{"line":255,"column":30}},"loc":{"start":{"line":255,"column":49},"end":{"line":269,"column":1}},"line":255}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":4},"end":{"line":39,"column":5}},"type":"switch","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":18}},{"start":{"line":31,"column":8},"end":{"line":33,"column":18}},{"start":{"line":34,"column":8},"end":{"line":36,"column":18}},{"start":{"line":37,"column":8},"end":{"line":38,"column":62}}],"line":27},"1":{"loc":{"start":{"line":48,"column":4},"end":{"line":50,"column":5}},"type":"if","locations":[{"start":{"line":48,"column":4},"end":{"line":50,"column":5}},{"start":{"line":48,"column":4},"end":{"line":50,"column":5}}],"line":48},"2":{"loc":{"start":{"line":133,"column":4},"end":{"line":135,"column":5}},"type":"if","locations":[{"start":{"line":133,"column":4},"end":{"line":135,"column":5}},{"start":{"line":133,"column":4},"end":{"line":135,"column":5}}],"line":133},"3":{"loc":{"start":{"line":196,"column":4},"end":{"line":208,"column":5}},"type":"if","locations":[{"start":{"line":196,"column":4},"end":{"line":208,"column":5}},{"start":{"line":196,"column":4},"end":{"line":208,"column":5}}],"line":196},"4":{"loc":{"start":{"line":198,"column":8},"end":{"line":207,"column":9}},"type":"if","locations":[{"start":{"line":198,"column":8},"end":{"line":207,"column":9}},{"start":{"line":198,"column":8},"end":{"line":207,"column":9}}],"line":198},"5":{"loc":{"start":{"line":204,"column":12},"end":{"line":206,"column":13}},"type":"if","locations":[{"start":{"line":204,"column":12},"end":{"line":206,"column":13}},{"start":{"line":204,"column":12},"end":{"line":206,"column":13}}],"line":204},"6":{"loc":{"start":{"line":209,"column":4},"end":{"line":212,"column":5}},"type":"if","locations":[{"start":{"line":209,"column":4},"end":{"line":212,"column":5}},{"start":{"line":209,"column":4},"end":{"line":212,"column":5}}],"line":209},"7":{"loc":{"start":{"line":214,"column":4},"end":{"line":216,"column":5}},"type":"if","locations":[{"start":{"line":214,"column":4},"end":{"line":216,"column":5}},{"start":{"line":214,"column":4},"end":{"line":216,"column":5}}],"line":214},"8":{"loc":{"start":{"line":227,"column":8},"end":{"line":236,"column":9}},"type":"if","locations":[{"start":{"line":227,"column":8},"end":{"line":236,"column":9}},{"start":{"line":227,"column":8},"end":{"line":236,"column":9}}],"line":227},"9":{"loc":{"start":{"line":260,"column":4},"end":{"line":262,"column":5}},"type":"if","locations":[{"start":{"line":260,"column":4},"end":{"line":262,"column":5}},{"start":{"line":260,"column":4},"end":{"line":262,"column":5}}],"line":260}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"b":{"0":[0,0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/tokens.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/plasma/tokens.ts"],"names":[],"mappings":"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","sourcesContent":["import { Address } from \"loom-js\"\nimport { Coin, EthCoin } from \"loom-js/dist/contracts\"\nimport { ERC20 } from \"./web3-contracts/ERC20\"\nimport {\n  PlasmaContext,\n  TransferRequest,\n  PlasmaTokenKind,\n  PlasmaState,\n} from \"./types\"\nimport { plasmaModule } from \".\"\nimport BN from \"bn.js\"\nimport ERC20ABI from \"loom-js/dist/mainnet-contracts/ERC20.json\"\nimport debug from \"debug\"\nimport { setNewTokenToLocalStorage, ZERO } from \"@/utils\"\nimport { tokenService, TokenData } from \"@/services/TokenService\"\nimport { feedbackModule } from \"@/feedback/store\"\nimport { i18n } from \"@/i18n\"\nimport { formatTokenAmount } from \"@/filters\"\nimport * as Sentry from \"@sentry/browser\"\nconst log = debug(\"plasma\")\n\nexport const contracts = new Map<string, ContractAdapter>()\n\nexport function resetContracts() {\n  contracts.clear()\n}\n\n/**\n *\n * @param symbol\n * @param kind\n * @param contract one of Coin | EthCoin | ERC20.\n * Not that these must correspond to the token kind passed in `kind` argument\n */\nexport async function addContract(\n  symbol: string,\n  kind: PlasmaTokenKind,\n  contract: Coin | EthCoin | ERC20,\n) {\n  let adapter: ContractAdapter\n  switch (kind) {\n    case PlasmaTokenKind.LOOMCOIN:\n      adapter = new CoinAdapter(symbol, contract as Coin)\n      break\n    case PlasmaTokenKind.ETH:\n      adapter = new CoinAdapter(symbol, contract as EthCoin)\n      break\n    case PlasmaTokenKind.ERC20:\n      adapter = new ERC20Adapter(symbol, contract as ERC20)\n      break\n    default:\n      throw new Error(\"Unsupported token kind \" + kind)\n  }\n  contracts.set(symbol, adapter)\n}\n\n/**\n * returns the corresponding adapter. Throws if not found\n * @param tokenSymbol\n */\nexport function getAdapter(tokenSymbol: string): ContractAdapter {\n  const adapter = contracts.get(tokenSymbol)\n  if (adapter === undefined) {\n    throw new Error(\"Unknow token \" + tokenSymbol)\n  }\n  return adapter\n}\n\nexport interface ContractAdapter {\n  readonly contractAddress\n  allowance(account: string, spender: string): Promise<BN>\n  balanceOf(account: string): Promise<BN>\n  // coin and eth coin return void, erc20 returns a transaction so keep it any here\n  approve(spender: string, amount: BN): Promise<any>\n  // coin and eth coin return void, erc20 returns a transaction so keep it any here\n  transfer(to: string, amount: BN): Promise<any>\n}\n\nexport class CoinAdapter implements ContractAdapter {\n  get contractAddress() {\n    return this.contract.address.local.toString().toLocaleLowerCase()\n  }\n  constructor(readonly token: string, public contract: Coin) { }\n\n  balanceOf(account: string) {\n    const chainId = this.contract.address.chainId\n    const address = Address.fromString(chainId + \":\" + account)\n    return this.contract.getBalanceOfAsync(address)\n  }\n  allowance(account: string, to: string) {\n    return this.contract.getAllowanceAsync(\n      this.toAddress(account),\n      this.toAddress(to),\n    )\n  }\n  approve(to: string, amount: BN) {\n    return this.contract.approveAsync(this.toAddress(to), amount)\n  }\n  transfer(to: string, amount: BN) {\n    return this.contract.transferAsync(this.toAddress(to), amount)\n  }\n\n  private toAddress(strAddress: string) {\n    const chainId = this.contract.address.chainId\n    return Address.fromString(chainId + \":\" + strAddress)\n  }\n}\n\nclass ERC20Adapter implements ContractAdapter {\n  constructor(readonly token: string, public contract: ERC20) { }\n  get contractAddress() {\n    return this.contract.address.toLocaleLowerCase()\n  }\n  async balanceOf(account: string) {\n    const caller = await plasmaModule.getCallerAddress()\n    return this.contract.methods\n      .balanceOf(account)\n      .call({\n        from: caller.local.toString(),\n      })\n      .then((v) => new BN(v.toString()))\n  }\n  async allowance(account: string, to: string) {\n    const caller = await plasmaModule.getCallerAddress()\n    return this.contract.methods\n      .allowance(account, to)\n      .call({\n        from: caller.local.toString(),\n      })\n      .then((v) => new BN(v))\n  }\n  async approve(to: string, amount: BN) {\n    const caller = await plasmaModule.getCallerAddress()\n    return this.contract.methods\n      .approve(to, amount.toString())\n      .send({ from: caller.local.toString() })\n  }\n  async transfer(to: string, amount: BN) {\n    const caller = await plasmaModule.getCallerAddress()\n    const result = await this.contract.methods\n      .transfer(to, amount.toString())\n      .send({ from: caller.local.toString() })\n    console.log(\"transferred.\")\n    console.log(\"transferred result\", result)\n    return result\n  }\n}\n\nexport function addCoinState(state: PlasmaState, symbol: string) {\n  state.coins[symbol] = {\n    decimals: 18,\n    balance: ZERO,\n    loading: true,\n  }\n}\n\nexport async function addToken(context: PlasmaContext, token: TokenData) {\n  const state = context.state\n  const web3 = state.web3!\n  // const network = state.networkId // 'us1'\n  if (token.symbol in state.coins) {\n    return\n  }\n  state.coins[token.symbol] = {\n    decimals: token.decimals,\n    balance: new BN(\"0\"),\n    loading: true,\n  }\n  state.coins = Object.assign({}, state.coins)\n  log(\"add token state \", state.coins)\n  let contract\n  try {\n    contract = new web3.eth.Contract(ERC20ABI, token.plasma) as ERC20\n    await addContract(token.symbol, PlasmaTokenKind.ERC20, contract)\n  } catch (error) {\n    console.error(\"error \", error)\n  }\n  setNewTokenToLocalStorage(token, context.rootState.env)\n}\n\n/**\n * deposit from ethereum account to gateway\n * @param symbol\n * @param tokenAmount\n */\nexport async function refreshBalance(\n  context: PlasmaContext,\n  tokenSymbol: string,\n) {\n  const adapter = getAdapter(tokenSymbol)\n  // caution make sure balanceState is always set befor calling refreshBalance\n  const balanceState = context.state.coins[tokenSymbol.toUpperCase()]\n  balanceState.loading = true\n  try {\n    const balance = await adapter.balanceOf(context.state.address)\n    balanceState.balance = balance\n  } catch (e) {\n    console.error(\"Could not refresh balance of \" + tokenSymbol)\n    console.error(e)\n  } finally {\n    balanceState.loading = false\n  }\n}\n\n/**\n * does not change the state...\n * @param context\n * @param payload\n */\nexport async function allowance(\n  context: PlasmaContext,\n  payload: { token: string; spender: string },\n) {\n  const adapter = getAdapter(payload.token)\n  return adapter.allowance(context.state.address, payload.spender)\n}\n\n/**\n * withdraw from plasma account to gateway\n * @param symbol\n * @param tokenAmount\n */\nexport async function approve(\n  context: PlasmaContext,\n  payload: TransferRequest,\n): Promise<boolean> {\n  const { symbol, to, fee } = payload\n  const adapter = getAdapter(symbol)\n  const balance = context.state.coins[symbol].balance\n  const token = tokenService.getTokenbySymbol(symbol)\n  let weiAmount = payload.weiAmount\n\n  // If the transfer requires a fee, approve that also\n  if (fee !== undefined) {\n    // Same token do one approval\n    if (fee.token === symbol) {\n      weiAmount = weiAmount.add(fee.amount)\n    } else {\n      // Approve fee token first\n      const feeApproved = await approve(context, { symbol: fee.token, weiAmount: fee.amount, to })\n      if (!feeApproved) {\n        return false\n      }\n    }\n  }\n\n  if (weiAmount.gt(balance)) {\n    // TODO: fix error message\n    throw new Error(\"plasma.approval.balance.low\")\n  }\n  const currentAllowance = await adapter.allowance(context.state.address, to)\n  if (currentAllowance.gte(weiAmount)) {\n    return Promise.resolve(true)\n  }\n  // this somehow breaks on some accounts (for dpos), as if currentAllowance is wrong\n  // const approvalAmount = weiAmount.sub(currentAllowance)\n  const approvalAmount = weiAmount\n  feedbackModule.setStep(\n    i18n.t(\"feedback_msg.step.approving_spending\",\n  { tokenAmount: formatTokenAmount(approvalAmount, token.decimals), symbol: payload.symbol})\n  .toString())\n  try {\n    await adapter.approve(to, approvalAmount)\n    return true\n  } catch (error) {\n    if (error.message.includes(\"User denied message\")) {\n      feedbackModule.showError(i18n.t(\"messages.user_denied_sign_tx\").toString())\n      feedbackModule.endTask()\n    } else {\n      feedbackModule.showError(\n        i18n\n          .t(\"messages.transaction_apprv_err_tx\", { msg: error.message })\n          .toString(),\n      )\n      feedbackModule.endTask()\n    }\n    Sentry.withScope((scope) => {\n      scope.setExtra(\"approve\", {\n        approval: JSON.stringify({\n          symbol,\n          to,\n          fee,\n          approvalAmount,\n        }),\n      })\n      Sentry.captureException(error)\n    })\n    return false\n  }\n}\n\n/**\n * withdraw from gateway to ethereum account\n * @param symbol\n */\nexport async function transfer(\n  context: PlasmaContext,\n  payload: TransferRequest,\n) {\n  const { symbol, weiAmount, to } = payload\n  const adapter = getAdapter(symbol)\n  const balance = context.state.coins[symbol].balance\n  const token = tokenService.getTokenbySymbol(symbol)\n  if (weiAmount.gt(balance)) {\n    throw new Error(\"plasma.transfer.balance.low\")\n  }\n\n  // plasmaModule.refreshBalance(payload.symbol)\n  feedbackModule.setTask(i18n.t(\"feedback_msg.task.transfer_token\").toString())\n  feedbackModule.setStep(\n    i18n.t(\"feedback_msg.step.transfering_token\",\n  { tokenAmount: formatTokenAmount(weiAmount, token.decimals), symbol: payload.symbol})\n  .toString())\n  await adapter.transfer(to, weiAmount)\n  feedbackModule.endTask()\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"a20769dd681f7056a90889931ae6ddac43e95e51"},"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/index.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/index.ts","statementMap":{"0":{"start":{"line":14,"column":12},"end":{"line":14,"column":32}},"1":{"start":{"line":16,"column":21},"end":{"line":49,"column":1}},"2":{"start":{"line":50,"column":16},"end":{"line":50,"column":64}},"3":{"start":{"line":51,"column":20},"end":{"line":51,"column":35}},"4":{"start":{"line":52,"column":28},"end":{"line":71,"column":1}},"5":{"start":{"line":54,"column":8},"end":{"line":54,"column":29}},"6":{"start":{"line":73,"column":4},"end":{"line":73,"column":26}},"7":{"start":{"line":74,"column":4},"end":{"line":74,"column":33}},"8":{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},"9":{"start":{"line":76,"column":8},"end":{"line":76,"column":55}},"10":{"start":{"line":78,"column":4},"end":{"line":81,"column":7}},"11":{"start":{"line":82,"column":4},"end":{"line":82,"column":122}},"12":{"start":{"line":86,"column":20},"end":{"line":86,"column":33}},"13":{"start":{"line":87,"column":4},"end":{"line":87,"column":75}},"14":{"start":{"line":90,"column":31},"end":{"line":90,"column":71}},"15":{"start":{"line":91,"column":4},"end":{"line":91,"column":51}},"16":{"start":{"line":99,"column":4},"end":{"line":100,"column":20}},"17":{"start":{"line":100,"column":8},"end":{"line":100,"column":20}},"18":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"19":{"start":{"line":102,"column":8},"end":{"line":102,"column":36}},"20":{"start":{"line":104,"column":4},"end":{"line":104,"column":17}},"21":{"start":{"line":114,"column":32},"end":{"line":114,"column":34}},"22":{"start":{"line":115,"column":19},"end":{"line":115,"column":35}},"23":{"start":{"line":116,"column":4},"end":{"line":116,"column":32}},"24":{"start":{"line":117,"column":4},"end":{"line":117,"column":30}},"25":{"start":{"line":119,"column":4},"end":{"line":129,"column":5}},"26":{"start":{"line":121,"column":8},"end":{"line":121,"column":43}},"27":{"start":{"line":122,"column":8},"end":{"line":122,"column":128}},"28":{"start":{"line":126,"column":8},"end":{"line":126,"column":89}},"29":{"start":{"line":127,"column":8},"end":{"line":127,"column":55}},"30":{"start":{"line":128,"column":8},"end":{"line":128,"column":33}},"31":{"start":{"line":138,"column":18},"end":{"line":138,"column":27}},"32":{"start":{"line":140,"column":18},"end":{"line":140,"column":38}},"33":{"start":{"line":141,"column":4},"end":{"line":150,"column":5}},"34":{"start":{"line":142,"column":8},"end":{"line":142,"column":49}},"35":{"start":{"line":143,"column":8},"end":{"line":143,"column":37}},"36":{"start":{"line":145,"column":9},"end":{"line":150,"column":5}},"37":{"start":{"line":146,"column":8},"end":{"line":146,"column":31}},"38":{"start":{"line":149,"column":8},"end":{"line":149,"column":37}},"39":{"start":{"line":151,"column":4},"end":{"line":151,"column":54}},"40":{"start":{"line":154,"column":32},"end":{"line":154,"column":87}},"41":{"start":{"line":155,"column":26},"end":{"line":155,"column":84}},"42":{"start":{"line":156,"column":4},"end":{"line":156,"column":25}},"43":{"start":{"line":166,"column":20},"end":{"line":166,"column":51}},"44":{"start":{"line":167,"column":23},"end":{"line":167,"column":88}},"45":{"start":{"line":169,"column":4},"end":{"line":184,"column":5}},"46":{"start":{"line":170,"column":25},"end":{"line":170,"column":52}},"47":{"start":{"line":171,"column":8},"end":{"line":180,"column":11}},"48":{"start":{"line":172,"column":30},"end":{"line":172,"column":65}},"49":{"start":{"line":174,"column":12},"end":{"line":179,"column":14}},"50":{"start":{"line":183,"column":8},"end":{"line":183,"column":68}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":16},"end":{"line":55,"column":5}},"line":53},"1":{"name":"setConfig","decl":{"start":{"line":72,"column":9},"end":{"line":72,"column":18}},"loc":{"start":{"line":72,"column":34},"end":{"line":83,"column":1}},"line":72},"2":{"name":"getAddress","decl":{"start":{"line":85,"column":9},"end":{"line":85,"column":19}},"loc":{"start":{"line":85,"column":27},"end":{"line":88,"column":1}},"line":85},"3":{"name":"createClient","decl":{"start":{"line":89,"column":9},"end":{"line":89,"column":21}},"loc":{"start":{"line":89,"column":27},"end":{"line":92,"column":1}},"line":89},"4":{"name":"signerIsSet","decl":{"start":{"line":98,"column":9},"end":{"line":98,"column":20}},"loc":{"start":{"line":98,"column":29},"end":{"line":105,"column":1}},"line":98},"5":{"name":"changeIdentity","decl":{"start":{"line":113,"column":15},"end":{"line":113,"column":29}},"loc":{"start":{"line":113,"column":39},"end":{"line":130,"column":1}},"line":113},"6":{"name":"getCallerAddress","decl":{"start":{"line":137,"column":15},"end":{"line":137,"column":31}},"loc":{"start":{"line":137,"column":37},"end":{"line":152,"column":1}},"line":137},"7":{"name":"getPublicAddressFromPrivateKeyUint8Array","decl":{"start":{"line":153,"column":9},"end":{"line":153,"column":49}},"loc":{"start":{"line":153,"column":68},"end":{"line":157,"column":1}},"line":153},"8":{"name":"refreshHistory","decl":{"start":{"line":162,"column":15},"end":{"line":162,"column":29}},"loc":{"start":{"line":162,"column":39},"end":{"line":203,"column":1}},"line":162},"9":{"name":"(anonymous_9)","decl":{"start":{"line":172,"column":20},"end":{"line":172,"column":21}},"loc":{"start":{"line":172,"column":30},"end":{"line":172,"column":65}},"line":172},"10":{"name":"(anonymous_10)","decl":{"start":{"line":173,"column":17},"end":{"line":173,"column":18}},"loc":{"start":{"line":173,"column":27},"end":{"line":180,"column":9}},"line":173}},"branchMap":{"0":{"loc":{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},{"start":{"line":75,"column":4},"end":{"line":77,"column":5}}],"line":75},"1":{"loc":{"start":{"line":99,"column":4},"end":{"line":100,"column":20}},"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":100,"column":20}},{"start":{"line":99,"column":4},"end":{"line":100,"column":20}}],"line":99},"2":{"loc":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},{"start":{"line":101,"column":4},"end":{"line":103,"column":5}}],"line":101},"3":{"loc":{"start":{"line":119,"column":4},"end":{"line":129,"column":5}},"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":129,"column":5}},{"start":{"line":119,"column":4},"end":{"line":129,"column":5}}],"line":119},"4":{"loc":{"start":{"line":141,"column":4},"end":{"line":150,"column":5}},"type":"if","locations":[{"start":{"line":141,"column":4},"end":{"line":150,"column":5}},{"start":{"line":141,"column":4},"end":{"line":150,"column":5}}],"line":141},"5":{"loc":{"start":{"line":145,"column":9},"end":{"line":150,"column":5}},"type":"if","locations":[{"start":{"line":145,"column":9},"end":{"line":150,"column":5}},{"start":{"line":145,"column":9},"end":{"line":150,"column":5}}],"line":145},"6":{"loc":{"start":{"line":171,"column":33},"end":{"line":171,"column":56}},"type":"binary-expr","locations":[{"start":{"line":171,"column":33},"end":{"line":171,"column":50}},{"start":{"line":171,"column":54},"end":{"line":171,"column":56}}],"line":171},"7":{"loc":{"start":{"line":176,"column":31},"end":{"line":176,"column":55}},"type":"binary-expr","locations":[{"start":{"line":176,"column":31},"end":{"line":176,"column":48}},{"start":{"line":176,"column":52},"end":{"line":176,"column":55}}],"line":176}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/index.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/plasma/index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @module dpos-dashboard.plasma\n */\n\nimport { getStoreBuilder } from \"vuex-typex\"\n\nimport { PlasmaState, PlasmaConfig } from \"./types\"\nimport BN from \"bn.js\"\nimport { PlasmaSigner, HasPlasmaState, PlasmaContext } from \"./types\"\nimport { Client, Address, LocalAddress, CryptoUtils } from \"loom-js\"\n\nimport * as mutations from \"./mutations\"\nimport { i18n } from \"@/i18n\"\n\nimport {\n  setupProtocolsFromEndpoint,\n  createDefaultTxMiddleware,\n} from \"loom-js/dist/helpers\"\n\n// assets (make this a sepoerate module)\n\nimport debug from \"debug\"\n\nimport * as Tokens from \"./tokens\"\nimport { feedbackModule } from \"@/feedback/store\"\nimport Axios from \"axios\"\nimport { tokenService } from \"@/services/TokenService\"\n\nconst log = debug(\"dash.plasma\")\n\n// web3 instance to use to interact with plasma contracts\n\nconst initialState: PlasmaState = {\n  networkId: \"\",\n  chainId: \"\",\n  endpoint: \"\",\n  historyUrl: \"\",\n  // todo move these out of the state\n  client: null, // createClient(configs.us1),\n  web3: null,\n  provider: null,\n  ethersProvider: null,\n  signer: null,\n  address: \"\",\n  appId: {\n    private:\n      \"nGaUFwXTBjtGcwVanY4UjjzMVJtb0jCUMiz8vAVs8QB+d4Kv6+4TB86dbJ9S4ghZzzgc6hhHvhnH5pdXqLX4CQ==\",\n    public: \"\",\n    address: \"0xcfa12adc558ea05d141687b8addc5e7d9ee1edcf\",\n  },\n  coins: {\n    LOOM: {\n      balance: new BN(\"0\"),\n      loading: false,\n      decimals: 18,\n    },\n    ETH: {\n      balance: new BN(\"0\"),\n      loading: false,\n      decimals: 18,\n    },\n    // BNB: {\n    //   balance: new BN(\"0\"),\n    //   loading: false,\n    //   decimals: 8,\n    // },\n  },\n  selectedToken: \"\",\n  blockExplorer: \"\",\n  loomGamesEndpoint: \"\",\n  history: [],\n}\nconst builder = getStoreBuilder<HasPlasmaState>().module(\"plasma\", initialState)\nconst stateGetter = builder.state()\n\nexport const plasmaModule = {\n  get state() {\n    return stateGetter()\n  },\n\n  setConfig: builder.commit(setConfig),\n\n  getAddress: builder.read(getAddress),\n\n  changeIdentity: builder.dispatch(changeIdentity),\n  getCallerAddress: builder.dispatch(getCallerAddress),\n  signerIsSet: builder.dispatch(signerIsSet),\n\n  // Coins\n  addToken: builder.dispatch(Tokens.addToken),\n  refreshBalance: builder.dispatch(Tokens.refreshBalance),\n  allowance: builder.dispatch(Tokens.allowance),\n  approve: builder.dispatch(Tokens.approve),\n  transfer: builder.dispatch(Tokens.transfer),\n\n  refreshHistory: builder.dispatch(refreshHistory),\n\n  addCoinState: builder.commit(Tokens.addCoinState),\n\n  // Assets\n  getPublicAddrePriaKeyUint8Array: builder.dispatch(\n    getPublicAddressFromPrivateKeyUint8Array,\n  ),\n}\n\nfunction setConfig(state: PlasmaState, config: PlasmaConfig) {\n  log(\"config\", config)\n  Object.assign(state, config)\n  if (state.client) {\n    state.client.removeAllListeners().disconnect()\n  }\n  state.client = createClient({\n    chainId: state.chainId,\n    endpoint: state.endpoint,\n  })\n  state.client.txMiddleware = createDefaultTxMiddleware(\n    state.client,\n    CryptoUtils.B64ToUint8Array(state.appId.private),\n  )\n}\n\n// getter\nfunction getAddress(state: PlasmaState): Address {\n  const chainId = state.chainId\n  return new Address(chainId, LocalAddress.fromHexString(state.address))\n}\n\nfunction createClient(env: { chainId: string; endpoint: string }) {\n  const { writer, reader } = setupProtocolsFromEndpoint(env.endpoint)\n  return new Client(env.chainId, writer, reader)\n}\n\n/**\n * checks if signer is set, if not  show an alert to tell the user they should\n * connect their wallet first\n * @returns true if signer is set false otherwise\n */\nfunction signerIsSet(contex: PlasmaContext) {\n  if (contex.state.signer !== null) return true\n  if (window.confirm(\"You need to connect your wallet first. Connect now?\")) {\n    window.location.assign(\"/\")\n  }\n  return false\n}\n\n/**\n * On identity change set signer\n * configure client with signer middleware\n * reinitialise loom provider and web3 for contracts\n * @param ctx\n * @param id\n */\nasync function changeIdentity(\n  ctx: PlasmaContext,\n  id: { signer: PlasmaSigner | null; address: string },\n) {\n  const { signer, address } = id\n  const client = ctx.state.client!\n  ctx.state.address = address\n  ctx.state.signer = signer\n\n  // add the conresponding middleware\n  if (signer === null) {\n    // reset client middleware\n    ctx.state.client!.txMiddleware = []\n    ctx.state.client!.txMiddleware = createDefaultTxMiddleware(\n      client,\n      CryptoUtils.B64ToUint8Array(ctx.state.appId.private),\n    )\n    // destroy loomProvider and old web3\n  } else {\n    feedbackModule.setStep(i18n.t(\"feedback_msg.step.connecting_plasma\").toString())\n    await signer.configureClient(ctx.state.client!)\n    feedbackModule.endTask()\n  }\n\n}\n\n/**\n * - if we have a signer use it's address (connected wallet case)\n * - if just address, use that (explorer case, readonly)\n * - otherwise use the generic address (readonly)\n * @param ctx\n */\nasync function getCallerAddress(ctx: PlasmaContext): Promise<Address> {\n  const state = ctx.state\n  let caller: string\n  let chainId: string = state.client!.chainId\n  if (state.signer) {\n    caller = await state.signer.getAddress()\n    chainId = state.signer.chain\n  } else if (state.address) {\n    caller = state.address\n  } else {\n    caller = state.appId.address\n  }\n  return Address.fromString(`${chainId}:${caller}`)\n}\n\nfunction getPublicAddressFromPrivateKeyUint8Array(\n  context: PlasmaContext,\n  payload: { privateKey: Uint8Array },\n) {\n  const publicKeyUint8Array = CryptoUtils.publicKeyFromPrivateKey(\n    payload.privateKey,\n  )\n  const publicAddress = LocalAddress.fromPublicKey(\n    publicKeyUint8Array,\n  ).toString()\n  return publicAddress\n}\n\n/**\n *\n * @param context\n */\nasync function refreshHistory(context: PlasmaContext) {\n  // FIXME indexer is called with the signers address (eth:)\n  // and does not return the sane data if called woth loom address\n  // so this won't work if we have no signer and only use the account's loom address\n  const address = await getCallerAddress(context)\n  const indexerUrl = context.state.historyUrl.replace(\"{address}\", address.toString())\n\n  // `${dappChainEventUrl}/eth:${currentMetamaskAddress}?sort=-block_height`,\n\n  try {\n    const response = await Axios.get(indexerUrl)\n    context.state.history = (response.data.txs || [])\n      .filter((item) => ! /^event\\:Mainnet/.test(item.topic))\n      .map((item) => {\n        return {\n          type: item.topic,\n          amount: new BN(item.token_amount || \"0\"),\n          token: \"LOOM\",\n          blockNumber: item.block_height,\n        }\n      })\n  } catch (e) {\n    console.error(\"Error loading plasma history. \" + e.message)\n  }\n\n  // example entry\n  // {\n  //   \"id\": 5640,\n  //   \"created_at\": \"2019-05-08T04:17:08Z\",\n  //   \"updated_at\": \"2019-05-08T04:17:30Z\",\n  //   \"block_height\": 4699351,\n  //   \"block_time\": 1557289028,\n  //   \"tx_hash\": \"\",\n  //   \"tx_index\": 0,\n  //   \"token_owner\": \"eth:0xff7c1A7d2878d2cc6E7C2b7eF8Dcb615F620184a\",\n  //   \"token_contract\": \"eth:0xA4E8C3eC456107ea67D3075bf9e3df3a75823Db0\",\n  //   \"token_kind\": 4,\n  //   \"token_amount_raw\": \"DeC2s6dkAAA=\",\n  //   \"token_amount\": \"1000000000000000000\",\n  //   \"signature\": null,\n  //   \"status\": 1,\n  //   \"topic\": \"event:MainnetWithdrawalEvent\"\n  // }\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"fcf8e83e6486c313b3811d123decc44d1092caf3"},"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/helpers.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/helpers.ts","statementMap":{"0":{"start":{"line":3,"column":4},"end":{"line":20,"column":6}},"1":{"start":{"line":23,"column":17},"end":{"line":23,"column":45}},"2":{"start":{"line":24,"column":22},"end":{"line":26,"column":40}},"3":{"start":{"line":26,"column":4},"end":{"line":26,"column":39}},"4":{"start":{"line":27,"column":32},"end":{"line":27,"column":49}},"5":{"start":{"line":29,"column":4},"end":{"line":32,"column":5}},"6":{"start":{"line":30,"column":27},"end":{"line":30,"column":63}},"7":{"start":{"line":31,"column":8},"end":{"line":31,"column":92}},"8":{"start":{"line":31,"column":49},"end":{"line":31,"column":90}},"9":{"start":{"line":33,"column":19},"end":{"line":33,"column":49}},"10":{"start":{"line":34,"column":20},"end":{"line":34,"column":54}},"11":{"start":{"line":35,"column":21},"end":{"line":35,"column":34}},"12":{"start":{"line":36,"column":4},"end":{"line":42,"column":7}}},"fnMap":{"0":{"name":"defaultState","decl":{"start":{"line":2,"column":16},"end":{"line":2,"column":28}},"loc":{"start":{"line":2,"column":31},"end":{"line":21,"column":1}},"line":2},"1":{"name":"fromIDelegation","decl":{"start":{"line":22,"column":16},"end":{"line":22,"column":31}},"loc":{"start":{"line":22,"column":47},"end":{"line":43,"column":1}},"line":22},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":38},"end":{"line":24,"column":39}},"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":39}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":31,"column":42},"end":{"line":31,"column":43}},"loc":{"start":{"line":31,"column":49},"end":{"line":31,"column":90}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":29,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":32,"column":5}},{"start":{"line":29,"column":4},"end":{"line":32,"column":5}}],"line":29}},"s":{"0":13,"1":6,"2":6,"3":5,"4":6,"5":6,"6":0,"7":0,"8":0,"9":6,"10":6,"11":6,"12":6},"f":{"0":13,"1":6,"2":5,"3":0},"b":{"0":[0,6]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/helpers.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/dpos/store/helpers.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,eAAe,EAAE,MAAM,8BAA8B,CAAA;AAI9D,MAAM,UAAU,YAAY;IAC1B,OAAO;QACL,cAAc,EAAE,EAAE;QAClB,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE;YACP,YAAY,EAAE,KAAK;YACnB,UAAU,EAAE,KAAK;YACjB,WAAW,EAAE,KAAK;YAClB,OAAO,EAAE,KAAK;SACf;QACD,YAAY,EAAE,IAAI,IAAI,EAAE;QACxB,UAAU,EAAE,EAAE;QACd,WAAW,EAAE,EAAE;QACf,OAAO,EAAE,EAAE;QAEX,MAAM,EAAE,EAAE;QACV,UAAU,EAAE,IAAI;QAChB,aAAa,EAAE,IAAI;QACnB,YAAY,EAAE,EAAE;KACjB,CAAA;AACH,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,CAAc,EAAE,UAAuB;IACrE,MAAM,IAAI,GAAG,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAA;IACzC,MAAM,SAAS,GAAG,UAAU,CAAC,IAAI,CAC/B,CAAC,CAAC,EAAE,EAAE;IACJ,iCAAiC;IACjC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CACrC,CAAA;IACF,MAAM,mBAAmB,GAAG,CAAC,CAAC,eAAe,CAAA;IAC7C,IAAI,eAAsC,CAAA;IAC1C,IAAI,mBAAmB,KAAK,SAAS,EAAE;QACrC,MAAM,UAAU,GAAG,mBAAmB,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAA;QACvD,eAAe,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,UAAU,CAAE,CAAA;KACrF;IACD,MAAM,MAAM,GAAG,CAAC,CAAC,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAA;IAC7C,MAAM,OAAO,GAAG,CAAC,CAAC,KAAK,KAAK,eAAe,CAAC,MAAM,CAAA;IAClD,MAAM,QAAQ,GAAG,CAAC,CAAC,KAAK,KAAK,CAAC,CAAA;IAE9B,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,EAAE;QAC1B,SAAS;QACT,eAAe;QACf,MAAM;QACN,OAAO;QACP,QAAQ;KACT,CAAe,CAAA;AAClB,CAAC","sourcesContent":["import { IDelegation } from \"loom-js/dist/contracts/dpos3\"\nimport { DelegationState } from \"loom-js/dist/proto/dposv3_pb\"\nimport { Validator, Delegation, DPOSState } from \"./types\"\nimport { ZERO } from \"@/utils\"\n\nexport function defaultState(): DPOSState {\n  return {\n    bootstrapNodes: [],\n    contract: null,\n    loading: {\n      electionTime: false,\n      validators: false,\n      delegations: false,\n      rewards: false,\n    },\n    electionTime: new Date(),\n    validators: [],\n    delegations: [],\n    rewards: [],\n\n    intent: \"\",\n    delegation: null,\n    analyticsData: null,\n    analyticsUrl: \"\",\n  }\n}\n\nexport function fromIDelegation(d: IDelegation, validators: Validator[]) {\n  const addr = d.validator.local.toString()\n  const validator = validators.find(\n    (v) =>\n      // loom-js local.equals is broken\n      v.address.local.toString() === addr,\n  )!\n  const updateValidatorAddr = d.updateValidator\n  let updateValidator: Validator | undefined\n  if (updateValidatorAddr !== undefined) {\n    const updateAddr = updateValidatorAddr.local.toString()\n    updateValidator = validators.find((v) => v.address.local.toString() === updateAddr)!\n  }\n  const locked = d.lockTime * 1000 > Date.now()\n  const pending = d.state !== DelegationState.BONDED\n  const isReward = d.index === 0\n\n  return Object.assign({}, d, {\n    validator,\n    updateValidator,\n    locked,\n    pending,\n    isReward,\n  }) as Delegation\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"51117cdd71e3269562ba0b4fa3b611984115a316"},"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/mutations.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/mutations.ts","statementMap":{"0":{"start":{"line":2,"column":4},"end":{"line":2,"column":77}},"1":{"start":{"line":2,"column":60},"end":{"line":2,"column":75}},"2":{"start":{"line":3,"column":4},"end":{"line":3,"column":45}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":38}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":39}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":34}}},"fnMap":{"0":{"name":"setConfig","decl":{"start":{"line":1,"column":16},"end":{"line":1,"column":25}},"loc":{"start":{"line":1,"column":41},"end":{"line":4,"column":1}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":2,"column":53},"end":{"line":2,"column":54}},"loc":{"start":{"line":2,"column":60},"end":{"line":2,"column":75}},"line":2},"2":{"name":"setElectionTime","decl":{"start":{"line":5,"column":16},"end":{"line":5,"column":31}},"loc":{"start":{"line":5,"column":53},"end":{"line":8,"column":1}},"line":5},"3":{"name":"setAnalyticsData","decl":{"start":{"line":9,"column":16},"end":{"line":9,"column":32}},"loc":{"start":{"line":9,"column":49},"end":{"line":11,"column":1}},"line":9}},"branchMap":{},"s":{"0":3,"1":6,"2":3,"3":2,"4":2,"5":0},"f":{"0":3,"1":6,"2":2,"3":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/mutations.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/dpos/store/mutations.ts"],"names":[],"mappings":"AAGA,MAAM,UAAU,SAAS,CAAC,KAAgB,EAAE,MAAkB;IAC5D,KAAK,CAAC,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAA;IACxE,KAAK,CAAC,YAAY,GAAG,MAAM,CAAC,YAAY,CAAA;AAC1C,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,KAAgB,EAAE,YAAkB;IAClE,KAAK,CAAC,YAAY,GAAG,YAAY,CAAA;IACjC,KAAK,CAAC,OAAO,CAAC,YAAY,GAAG,KAAK,CAAA;AACpC,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,KAAgB,EAAE,OAAW;IAC5D,KAAK,CAAC,aAAa,GAAG,OAAO,CAAA;AAC/B,CAAC","sourcesContent":["import { DPOSState, DPOSConfig } from \"./types\"\nimport BN from \"bn.js\"\n\nexport function setConfig(state: DPOSState, config: DPOSConfig) {\n  state.bootstrapNodes = config.bootstrapNodes.map((a) => a.toLowerCase())\n  state.analyticsUrl = config.analyticsUrl\n}\n\nexport function setElectionTime(state: DPOSState, electionTime: Date) {\n  state.electionTime = electionTime\n  state.loading.electionTime = false\n}\n\nexport function setAnalyticsData(state: DPOSState, payload: []) {\n  state.analyticsData = payload\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"f51ba0aa90e660afb9f093d77f071fa5391d53a2"},"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/types.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/types.ts","statementMap":{"0":{"start":{"line":14,"column":8},"end":{"line":14,"column":39}},"1":{"start":{"line":15,"column":8},"end":{"line":15,"column":30}},"2":{"start":{"line":16,"column":8},"end":{"line":16,"column":33}},"3":{"start":{"line":17,"column":8},"end":{"line":17,"column":33}},"4":{"start":{"line":18,"column":8},"end":{"line":18,"column":23}},"5":{"start":{"line":19,"column":8},"end":{"line":19,"column":30}},"6":{"start":{"line":20,"column":8},"end":{"line":20,"column":26}},"7":{"start":{"line":22,"column":8},"end":{"line":22,"column":75}},"8":{"start":{"line":23,"column":8},"end":{"line":23,"column":36}},"9":{"start":{"line":24,"column":8},"end":{"line":24,"column":36}},"10":{"start":{"line":25,"column":8},"end":{"line":25,"column":36}},"11":{"start":{"line":26,"column":8},"end":{"line":26,"column":40}},"12":{"start":{"line":27,"column":8},"end":{"line":27,"column":38}},"13":{"start":{"line":28,"column":8},"end":{"line":28,"column":31}},"14":{"start":{"line":29,"column":8},"end":{"line":29,"column":28}},"15":{"start":{"line":33,"column":8},"end":{"line":33,"column":33}},"16":{"start":{"line":37,"column":8},"end":{"line":37,"column":32}},"17":{"start":{"line":38,"column":8},"end":{"line":38,"column":30}},"18":{"start":{"line":39,"column":8},"end":{"line":39,"column":33}},"19":{"start":{"line":40,"column":8},"end":{"line":40,"column":28}},"20":{"start":{"line":41,"column":8},"end":{"line":41,"column":23}},"21":{"start":{"line":42,"column":8},"end":{"line":42,"column":33}},"22":{"start":{"line":45,"column":8},"end":{"line":45,"column":31}},"23":{"start":{"line":47,"column":8},"end":{"line":47,"column":42}},"24":{"start":{"line":48,"column":8},"end":{"line":48,"column":48}},"25":{"start":{"line":49,"column":8},"end":{"line":49,"column":67}},"26":{"start":{"line":50,"column":8},"end":{"line":50,"column":74}},"27":{"start":{"line":53,"column":8},"end":{"line":53,"column":31}},"28":{"start":{"line":54,"column":21},"end":{"line":54,"column":54}},"29":{"start":{"line":55,"column":8},"end":{"line":64,"column":37}},"30":{"start":{"line":64,"column":21},"end":{"line":64,"column":35}},"31":{"start":{"line":66,"column":8},"end":{"line":66,"column":81}},"32":{"start":{"line":66,"column":71},"end":{"line":66,"column":76}},"33":{"start":{"line":67,"column":8},"end":{"line":72,"column":9}},"34":{"start":{"line":71,"column":12},"end":{"line":71,"column":31}},"35":{"start":{"line":74,"column":8},"end":{"line":74,"column":27}},"36":{"start":{"line":76,"column":8},"end":{"line":78,"column":9}},"37":{"start":{"line":77,"column":12},"end":{"line":77,"column":49}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":18},"end":{"line":43,"column":5}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":24},"end":{"line":51,"column":5}},"line":44},"2":{"name":"(anonymous_2)","decl":{"start":{"line":52,"column":4},"end":{"line":52,"column":5}},"loc":{"start":{"line":52,"column":24},"end":{"line":79,"column":5}},"line":52},"3":{"name":"(anonymous_3)","decl":{"start":{"line":64,"column":14},"end":{"line":64,"column":15}},"loc":{"start":{"line":64,"column":21},"end":{"line":64,"column":35}},"line":64},"4":{"name":"(anonymous_4)","decl":{"start":{"line":66,"column":61},"end":{"line":66,"column":62}},"loc":{"start":{"line":66,"column":71},"end":{"line":66,"column":76}},"line":66}},"branchMap":{"0":{"loc":{"start":{"line":67,"column":8},"end":{"line":72,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":72,"column":9}},{"start":{"line":67,"column":8},"end":{"line":72,"column":9}}],"line":67},"1":{"loc":{"start":{"line":67,"column":12},"end":{"line":70,"column":40}},"type":"binary-expr","locations":[{"start":{"line":67,"column":12},"end":{"line":67,"column":40}},{"start":{"line":68,"column":12},"end":{"line":68,"column":40}},{"start":{"line":69,"column":12},"end":{"line":69,"column":40}},{"start":{"line":70,"column":12},"end":{"line":70,"column":40}}],"line":67},"2":{"loc":{"start":{"line":76,"column":8},"end":{"line":78,"column":9}},"type":"if","locations":[{"start":{"line":76,"column":8},"end":{"line":78,"column":9}},{"start":{"line":76,"column":8},"end":{"line":78,"column":9}}],"line":76}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":4,"31":1,"32":4,"33":1,"34":0,"35":1,"36":1,"37":1},"f":{"0":1,"1":1,"2":1,"3":4,"4":4},"b":{"0":[0,1],"1":[1,0,0,0],"2":[1,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/types.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/dpos/store/types.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @module dashboard.dpos\n */\n\nimport { HasPlasmaState } from \"@/store/plasma/types\"\nimport { ZERO } from \"@/utils\"\nimport BN from \"bn.js\"\nimport { Address, LocalAddress } from \"loom-js\"\nimport { DPOS3, ICandidate, IValidator, IDelegation } from \"loom-js/dist/contracts/dpos3\"\nimport bigInt from \"big-integer\"\n\nimport {\n  CandidateState,\n  DelegationState,\n  LocktimeTier,\n} from \"loom-js/dist/proto/dposv3_pb\"\n\n// Interface for root stores that support EthereumState\nexport interface HasDPOSState extends HasPlasmaState {\n  dpos: DPOSState\n}\n\nexport interface DPOSConfig {\n  bootstrapNodes: string[]\n  analyticsUrl: string\n}\n\nexport interface DPOSState extends DPOSConfig {\n  contract: DPOS3 | null\n  loading: {\n    electionTime: boolean\n    validators: boolean\n    delegations: boolean\n    rewards: boolean,\n  }\n  electionTime: Date\n  validators: Validator[]\n  delegations: Delegation[]\n  rewards: Delegation[]\n  // when user is requesting an action\n  intent: \"\" | \"delegate\" | \"redelegate\" | \"undelegate\"\n  delegation: Delegation | null,\n  analyticsData: any[] | null,\n}\n\n/**\n * represents the merged structures from IValidator, ICandidate and Delegations\n */\nexport class Validator implements IValidator, ICandidate {\n  // ICandidate\n  pubKey: Uint8Array = new Uint8Array()\n  maxReferralPercentage?: number | undefined\n  fee: BN = new BN(-1)\n  newFee: BN = new BN(-1)\n  candidateState: CandidateState = -1\n  name: string = \"\"\n  description: string = \"\"\n  website: string = \"\"\n  // IValidator\n  address = new Address(\"\", new LocalAddress(new Uint8Array()))\n  slashPercentage = ZERO\n  delegationTotal = ZERO\n  whitelistAmount = ZERO\n  whitelistLocktimeTier: LocktimeTier = -1\n  recentlyMissedBlocks = 0\n  missedBlocks: number[] = []\n  jailed: boolean = false\n\n  /**\n   * amount staked by others\n   */\n  stakedAmount = ZERO\n  /**\n   * stakeAmount + whitelistAmount\n   */\n  totalStaked = ZERO\n  delegations: Delegation[] = []\n  isBootstrap: boolean = false\n  active: boolean = false\n  addr: string = \"\"\n  allDelegations: Array<IDelegation> = []\n\n  setCandidateData(c: ICandidate) {\n    Object.assign(this, c)\n    // this.delegationTotal = c.delegationTotal.sub(c.whitelistAmount)\n    this.fee = c.fee.div(new BN(100))\n    this.newFee = c.newFee.div(new BN(100))\n    this.addr = c.address.local.toString().toLocaleLowerCase()\n    this.delegationTotal = c.delegationTotal.sub((c.whitelistAmount))\n  }\n  setValidatorData(v: IValidator) {\n    Object.assign(this, v)\n    const bits = bigInt(this.recentlyMissedBlocks)\n    this.missedBlocks = [\n      // tslint:disable-next-line: no-bitwise\n      bits.and(0xFFFF),\n      // tslint:disable-next-line: no-bitwise\n      (bits.shiftRight(16)).and(0xFFFF),\n      // tslint:disable-next-line: no-bitwise\n      (bits.shiftRight(32)).and(0xFFFF),\n      // tslint:disable-next-line: no-bitwise\n      (bits.shiftRight(48)).and(0xFFFF),\n    ].map((b) => b.toJSNumber())\n    // just reusit for the sum\n    this.recentlyMissedBlocks = this.missedBlocks.reduce((a, b) => a + b, 0)\n    if (this.missedBlocks[0] >= 4096 &&\n        this.missedBlocks[1] >= 4096 &&\n        this.missedBlocks[2] >= 4096 &&\n        this.missedBlocks[3] >= 4096) {\n      this.jailed = true\n    }\n    // if node has validator info then its active\n    this.active = true\n    // default value for nodes without delegations\n    if (this.totalStaked.isZero()) {\n      this.totalStaked = v.whitelistAmount\n    }\n  }\n}\n\nexport interface Delegation {\n  validator: Validator\n  updateValidator: Validator | undefined\n  delegator: Address\n  index: number\n  amount: BN\n  updateAmount: BN\n  lockTime: number\n  lockTimeTier: LocktimeTier\n  state: DelegationState\n  referrer?: string\n  pending: boolean\n  locked: boolean\n  isReward: boolean\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"a0881a0b13e847bd6421d675856b5d5fdd5a5585"},"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/index.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/index.ts","statementMap":{"0":{"start":{"line":16,"column":12},"end":{"line":16,"column":30}},"1":{"start":{"line":17,"column":16},"end":{"line":17,"column":64}},"2":{"start":{"line":18,"column":20},"end":{"line":18,"column":35}},"3":{"start":{"line":19,"column":19},"end":{"line":43,"column":1}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":29}},"5":{"start":{"line":48,"column":4},"end":{"line":50,"column":53}},"6":{"start":{"line":49,"column":23},"end":{"line":49,"column":33}},"7":{"start":{"line":50,"column":28},"end":{"line":50,"column":45}},"8":{"start":{"line":53,"column":4},"end":{"line":55,"column":53}},"9":{"start":{"line":54,"column":23},"end":{"line":54,"column":32}},"10":{"start":{"line":55,"column":28},"end":{"line":55,"column":45}},"11":{"start":{"line":65,"column":4},"end":{"line":68,"column":5}},"12":{"start":{"line":66,"column":8},"end":{"line":66,"column":58}},"13":{"start":{"line":67,"column":8},"end":{"line":67,"column":15}},"14":{"start":{"line":69,"column":4},"end":{"line":69,"column":31}},"15":{"start":{"line":70,"column":21},"end":{"line":70,"column":43}},"16":{"start":{"line":71,"column":17},"end":{"line":71,"column":59}},"17":{"start":{"line":72,"column":17},"end":{"line":72,"column":52}},"18":{"start":{"line":73,"column":4},"end":{"line":73,"column":47}},"19":{"start":{"line":74,"column":4},"end":{"line":74,"column":47}},"20":{"start":{"line":84,"column":21},"end":{"line":84,"column":39}},"21":{"start":{"line":85,"column":4},"end":{"line":85,"column":30}},"22":{"start":{"line":87,"column":4},"end":{"line":87,"column":40}},"23":{"start":{"line":88,"column":50},"end":{"line":92,"column":6}},"24":{"start":{"line":94,"column":18},"end":{"line":99,"column":6}},"25":{"start":{"line":95,"column":21},"end":{"line":95,"column":36}},"26":{"start":{"line":96,"column":8},"end":{"line":96,"column":33}},"27":{"start":{"line":97,"column":8},"end":{"line":97,"column":72}},"28":{"start":{"line":98,"column":8},"end":{"line":98,"column":20}},"29":{"start":{"line":102,"column":24},"end":{"line":111,"column":5}},"30":{"start":{"line":103,"column":23},"end":{"line":103,"column":63}},"31":{"start":{"line":103,"column":44},"end":{"line":103,"column":62}},"32":{"start":{"line":104,"column":8},"end":{"line":109,"column":9}},"33":{"start":{"line":105,"column":12},"end":{"line":105,"column":39}},"34":{"start":{"line":106,"column":12},"end":{"line":106,"column":33}},"35":{"start":{"line":107,"column":12},"end":{"line":107,"column":75}},"36":{"start":{"line":108,"column":12},"end":{"line":108,"column":33}},"37":{"start":{"line":110,"column":8},"end":{"line":110,"column":24}},"38":{"start":{"line":112,"column":4},"end":{"line":115,"column":7}},"39":{"start":{"line":113,"column":21},"end":{"line":113,"column":60}},"40":{"start":{"line":114,"column":8},"end":{"line":114,"column":33}},"41":{"start":{"line":116,"column":4},"end":{"line":124,"column":7}},"42":{"start":{"line":117,"column":23},"end":{"line":117,"column":52}},"43":{"start":{"line":119,"column":21},"end":{"line":119,"column":69}},"44":{"start":{"line":120,"column":21},"end":{"line":120,"column":38}},"45":{"start":{"line":121,"column":8},"end":{"line":121,"column":46}},"46":{"start":{"line":122,"column":8},"end":{"line":122,"column":71}},"47":{"start":{"line":123,"column":8},"end":{"line":123,"column":49}},"48":{"start":{"line":126,"column":4},"end":{"line":128,"column":65}},"49":{"start":{"line":127,"column":23},"end":{"line":127,"column":36}},"50":{"start":{"line":128,"column":25},"end":{"line":128,"column":62}},"51":{"start":{"line":129,"column":4},"end":{"line":129,"column":72}},"52":{"start":{"line":129,"column":47},"end":{"line":129,"column":70}},"53":{"start":{"line":130,"column":4},"end":{"line":130,"column":41}},"54":{"start":{"line":141,"column":22},"end":{"line":141,"column":29}},"55":{"start":{"line":142,"column":21},"end":{"line":142,"column":35}},"56":{"start":{"line":143,"column":4},"end":{"line":143,"column":37}},"57":{"start":{"line":144,"column":21},"end":{"line":144,"column":87}},"58":{"start":{"line":145,"column":4},"end":{"line":154,"column":7}},"59":{"start":{"line":146,"column":23},"end":{"line":146,"column":34}},"60":{"start":{"line":148,"column":23},"end":{"line":148,"column":79}},"61":{"start":{"line":150,"column":18},"end":{"line":150,"column":57}},"62":{"start":{"line":152,"column":8},"end":{"line":152,"column":40}},"63":{"start":{"line":153,"column":8},"end":{"line":153,"column":17}},"64":{"start":{"line":155,"column":4},"end":{"line":155,"column":71}},"65":{"start":{"line":156,"column":20},"end":{"line":158,"column":63}},"66":{"start":{"line":157,"column":23},"end":{"line":157,"column":36}},"67":{"start":{"line":158,"column":23},"end":{"line":158,"column":62}},"68":{"start":{"line":159,"column":4},"end":{"line":159,"column":28}},"69":{"start":{"line":160,"column":4},"end":{"line":160,"column":39}},"70":{"start":{"line":161,"column":4},"end":{"line":161,"column":38}},"71":{"start":{"line":164,"column":4},"end":{"line":164,"column":30}},"72":{"start":{"line":165,"column":4},"end":{"line":175,"column":25}},"73":{"start":{"line":179,"column":4},"end":{"line":179,"column":22}},"74":{"start":{"line":180,"column":4},"end":{"line":180,"column":28}},"75":{"start":{"line":189,"column":4},"end":{"line":189,"column":32}},"76":{"start":{"line":191,"column":4},"end":{"line":191,"column":32}},"77":{"start":{"line":194,"column":4},"end":{"line":194,"column":32}},"78":{"start":{"line":196,"column":4},"end":{"line":196,"column":32}},"79":{"start":{"line":199,"column":22},"end":{"line":199,"column":29}},"80":{"start":{"line":200,"column":21},"end":{"line":200,"column":35}},"81":{"start":{"line":201,"column":4},"end":{"line":201,"column":70}},"82":{"start":{"line":202,"column":21},"end":{"line":206,"column":6}},"83":{"start":{"line":207,"column":4},"end":{"line":210,"column":5}},"84":{"start":{"line":208,"column":8},"end":{"line":208,"column":27}},"85":{"start":{"line":209,"column":8},"end":{"line":209,"column":15}},"86":{"start":{"line":211,"column":4},"end":{"line":230,"column":5}},"87":{"start":{"line":212,"column":8},"end":{"line":212,"column":76}},"88":{"start":{"line":213,"column":8},"end":{"line":213,"column":125}},"89":{"start":{"line":214,"column":8},"end":{"line":214,"column":27}},"90":{"start":{"line":217,"column":8},"end":{"line":217,"column":27}},"91":{"start":{"line":218,"column":8},"end":{"line":218,"column":87}},"92":{"start":{"line":219,"column":8},"end":{"line":219,"column":29}},"93":{"start":{"line":220,"column":8},"end":{"line":229,"column":11}},"94":{"start":{"line":221,"column":12},"end":{"line":227,"column":15}},"95":{"start":{"line":228,"column":12},"end":{"line":228,"column":43}},"96":{"start":{"line":233,"column":4},"end":{"line":236,"column":25}},"97":{"start":{"line":236,"column":8},"end":{"line":236,"column":25}},"98":{"start":{"line":238,"column":17},"end":{"line":238,"column":28}},"99":{"start":{"line":239,"column":4},"end":{"line":240,"column":18}},"100":{"start":{"line":240,"column":8},"end":{"line":240,"column":18}},"101":{"start":{"line":241,"column":4},"end":{"line":242,"column":22}},"102":{"start":{"line":242,"column":8},"end":{"line":242,"column":22}},"103":{"start":{"line":243,"column":4},"end":{"line":244,"column":23}},"104":{"start":{"line":244,"column":8},"end":{"line":244,"column":23}},"105":{"start":{"line":245,"column":4},"end":{"line":246,"column":26}},"106":{"start":{"line":246,"column":8},"end":{"line":246,"column":26}},"107":{"start":{"line":247,"column":4},"end":{"line":248,"column":29}},"108":{"start":{"line":248,"column":8},"end":{"line":248,"column":29}},"109":{"start":{"line":249,"column":4},"end":{"line":250,"column":24}},"110":{"start":{"line":250,"column":8},"end":{"line":250,"column":24}},"111":{"start":{"line":251,"column":4},"end":{"line":252,"column":26}},"112":{"start":{"line":252,"column":8},"end":{"line":252,"column":26}},"113":{"start":{"line":253,"column":4},"end":{"line":254,"column":24}},"114":{"start":{"line":254,"column":8},"end":{"line":254,"column":24}},"115":{"start":{"line":255,"column":4},"end":{"line":256,"column":26}},"116":{"start":{"line":256,"column":8},"end":{"line":256,"column":26}},"117":{"start":{"line":257,"column":4},"end":{"line":257,"column":14}},"118":{"start":{"line":269,"column":4},"end":{"line":269,"column":74}},"119":{"start":{"line":270,"column":4},"end":{"line":270,"column":83}},"120":{"start":{"line":271,"column":4},"end":{"line":289,"column":5}},"121":{"start":{"line":272,"column":8},"end":{"line":272,"column":162}},"122":{"start":{"line":273,"column":8},"end":{"line":273,"column":27}},"123":{"start":{"line":276,"column":8},"end":{"line":276,"column":27}},"124":{"start":{"line":277,"column":8},"end":{"line":277,"column":89}},"125":{"start":{"line":278,"column":8},"end":{"line":288,"column":11}},"126":{"start":{"line":279,"column":12},"end":{"line":286,"column":15}},"127":{"start":{"line":287,"column":12},"end":{"line":287,"column":43}},"128":{"start":{"line":292,"column":4},"end":{"line":292,"column":75}},"129":{"start":{"line":293,"column":4},"end":{"line":293,"column":104}},"130":{"start":{"line":294,"column":4},"end":{"line":309,"column":5}},"131":{"start":{"line":295,"column":8},"end":{"line":295,"column":79}},"132":{"start":{"line":296,"column":8},"end":{"line":296,"column":27}},"133":{"start":{"line":299,"column":8},"end":{"line":299,"column":27}},"134":{"start":{"line":300,"column":8},"end":{"line":300,"column":89}},"135":{"start":{"line":301,"column":8},"end":{"line":308,"column":11}},"136":{"start":{"line":302,"column":12},"end":{"line":306,"column":15}},"137":{"start":{"line":307,"column":12},"end":{"line":307,"column":43}},"138":{"start":{"line":320,"column":4},"end":{"line":320,"column":74}},"139":{"start":{"line":321,"column":4},"end":{"line":321,"column":107}},"140":{"start":{"line":322,"column":4},"end":{"line":339,"column":5}},"141":{"start":{"line":323,"column":8},"end":{"line":323,"column":122}},"142":{"start":{"line":324,"column":8},"end":{"line":324,"column":27}},"143":{"start":{"line":327,"column":8},"end":{"line":327,"column":27}},"144":{"start":{"line":328,"column":8},"end":{"line":328,"column":89}},"145":{"start":{"line":329,"column":8},"end":{"line":338,"column":11}},"146":{"start":{"line":330,"column":12},"end":{"line":336,"column":15}},"147":{"start":{"line":337,"column":12},"end":{"line":337,"column":43}},"148":{"start":{"line":346,"column":21},"end":{"line":346,"column":43}},"149":{"start":{"line":348,"column":27},"end":{"line":348,"column":108}},"150":{"start":{"line":349,"column":4},"end":{"line":349,"column":77}},"151":{"start":{"line":350,"column":4},"end":{"line":350,"column":77}},"152":{"start":{"line":351,"column":29},"end":{"line":351,"column":107}},"153":{"start":{"line":352,"column":4},"end":{"line":355,"column":5}},"154":{"start":{"line":353,"column":8},"end":{"line":353,"column":86}},"155":{"start":{"line":354,"column":8},"end":{"line":354,"column":57}},"156":{"start":{"line":356,"column":4},"end":{"line":365,"column":5}},"157":{"start":{"line":357,"column":8},"end":{"line":357,"column":81}},"158":{"start":{"line":358,"column":8},"end":{"line":358,"column":52}},"159":{"start":{"line":359,"column":8},"end":{"line":359,"column":27}},"160":{"start":{"line":360,"column":8},"end":{"line":360,"column":81}},"161":{"start":{"line":363,"column":8},"end":{"line":363,"column":27}},"162":{"start":{"line":364,"column":8},"end":{"line":364,"column":87}},"163":{"start":{"line":373,"column":20},"end":{"line":373,"column":63}},"164":{"start":{"line":374,"column":22},"end":{"line":374,"column":43}},"165":{"start":{"line":375,"column":4},"end":{"line":378,"column":5}},"166":{"start":{"line":376,"column":8},"end":{"line":376,"column":87}},"167":{"start":{"line":377,"column":8},"end":{"line":377,"column":15}},"168":{"start":{"line":379,"column":18},"end":{"line":379,"column":24}},"169":{"start":{"line":380,"column":26},"end":{"line":380,"column":82}},"170":{"start":{"line":381,"column":22},"end":{"line":381,"column":85}},"171":{"start":{"line":382,"column":4},"end":{"line":391,"column":5}},"172":{"start":{"line":383,"column":8},"end":{"line":390,"column":9}},"173":{"start":{"line":384,"column":12},"end":{"line":384,"column":88}},"174":{"start":{"line":387,"column":12},"end":{"line":387,"column":31}},"175":{"start":{"line":388,"column":12},"end":{"line":388,"column":88}},"176":{"start":{"line":389,"column":12},"end":{"line":389,"column":19}},"177":{"start":{"line":392,"column":4},"end":{"line":399,"column":5}},"178":{"start":{"line":393,"column":8},"end":{"line":393,"column":213}},"179":{"start":{"line":394,"column":8},"end":{"line":394,"column":89}},"180":{"start":{"line":397,"column":8},"end":{"line":397,"column":27}},"181":{"start":{"line":398,"column":8},"end":{"line":398,"column":87}},"182":{"start":{"line":402,"column":21},"end":{"line":402,"column":113}},"183":{"start":{"line":403,"column":4},"end":{"line":403,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":16},"end":{"line":22,"column":5}},"line":20},"1":{"name":"rewardsUnclaimedTotal","decl":{"start":{"line":47,"column":9},"end":{"line":47,"column":30}},"loc":{"start":{"line":47,"column":38},"end":{"line":51,"column":1}},"line":47},"2":{"name":"(anonymous_2)","decl":{"start":{"line":49,"column":16},"end":{"line":49,"column":17}},"loc":{"start":{"line":49,"column":23},"end":{"line":49,"column":33}},"line":49},"3":{"name":"(anonymous_3)","decl":{"start":{"line":50,"column":16},"end":{"line":50,"column":17}},"loc":{"start":{"line":50,"column":28},"end":{"line":50,"column":45}},"line":50},"4":{"name":"rewardsBeingClaimedTotal","decl":{"start":{"line":52,"column":9},"end":{"line":52,"column":33}},"loc":{"start":{"line":52,"column":41},"end":{"line":56,"column":1}},"line":52},"5":{"name":"(anonymous_5)","decl":{"start":{"line":54,"column":16},"end":{"line":54,"column":17}},"loc":{"start":{"line":54,"column":23},"end":{"line":54,"column":32}},"line":54},"6":{"name":"(anonymous_6)","decl":{"start":{"line":55,"column":16},"end":{"line":55,"column":17}},"loc":{"start":{"line":55,"column":28},"end":{"line":55,"column":45}},"line":55},"7":{"name":"refreshElectionTime","decl":{"start":{"line":64,"column":22},"end":{"line":64,"column":41}},"loc":{"start":{"line":64,"column":51},"end":{"line":75,"column":1}},"line":64},"8":{"name":"refreshValidators","decl":{"start":{"line":83,"column":22},"end":{"line":83,"column":39}},"loc":{"start":{"line":83,"column":45},"end":{"line":131,"column":1}},"line":83},"9":{"name":"(anonymous_9)","decl":{"start":{"line":94,"column":33},"end":{"line":94,"column":34}},"loc":{"start":{"line":94,"column":40},"end":{"line":99,"column":5}},"line":94},"10":{"name":"(anonymous_10)","decl":{"start":{"line":102,"column":24},"end":{"line":102,"column":25}},"loc":{"start":{"line":102,"column":34},"end":{"line":111,"column":5}},"line":102},"11":{"name":"(anonymous_11)","decl":{"start":{"line":103,"column":34},"end":{"line":103,"column":35}},"loc":{"start":{"line":103,"column":44},"end":{"line":103,"column":62}},"line":103},"12":{"name":"(anonymous_12)","decl":{"start":{"line":112,"column":23},"end":{"line":112,"column":24}},"loc":{"start":{"line":112,"column":30},"end":{"line":115,"column":5}},"line":112},"13":{"name":"(anonymous_13)","decl":{"start":{"line":117,"column":16},"end":{"line":117,"column":17}},"loc":{"start":{"line":117,"column":23},"end":{"line":117,"column":52}},"line":117},"14":{"name":"(anonymous_14)","decl":{"start":{"line":118,"column":17},"end":{"line":118,"column":18}},"loc":{"start":{"line":118,"column":24},"end":{"line":124,"column":5}},"line":118},"15":{"name":"(anonymous_15)","decl":{"start":{"line":127,"column":16},"end":{"line":127,"column":17}},"loc":{"start":{"line":127,"column":23},"end":{"line":127,"column":36}},"line":127},"16":{"name":"(anonymous_16)","decl":{"start":{"line":128,"column":17},"end":{"line":128,"column":18}},"loc":{"start":{"line":128,"column":25},"end":{"line":128,"column":62}},"line":128},"17":{"name":"(anonymous_17)","decl":{"start":{"line":129,"column":40},"end":{"line":129,"column":41}},"loc":{"start":{"line":129,"column":47},"end":{"line":129,"column":70}},"line":129},"18":{"name":"refreshDelegations","decl":{"start":{"line":140,"column":22},"end":{"line":140,"column":40}},"loc":{"start":{"line":140,"column":50},"end":{"line":162,"column":1}},"line":140},"19":{"name":"(anonymous_19)","decl":{"start":{"line":146,"column":16},"end":{"line":146,"column":17}},"loc":{"start":{"line":146,"column":23},"end":{"line":146,"column":34}},"line":146},"20":{"name":"(anonymous_20)","decl":{"start":{"line":148,"column":16},"end":{"line":148,"column":17}},"loc":{"start":{"line":148,"column":23},"end":{"line":148,"column":79}},"line":148},"21":{"name":"(anonymous_21)","decl":{"start":{"line":149,"column":13},"end":{"line":149,"column":14}},"loc":{"start":{"line":149,"column":23},"end":{"line":154,"column":5}},"line":149},"22":{"name":"(anonymous_22)","decl":{"start":{"line":157,"column":16},"end":{"line":157,"column":17}},"loc":{"start":{"line":157,"column":23},"end":{"line":157,"column":36}},"line":157},"23":{"name":"(anonymous_23)","decl":{"start":{"line":158,"column":13},"end":{"line":158,"column":14}},"loc":{"start":{"line":158,"column":23},"end":{"line":158,"column":62}},"line":158},"24":{"name":"requestDelegation","decl":{"start":{"line":163,"column":16},"end":{"line":163,"column":33}},"loc":{"start":{"line":163,"column":52},"end":{"line":177,"column":1}},"line":163},"25":{"name":"clearRequest","decl":{"start":{"line":178,"column":9},"end":{"line":178,"column":21}},"loc":{"start":{"line":178,"column":29},"end":{"line":181,"column":1}},"line":178},"26":{"name":"requestRedelegation","decl":{"start":{"line":188,"column":16},"end":{"line":188,"column":35}},"loc":{"start":{"line":188,"column":46},"end":{"line":192,"column":1}},"line":188},"27":{"name":"requestUndelegation","decl":{"start":{"line":193,"column":16},"end":{"line":193,"column":35}},"loc":{"start":{"line":193,"column":46},"end":{"line":197,"column":1}},"line":193},"28":{"name":"delegate","decl":{"start":{"line":198,"column":22},"end":{"line":198,"column":30}},"loc":{"start":{"line":198,"column":52},"end":{"line":231,"column":1}},"line":198},"29":{"name":"(anonymous_29)","decl":{"start":{"line":220,"column":25},"end":{"line":220,"column":26}},"loc":{"start":{"line":220,"column":36},"end":{"line":229,"column":9}},"line":220},"30":{"name":"getReferrer","decl":{"start":{"line":232,"column":9},"end":{"line":232,"column":20}},"loc":{"start":{"line":232,"column":23},"end":{"line":258,"column":1}},"line":232},"31":{"name":"redelegate","decl":{"start":{"line":268,"column":22},"end":{"line":268,"column":32}},"loc":{"start":{"line":268,"column":54},"end":{"line":290,"column":1}},"line":268},"32":{"name":"(anonymous_32)","decl":{"start":{"line":278,"column":25},"end":{"line":278,"column":26}},"loc":{"start":{"line":278,"column":36},"end":{"line":288,"column":9}},"line":278},"33":{"name":"consolidate","decl":{"start":{"line":291,"column":15},"end":{"line":291,"column":26}},"loc":{"start":{"line":291,"column":47},"end":{"line":310,"column":1}},"line":291},"34":{"name":"(anonymous_34)","decl":{"start":{"line":301,"column":25},"end":{"line":301,"column":26}},"loc":{"start":{"line":301,"column":36},"end":{"line":308,"column":9}},"line":301},"35":{"name":"undelegate","decl":{"start":{"line":319,"column":22},"end":{"line":319,"column":32}},"loc":{"start":{"line":319,"column":54},"end":{"line":340,"column":1}},"line":319},"36":{"name":"(anonymous_36)","decl":{"start":{"line":329,"column":25},"end":{"line":329,"column":26}},"loc":{"start":{"line":329,"column":36},"end":{"line":338,"column":9}},"line":329},"37":{"name":"claimRewards","decl":{"start":{"line":345,"column":15},"end":{"line":345,"column":27}},"loc":{"start":{"line":345,"column":37},"end":{"line":366,"column":1}},"line":345},"38":{"name":"registerCandidate","decl":{"start":{"line":372,"column":22},"end":{"line":372,"column":39}},"loc":{"start":{"line":372,"column":60},"end":{"line":400,"column":1}},"line":372},"39":{"name":"fetchAnalyticsData","decl":{"start":{"line":401,"column":22},"end":{"line":401,"column":40}},"loc":{"start":{"line":401,"column":50},"end":{"line":404,"column":1}},"line":401}},"branchMap":{"0":{"loc":{"start":{"line":65,"column":4},"end":{"line":68,"column":5}},"type":"if","locations":[{"start":{"line":65,"column":4},"end":{"line":68,"column":5}},{"start":{"line":65,"column":4},"end":{"line":68,"column":5}}],"line":65},"1":{"loc":{"start":{"line":104,"column":8},"end":{"line":109,"column":9}},"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":109,"column":9}},{"start":{"line":104,"column":8},"end":{"line":109,"column":9}}],"line":104},"2":{"loc":{"start":{"line":148,"column":34},"end":{"line":148,"column":78}},"type":"binary-expr","locations":[{"start":{"line":148,"column":34},"end":{"line":148,"column":51}},{"start":{"line":148,"column":55},"end":{"line":148,"column":78}}],"line":148},"3":{"loc":{"start":{"line":207,"column":4},"end":{"line":210,"column":5}},"type":"if","locations":[{"start":{"line":207,"column":4},"end":{"line":210,"column":5}},{"start":{"line":207,"column":4},"end":{"line":210,"column":5}}],"line":207},"4":{"loc":{"start":{"line":233,"column":4},"end":{"line":236,"column":25}},"type":"if","locations":[{"start":{"line":233,"column":4},"end":{"line":236,"column":25}},{"start":{"line":233,"column":4},"end":{"line":236,"column":25}}],"line":233},"5":{"loc":{"start":{"line":233,"column":8},"end":{"line":235,"column":59}},"type":"binary-expr","locations":[{"start":{"line":233,"column":8},"end":{"line":233,"column":27}},{"start":{"line":235,"column":9},"end":{"line":235,"column":29}},{"start":{"line":235,"column":33},"end":{"line":235,"column":58}}],"line":233},"6":{"loc":{"start":{"line":239,"column":4},"end":{"line":240,"column":18}},"type":"if","locations":[{"start":{"line":239,"column":4},"end":{"line":240,"column":18}},{"start":{"line":239,"column":4},"end":{"line":240,"column":18}}],"line":239},"7":{"loc":{"start":{"line":241,"column":4},"end":{"line":242,"column":22}},"type":"if","locations":[{"start":{"line":241,"column":4},"end":{"line":242,"column":22}},{"start":{"line":241,"column":4},"end":{"line":242,"column":22}}],"line":241},"8":{"loc":{"start":{"line":243,"column":4},"end":{"line":244,"column":23}},"type":"if","locations":[{"start":{"line":243,"column":4},"end":{"line":244,"column":23}},{"start":{"line":243,"column":4},"end":{"line":244,"column":23}}],"line":243},"9":{"loc":{"start":{"line":245,"column":4},"end":{"line":246,"column":26}},"type":"if","locations":[{"start":{"line":245,"column":4},"end":{"line":246,"column":26}},{"start":{"line":245,"column":4},"end":{"line":246,"column":26}}],"line":245},"10":{"loc":{"start":{"line":247,"column":4},"end":{"line":248,"column":29}},"type":"if","locations":[{"start":{"line":247,"column":4},"end":{"line":248,"column":29}},{"start":{"line":247,"column":4},"end":{"line":248,"column":29}}],"line":247},"11":{"loc":{"start":{"line":249,"column":4},"end":{"line":250,"column":24}},"type":"if","locations":[{"start":{"line":249,"column":4},"end":{"line":250,"column":24}},{"start":{"line":249,"column":4},"end":{"line":250,"column":24}}],"line":249},"12":{"loc":{"start":{"line":251,"column":4},"end":{"line":252,"column":26}},"type":"if","locations":[{"start":{"line":251,"column":4},"end":{"line":252,"column":26}},{"start":{"line":251,"column":4},"end":{"line":252,"column":26}}],"line":251},"13":{"loc":{"start":{"line":253,"column":4},"end":{"line":254,"column":24}},"type":"if","locations":[{"start":{"line":253,"column":4},"end":{"line":254,"column":24}},{"start":{"line":253,"column":4},"end":{"line":254,"column":24}}],"line":253},"14":{"loc":{"start":{"line":255,"column":4},"end":{"line":256,"column":26}},"type":"if","locations":[{"start":{"line":255,"column":4},"end":{"line":256,"column":26}},{"start":{"line":255,"column":4},"end":{"line":256,"column":26}}],"line":255},"15":{"loc":{"start":{"line":352,"column":4},"end":{"line":355,"column":5}},"type":"if","locations":[{"start":{"line":352,"column":4},"end":{"line":355,"column":5}},{"start":{"line":352,"column":4},"end":{"line":355,"column":5}}],"line":352},"16":{"loc":{"start":{"line":375,"column":4},"end":{"line":378,"column":5}},"type":"if","locations":[{"start":{"line":375,"column":4},"end":{"line":378,"column":5}},{"start":{"line":375,"column":4},"end":{"line":378,"column":5}}],"line":375},"17":{"loc":{"start":{"line":382,"column":4},"end":{"line":391,"column":5}},"type":"if","locations":[{"start":{"line":382,"column":4},"end":{"line":391,"column":5}},{"start":{"line":382,"column":4},"end":{"line":391,"column":5}}],"line":382}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":2,"31":2,"32":2,"33":0,"34":0,"35":0,"36":0,"37":2,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":1,"66":0,"67":0,"68":1,"69":1,"70":1,"71":1,"72":1,"73":0,"74":0,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":0,"85":0,"86":1,"87":1,"88":1,"89":1,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":1,"119":1,"120":1,"121":1,"122":1,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":1,"139":1,"140":1,"141":1,"142":1,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":2,"164":2,"165":2,"166":1,"167":1,"168":1,"169":1,"170":1,"171":1,"172":1,"173":1,"174":0,"175":0,"176":0,"177":1,"178":1,"179":1,"180":0,"181":0,"182":0,"183":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":1,"9":1,"10":2,"11":2,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":1,"27":1,"28":1,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":2,"39":0},"b":{"0":[0,1],"1":[0,2],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1],"17":[1,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/index.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/dpos/store/index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @module dashboard.dpos\n */\n\nimport { plasmaModule } from \"@/store/plasma\"\nimport { ZERO, parseToWei } from \"@/utils\"\nimport BN from \"bn.js\"\nimport debug from \"debug\"\nimport Axios from \"axios\"\nimport { ICandidate, IDelegation } from \"loom-js/dist/contracts/dpos3\"\nimport { BareActionContext, getStoreBuilder } from \"vuex-typex\"\nimport { fromIDelegation, defaultState } from \"./helpers\"\nimport * as mutations from \"./mutations\"\nimport { Delegation, DPOSState, HasDPOSState, Validator } from \"./types\"\nimport { Address, CryptoUtils } from \"loom-js\"\nimport { feedbackModule as feedback } from \"@/feedback/store\"\nimport * as Sentry from \"@sentry/browser\"\nimport { i18n } from \"@/i18n\"\n\nconst log = debug(\"dash.dpos\")\n\nconst builder = getStoreBuilder<HasDPOSState>().module(\"dpos\", defaultState())\nconst stateGetter = builder.state()\n\nconst dposModule = {\n  get state() {\n    return stateGetter()\n  },\n\n  rewardsUnclaimedTotal: builder.read(rewardsUnclaimedTotal),\n  rewardsBeingClaimedTotal: builder.read(rewardsBeingClaimedTotal),\n  getReferrer: builder.read(getReferrer),\n\n  setConfig: builder.commit(mutations.setConfig),\n  setElectionTime: builder.commit(mutations.setElectionTime),\n  setAnalyticsData: builder.commit(mutations.setAnalyticsData),\n\n  requestDelegation: builder.commit(requestDelegation),\n  requestRedelegation: builder.commit(requestRedelegation),\n  requestUndelegation: builder.commit(requestUndelegation),\n  clearRequest: builder.commit(clearRequest),\n\n  delegate: builder.dispatch(delegate),\n  redelegate: builder.dispatch(redelegate),\n  consolidate: builder.dispatch(consolidate),\n  undelegate: builder.dispatch(undelegate),\n  claimRewards: builder.dispatch(claimRewards),\n\n  refreshElectionTime: builder.dispatch(refreshElectionTime),\n  refreshValidators: builder.dispatch(refreshValidators),\n  refreshDelegations: builder.dispatch(refreshDelegations),\n\n  registerCandidate: builder.dispatch(registerCandidate),\n  fetchAnalyticsData: builder.dispatch(fetchAnalyticsData),\n\n}\n\n// vuex module as a service\nexport { dposModule }\n\ndeclare type ActionContext = BareActionContext<DPOSState, HasDPOSState>\n\n// read/static\n\nfunction rewardsUnclaimedTotal(state: DPOSState) {\n  return state.rewards\n    .filter((r) => !r.pending)\n    .reduce((sum, r) => sum.add(r.amount), ZERO)\n}\nfunction rewardsBeingClaimedTotal(state: DPOSState) {\n  return state.rewards\n    .filter((r) => r.pending)\n    .reduce((sum, r) => sum.add(r.amount), ZERO)\n}\n\n/**\n * reloads time until next election\n * A call is scheduled after each election\n * UI shouldn't have to expose this action to the user\n * @param ctx\n * @see {dpos.reactions}\n */\nexport async function refreshElectionTime(context: ActionContext) {\n  if (context.state.contract === null) {\n    console.warn(\"DPoS contract not initialized yet\")\n    return\n  }\n  log(\"refreshElectionTime\")\n  const contract = context.state.contract!\n  const time: BN = await contract.getTimeUntilElectionAsync()\n  const date = Date.now() + time.toNumber() * 1000\n  log(\"refreshElectionTime\", new Date(date))\n  dposModule.setElectionTime(new Date(date))\n}\n\n/**\n * Loads validator candidate and total delegations list\n * Called after each new election\n * UI shouldn't have to expose this action to the user\n * @param ctx\n * @see {dpos.reactions}\n */\nexport async function refreshValidators(ctx: ActionContext) {\n  const contract = ctx.state.contract!\n  log(\"getValidatorsAsync\")\n  // Get all validators, candidates and delegations\n  ctx.state.loading.validators = true\n  const [validators, candidates, delegations] = await Promise.all([\n    contract.getValidatorsAsync(),\n    contract.getCandidatesAsync(),\n    contract.getAllDelegations(),\n  ])\n  //\n\n  const nodes = candidates.map((c) => {\n    const node = new Validator()\n    node.setCandidateData(c)\n    node.isBootstrap = ctx.state.bootstrapNodes.includes(node.addr)\n    return node\n  })\n  // Helper: if node not found in the array\n  // creates a new one with given addr\n  const getOrCreate = (addr) => {\n    let existing = nodes.find((node) => node.addr === addr)\n    if (existing === undefined) {\n      existing = new Validator()\n      existing.addr = addr\n      existing.isBootstrap = ctx.state.bootstrapNodes.includes(addr)\n      nodes.push(existing)\n    }\n    return existing\n  }\n\n  validators.forEach((v) => {\n    const node = getOrCreate(v.address.local.toString())\n    node.setValidatorData(v)\n  })\n\n  delegations\n    .filter((d) => d.delegationsArray.length > 0)\n    .forEach((d) => {\n      const addr = d.delegationsArray[0].validator.local.toString()\n      const node = getOrCreate(addr)\n      node.stakedAmount = d.delegationTotal\n      node.totalStaked = node.whitelistAmount.add(d.delegationTotal)\n      node.allDelegations = d.delegationsArray\n    })\n  // use the address for those without names\n  nodes\n    .filter((n) => n.name === \"\")\n    .forEach((n) => (n.name = n.addr.replace(\"0x\", \"loom\")))\n\n  ctx.state.validators = nodes.filter((n) => !n.totalStaked.isZero())\n  ctx.state.loading.validators = false\n}\n\n/**\n * Loads delegator delegations (and rewards)\n * expects an account address is set in DPOSState.address\n * Called after each new election\n * UI shouldn't have to expose this action to the user\n * @param ctx\n * @see {dpos.reactions}\n */\nexport async function refreshDelegations(context: ActionContext) {\n  const { state } = context\n  const contract = state.contract!\n  state.loading.delegations = true\n  const response = await contract.checkAllDelegationsAsync(\n    plasmaModule.getAddress(),\n  )\n\n  state.delegations = response!.delegationsArray\n    .filter((d) => d.index > 0)\n    // filter \"ghost delegations\"\n    .filter((d) => false === (d.amount.isZero() && d.updateAmount.isZero()))\n    .map((item: IDelegation) => {\n      const d: Delegation = fromIDelegation(item, state.validators)\n      // add it to the corresponding validator so we avoid filtering later\n      d.validator.delegations.push(d)\n      return d\n    })\n\n  log(\"delegations\", plasmaModule.getAddress().toString(), response)\n  const rewards = response.delegationsArray\n    .filter((d) => d.index === 0)\n    .map((item) => fromIDelegation(item, state.validators))\n\n  state.rewards = rewards\n  log(\"rewards\", rewards.toString())\n  state.loading.delegations = false\n}\n\nexport function requestDelegation(state: DPOSState, validator: ICandidate) {\n  state.intent = \"delegate\"\n  state.delegation = fromIDelegation(\n    {\n      validator: validator.address,\n      delegator: plasmaModule.getAddress(),\n      index: -1,\n      amount: ZERO,\n      updateAmount: ZERO,\n      lockTime: -1,\n      lockTimeTier: -1,\n      state: -1,\n      referrer: \"\",\n    },\n    state.validators,\n  )\n  // set state thqt triggers pop\n}\n\nfunction clearRequest(state: DPOSState) {\n  state.intent = \"\"\n  state.delegation = null\n}\n\n/**\n * this should have been just a mutation but mutations\n * cannot access rootState...\n * @param state\n * @param d\n */\nexport function requestRedelegation(state: DPOSState, d: Delegation) {\n  state.intent = \"redelegate\"\n  // copy\n  state.delegation = { ...d }\n}\nexport function requestUndelegation(state: DPOSState, d: Delegation) {\n  state.intent = \"undelegate\"\n  // copy\n  state.delegation = { ...d }\n}\n\nexport async function delegate(context: ActionContext, delegation: Delegation) {\n  const { state } = context\n  const contract = state.contract!\n\n  feedback.setTask(i18n.t(\"feedback_msg.task.delegate\").toString())\n\n  const approved = await plasmaModule.approve({\n    symbol: \"LOOM\",\n    weiAmount: delegation.amount,\n    to: contract.address.local.toString(),\n  })\n\n  if (!approved) {\n    feedback.endTask()\n    return\n  }\n\n  try {\n    feedback.setStep(i18n.t(\"feedback_msg.step.delegating\").toString())\n    await context.state.contract!.delegateAsync(\n      delegation.validator.address,\n      delegation.amount,\n      delegation.lockTimeTier,\n      // delegation.referrer,\n    )\n    feedback.endTask()\n  } catch (error) {\n    feedback.endTask()\n    feedback.showError(i18n.t(\"feedback_msg.error.err_while_delegate\").toString())\n    console.error(error)\n    Sentry.withScope((scope) => {\n      scope.setExtra(\"delegations\", {\n        delegations: JSON.stringify({\n          amount: delegation.amount.toString(),\n          lockTimeTier: delegation.lockTimeTier,\n          validator: delegation.validator.address.local.toString(),\n        }),\n      })\n      Sentry.captureException(error)\n    })\n  }\n}\n\nfunction getReferrer() {\n  if (\"imToken\" in window ||\n    // @ts-ignore\n    (\"ethereum\" in window && window.ethereum.isImToken)\n  ) return \"imToken\"\n\n  // @ts-ignore\n  const web3 = window.web3\n  if (!web3) return \"\"\n\n  if (web3.isCobo) return \"cobo\"\n\n  if (web3.currentProvider.isTrust) return \"trust\"\n\n  if (web3.currentProvider.isGoWallet) return \"goWallet\"\n\n  if (web3.currentProvider.isAlphaWallet) return \"alphaWallet\"\n\n  if (web3.currentProvider.isStatus) return \"status\"\n\n  if (web3.currentProvider.isToshi) return \"coinbase\"\n\n  if (\"__CIPHER__\" in window) return \"cipher\"\n\n  if (web3.currentProvider.isMetaMask) return \"metamask\"\n\n  return \"\"\n}\n\n/**\n * -\n * @param context\n * @param delegation  where:\n *  - validator is the source validator\n *  - index is the source delegation index\n *  - updateValidator is the target validator\n *  - updateAmount is the amount to redelegate\n */\nexport async function redelegate(context: ActionContext, delegation: Delegation) {\n  feedback.setTask(i18n.t(\"feedback_msg.task.redelegating\").toString())\n  feedback.setStep(i18n.t(\"feedback_msg.step.scheduling_redelegate\").toString()) // amount validator\n  try {\n    await context.state.contract!.redelegateAsync(\n      delegation.validator.address,\n      delegation.updateValidator!.address,\n      delegation.updateAmount,\n      delegation.index,\n      // referer\n    )\n    feedback.endTask()\n  } catch (error) {\n    feedback.endTask()\n    feedback.showError(i18n.t(\"feedback_msg.error.err_while_redelegate\").toString())\n    Sentry.withScope((scope) => {\n      scope.setExtra(\"redelegations\", {\n        redelegations: JSON.stringify({\n          validator: delegation.validator.address.local.toString(),\n          updateValidator: delegation.updateValidator!.address.local.toString(),\n          updateAmount: delegation.updateAmount.toString(),\n          index: delegation.index,\n        }),\n      })\n      Sentry.captureException(error)\n    })\n  }\n}\n\nasync function consolidate(context: ActionContext, validator: ICandidate) {\n  feedback.setTask(i18n.t(\"feedback_msg.task.consolidating\").toString())\n  feedback.setStep(i18n.t(\"feedback_msg.step.consolidating_unlocked_on\").toString() + validator.name)\n  try {\n    await context.state.contract!.consolidateDelegations(validator.address)\n    feedback.endTask()\n  } catch (error) {\n    feedback.endTask()\n    feedback.showError(i18n.t(\"feedback_msg.error.err_while_redelegate\").toString())\n    Sentry.withScope((scope) => {\n      scope.setExtra(\"consolidate\", {\n        consolidate: JSON.stringify({\n          validator: validator.address.local.toString(),\n        }),\n      })\n      Sentry.captureException(error)\n    })\n  }\n}\n\n/**\n *\n * @param context\n * @param delegation   where:\n *  - validator is the source validator\n *  - index is the delegation index in the source validator\n *  - updateAmount is the amount to un-delegate\n */\nexport async function undelegate(context: ActionContext, delegation: Delegation) {\n  feedback.setTask(i18n.t(\"feedback_msg.task.undelegating\").toString())\n  feedback.setStep(i18n.t(\"feedback_msg.step.undelegating_from\").toString() + delegation.validator.name)\n  try {\n    await context.state.contract!.unbondAsync(\n      delegation.validator.address,\n      delegation.updateAmount,\n      delegation.index,\n    )\n    feedback.endTask()\n  } catch (error) {\n    feedback.endTask()\n    feedback.showError(i18n.t(\"feedback_msg.error.err_while_undelegate\").toString())\n    Sentry.withScope((scope) => {\n      scope.setExtra(\"undelegations\", {\n        undelegations: JSON.stringify({\n          validator: delegation.validator.address.local.toString(),\n          updateAmount: delegation.updateAmount.toString(),\n          index: delegation.index,\n        }),\n      })\n      Sentry.captureException(error)\n    })\n  }\n}\n\n/**\n * withdraw from gateway to ethereum account\n * @param symbol\n */\nasync function claimRewards(context: ActionContext) {\n  const contract = context.state.contract!\n  // limbo context.rootState.plasma.chainId\n  const limboValidator = Address.fromString(\n    context.rootState.plasma.chainId + \":0x\" + \"\".padEnd(40, \"0\"),\n  )\n  feedback.setTask(i18n.t(\"feedback_msg.task.claiming_reward\").toString())\n  feedback.setStep(i18n.t(\"feedback_msg.step.checking_reward\").toString())\n  const limboDelegations = await contract.checkDelegationAsync(\n    limboValidator,\n    plasmaModule.getAddress(),\n  )\n  if (limboDelegations!.delegationsArray.length > 0) {\n    feedback.setStep(i18n.t(\"feedback_msg.step.claiming_dpos_reward\").toString()) // add amount\n    await contract.unbondAsync(limboValidator, 0, 0)\n  }\n  try {\n    feedback.setStep(i18n.t(\"feedback_msg.step.claiming_reward\").toString()) // add amount\n    await contract.claimDelegatorRewardsAsync()\n    feedback.endTask()\n    feedback.showInfo(i18n.t(\"feedback_msg.info.reward_claimed\").toString())\n  } catch (error) {\n    feedback.endTask()\n    feedback.showError(i18n.t(\"feedback_msg.error.err_while_claiming\").toString())\n  }\n}\n\n/**\n * NOTE: make sure candiate.pubKey corresponds to rootState.plasma.address\n * @param context\n * @param candidate\n */\nexport async function registerCandidate(context: ActionContext, candidate: ICandidate) {\n  const balance = context.rootState.plasma.coins.LOOM.balance\n  const weiAmount = parseToWei(\"1250000\")\n\n  if (balance.lt(weiAmount)) {\n    feedback.showError(i18n.t(\"feedback_msg.error.insufficient_funds\").toString())\n    return\n  }\n\n  const token = \"LOOM\"\n  const addressString = context.rootState.dpos.contract!.address.local.toString()\n  const allowance = await plasmaModule.allowance({ token, spender: addressString })\n\n  if (allowance.lt(weiAmount)) {\n    try {\n      await plasmaModule.approve({ symbol: token, weiAmount, to: addressString })\n    } catch (err) {\n      console.error(err)\n      feedback.showError(i18n.t(\"feedback_msg.error.approval_failed\").toString())\n      return\n    }\n  }\n\n  try {\n    await context.state.contract!.registerCandidateAsync(\n      CryptoUtils.Uint8ArrayToB64(candidate.pubKey),\n      candidate.fee,\n      candidate.name,\n      candidate.description,\n      candidate.website,\n      candidate.whitelistLocktimeTier,\n    )\n\n    feedback.showSuccess(i18n.t(\"feedback_msg.success.register_success\").toString())\n  } catch (err) {\n    console.error(err)\n    feedback.showError(i18n.t(\"feedback_msg.error.err_while_register\").toString())\n  }\n}\n\nexport async function fetchAnalyticsData(context: ActionContext) {\n  const response = await Axios.get(context.rootState.dpos.analyticsUrl + \"/delegation/total?from_date&to_date\")\n  dposModule.setAnalyticsData(response.data.data)\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"5523fccdecbb1e28c84778a5e554feed2492211d"},"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/ledger.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/ledger.ts","statementMap":{"0":{"start":{"line":6,"column":29},"end":{"line":43,"column":1}},"1":{"start":{"line":14,"column":8},"end":{"line":14,"column":21}},"2":{"start":{"line":19,"column":8},"end":{"line":19,"column":43}},"3":{"start":{"line":22,"column":8},"end":{"line":25,"column":10}},"4":{"start":{"line":33,"column":8},"end":{"line":41,"column":13}},"5":{"start":{"line":36,"column":28},"end":{"line":41,"column":9}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":13},"end":{"line":15,"column":5}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":27},"end":{"line":20,"column":5}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":26},"end":{"line":26,"column":5}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":37},"end":{"line":42,"column":5}},"line":27},"4":{"name":"(anonymous_4)","decl":{"start":{"line":36,"column":14},"end":{"line":36,"column":15}},"loc":{"start":{"line":36,"column":28},"end":{"line":41,"column":9}},"line":36}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/ledger.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/ledger.ts"],"names":[],"mappings":"AAAA;;GAEG;AAYH,2CAA2C;AAC3C,OAAO,EAAE,KAAK,EAAS,MAAM,MAAM,CAAA;AAInC,MAAM,CAAC,MAAM,aAAa,GAA0C;IAClE,EAAE,EAAE,QAAQ;IACZ,IAAI,EAAE,QAAQ;IACd,UAAU,EAAE,KAAK;IACjB,cAAc,EAAE,IAAI;IACpB,OAAO,EAAE,IAAI;IACb,MAAM,EAAE,KAAK;IACb,MAAM;QACJ,OAAO,KAAK,CAAA;IACd,CAAC;IACD,wBAAwB;IACxB,cAAc,EAAE,IAAI,GAAG,EAAuB;IAC9C,KAAK,CAAC,cAAc;QAClB,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAA;IACpC,CAAC;IACD,IAAI,eAAe;QACjB,OAAO;YACL,EAAE,KAAK,EAAE,eAAe,EAAE,IAAI,EAAE,EAAE,EAAE;YACpC,EAAE,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,EAAE;SACnC,CAAA;IACH,CAAC;IACD,WAAW,CAAC,IAAY,EAAE,MAAc,EAAE,KAAa;QACrD,cAAc;QACd,oBAAoB;QACpB,+BAA+B;QAC/B,iCAAiC;QACjC,MAAM;QAEN,OAAO,KAAK,CACV;YACE,4CAA4C;YAC5C,4CAA4C;SAC7C,CAAC,GAAG,CACH,CAAC,OAAO,EAAE,EAAE,CACV,CAAC;YACC,OAAO;YACP,6DAA6D;YAC7D,IAAI,EAAE,CAAC;YACP,GAAG,EAAE,CAAC;SACS,CAAA,CACpB,CACF,CAAA;IACH,CAAC;CACF,CAAA","sourcesContent":["/**\n * @module loomrx.ethereum\n */\n\nimport Web3ProviderEngine from \"web3-provider-engine\"\n\nimport createLedgerSubprovider from \"@ledgerhq/web3-subprovider\"\nimport FetchSubprovider from \"web3-provider-engine/subproviders/fetch\"\n\nimport Eth from \"@ledgerhq/hw-app-eth\"\n\nimport { WalletType, MultiAccountWallet, AccountInfo } from \"../types\"\nimport { Provider, Web3Provider } from \"ethers/providers\"\n\n// import blockies from \"ethereum-blockies\"\nimport { merge, range } from \"rxjs\"\nimport { mergeMap, tap } from \"rxjs/operators\"\nimport { provider } from \"web3-providers\"\n\nexport const LedgerAdapter: any & WalletType & MultiAccountWallet = {\n  id: \"ledger\",\n  name: \"ledger\",\n  detectable: false,\n  isMultiAccount: true,\n  desktop: true,\n  mobile: false,\n  detect() {\n    return false\n  },\n  // cache loaded accounts\n  loadedAccounts: new Map<string, AccountInfo>(),\n  async createProvider() {\n    throw new Error(\"not inple;ented\")\n  },\n  get derivationPaths() {\n    return [\n      { label: \"Ledger legacy\", path: \"\" },\n      { label: \"ledger live\", path: \"\" },\n    ]\n  },\n  getAccounts(path: string, offset: number, count: number) {\n    // getAddress(\n    //     path: string,\n    //     boolDisplay ? : boolean,\n    //     boolChaincode ? : boolean,\n    //   )\n\n    return merge(\n      [\n        \"0x5AbFEc25f74Cd88437631a7731906932776356f9\",\n        \"0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe\",\n      ].map(\n        (address) =>\n          ({\n            address,\n            // identicon: blockies.create({ seed: address }).toDataURL(),\n            LOOM: 0,\n            ETH: 0,\n          } as AccountInfo),\n      ),\n    )\n  },\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"3451b30836d05b9e6f4e99c997578ba283e92c2c"},"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/metamask.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/metamask.ts","statementMap":{"0":{"start":{"line":9,"column":31},"end":{"line":28,"column":1}},"1":{"start":{"line":17,"column":8},"end":{"line":17,"column":47}},"2":{"start":{"line":20,"column":8},"end":{"line":25,"column":9}},"3":{"start":{"line":21,"column":12},"end":{"line":21,"column":35}},"4":{"start":{"line":23,"column":13},"end":{"line":25,"column":9}},"5":{"start":{"line":24,"column":12},"end":{"line":24,"column":34}},"6":{"start":{"line":26,"column":8},"end":{"line":26,"column":61}},"7":{"start":{"line":30,"column":4},"end":{"line":30,"column":28}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":32}},"9":{"start":{"line":37,"column":4},"end":{"line":37,"column":39}},"10":{"start":{"line":41,"column":21},"end":{"line":41,"column":36}},"11":{"start":{"line":42,"column":4},"end":{"line":48,"column":5}},"12":{"start":{"line":43,"column":8},"end":{"line":43,"column":32}},"13":{"start":{"line":46,"column":8},"end":{"line":46,"column":37}},"14":{"start":{"line":47,"column":8},"end":{"line":47,"column":33}},"15":{"start":{"line":49,"column":4},"end":{"line":69,"column":5}},"16":{"start":{"line":51,"column":8},"end":{"line":65,"column":11}},"17":{"start":{"line":54,"column":12},"end":{"line":56,"column":13}},"18":{"start":{"line":55,"column":16},"end":{"line":55,"column":23}},"19":{"start":{"line":57,"column":12},"end":{"line":64,"column":13}},"20":{"start":{"line":61,"column":16},"end":{"line":61,"column":60}},"21":{"start":{"line":62,"column":16},"end":{"line":62,"column":64}},"22":{"start":{"line":63,"column":16},"end":{"line":63,"column":46}},"23":{"start":{"line":68,"column":8},"end":{"line":68,"column":37}},"24":{"start":{"line":70,"column":4},"end":{"line":70,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":13},"end":{"line":18,"column":5}},"line":16},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":27},"end":{"line":27,"column":5}},"line":19},"2":{"name":"isLegacyApi","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":20}},"loc":{"start":{"line":29,"column":23},"end":{"line":31,"column":1}},"line":29},"3":{"name":"isCurrentApi","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":21}},"loc":{"start":{"line":32,"column":24},"end":{"line":34,"column":1}},"line":32},"4":{"name":"getLegacyApi","decl":{"start":{"line":35,"column":9},"end":{"line":35,"column":21}},"loc":{"start":{"line":35,"column":24},"end":{"line":38,"column":1}},"line":35},"5":{"name":"getCurrentApi","decl":{"start":{"line":39,"column":15},"end":{"line":39,"column":28}},"loc":{"start":{"line":39,"column":31},"end":{"line":71,"column":1}},"line":39},"6":{"name":"(anonymous_6)","decl":{"start":{"line":51,"column":39},"end":{"line":51,"column":40}},"loc":{"start":{"line":51,"column":53},"end":{"line":65,"column":9}},"line":51}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":46}},"type":"binary-expr","locations":[{"start":{"line":17,"column":15},"end":{"line":17,"column":29}},{"start":{"line":17,"column":33},"end":{"line":17,"column":46}}],"line":17},"1":{"loc":{"start":{"line":20,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":25,"column":9}},{"start":{"line":20,"column":8},"end":{"line":25,"column":9}}],"line":20},"2":{"loc":{"start":{"line":23,"column":13},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":23,"column":13},"end":{"line":25,"column":9}},{"start":{"line":23,"column":13},"end":{"line":25,"column":9}}],"line":23},"3":{"loc":{"start":{"line":54,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":54,"column":12},"end":{"line":56,"column":13}},{"start":{"line":54,"column":12},"end":{"line":56,"column":13}}],"line":54},"4":{"loc":{"start":{"line":57,"column":12},"end":{"line":64,"column":13}},"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":64,"column":13}},{"start":{"line":57,"column":12},"end":{"line":64,"column":13}}],"line":57},"5":{"loc":{"start":{"line":57,"column":16},"end":{"line":58,"column":74}},"type":"binary-expr","locations":[{"start":{"line":57,"column":16},"end":{"line":57,"column":44}},{"start":{"line":58,"column":16},"end":{"line":58,"column":74}}],"line":57}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/metamask.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/metamask.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AACH,OAAO,KAAK,MAAM,MAAM,iBAAiB,CAAA;AAIzC,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAA;AACjD,OAAO,EAAE,cAAc,EAAE,MAAM,IAAI,CAAA;AAEnC,MAAM,CAAC,MAAM,eAAe,GAAe;IACzC,EAAE,EAAE,UAAU;IACd,IAAI,EAAE,UAAU;IAChB,UAAU,EAAE,IAAI;IAChB,cAAc,EAAE,KAAK;IACrB,OAAO,EAAE,IAAI;IACb,MAAM,EAAE,KAAK;IACb,MAAM;QACJ,OAAO,YAAY,EAAE,IAAI,WAAW,EAAE,CAAA;IACxC,CAAC;IACD,KAAK,CAAC,cAAc;QAClB,IAAI,YAAY,EAAE,EAAE;YAClB,OAAO,aAAa,EAAE,CAAA;SACvB;aAAM,IAAI,WAAW,EAAE,EAAE;YACxB,OAAO,YAAY,EAAE,CAAA;SACtB;QACD,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAA;IACtD,CAAC;CACF,CAAA;AAED,SAAS,WAAW;IAClB,OAAO,MAAM,IAAI,MAAM,CAAA;AACzB,CAAC;AAED,SAAS,YAAY;IACnB,OAAO,UAAU,IAAI,MAAM,CAAA;AAC7B,CAAC;AAED,SAAS,YAAY;IACnB,aAAa;IACb,OAAO,MAAM,CAAC,IAAI,CAAC,eAAe,CAAA;AACpC,CAAC;AAED,KAAK,UAAU,aAAa;IAC1B,aAAa;IACb,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAA;IAChC,IAAI;QACF,MAAM,QAAQ,CAAC,MAAM,EAAE,CAAA;KACxB;IAAC,OAAO,GAAG,EAAE;QACZ,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAA;QAC5B,cAAc,CAAC,OAAO,EAAE,CAAA;KACzB;IAED,IAAI;QACF,gCAAgC;QAChC,QAAQ,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC,QAAQ,EAAE,EAAE;YAC1C,oGAAoG;YACpG,aAAa;YACb,IAAI,MAAM,CAAC,0BAA0B,EAAE;gBACrC,OAAM;aACP;YACD,IAAI,cAAc,CAAC,KAAK,CAAC,OAAO;gBAC9B,cAAc,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE;gBAC5D,8CAA8C;gBAC9C,oCAAoC;gBACpC,YAAY,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAA;gBAC3C,cAAc,CAAC,KAAK,CAAC,mBAAmB,GAAG,IAAI,CAAA;gBAC/C,QAAQ,CAAC,kBAAkB,EAAE,CAAA;aAC9B;QACH,CAAC,CAAC,CAAA;KACH;IAAC,OAAO,GAAG,EAAE;QACZ,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAA;KAC7B;IAED,OAAO,QAAQ,CAAA;AACjB,CAAC","sourcesContent":["/**\n * basically a bunch of wrappers/facades for the contracts calls\n * @module loomrx.ethereum\n * @preferred\n */\nimport * as Sentry from \"@sentry/browser\"\n\nimport { WalletType } from \"../types\"\nimport { provider } from \"web3-providers\"\nimport { feedbackModule } from \"@/feedback/store\"\nimport { ethereumModule } from \"..\"\n\nexport const MetaMaskAdapter: WalletType = {\n  id: \"netamask\",\n  name: \"Metamask\",\n  detectable: true,\n  isMultiAccount: false,\n  desktop: true,\n  mobile: false,\n  detect() {\n    return isCurrentApi() || isLegacyApi()\n  },\n  async createProvider() {\n    if (isCurrentApi()) {\n      return getCurrentApi()\n    } else if (isLegacyApi()) {\n      return getLegacyApi()\n    }\n    throw new Error(\"no Metamask installation detected\")\n  },\n}\n\nfunction isLegacyApi() {\n  return \"web3\" in window\n}\n\nfunction isCurrentApi() {\n  return \"ethereum\" in window\n}\n\nfunction getLegacyApi(): Promise<provider> {\n  // @ts-ignore\n  return window.web3.currentProvider\n}\n\nasync function getCurrentApi(): Promise<provider> {\n  // @ts-ignore\n  const ethereum = window.ethereum\n  try {\n    await ethereum.enable()\n  } catch (err) {\n    Sentry.captureException(err)\n    feedbackModule.endTask()\n  }\n\n  try {\n    // The following throws on Trust\n    ethereum.on(\"accountsChanged\", (accounts) => {\n      // TODO: this is to resolve a bug with mismatched receipts, once all users are fixed, please remove.\n      // @ts-ignore\n      if (window.resolvingMismatchedReceipt) {\n        return\n      }\n      if (ethereumModule.state.address &&\n        ethereumModule.state.address.toLowerCase() !== accounts[0]) {\n        // Remove any reference to past withdrawals as\n        // it is bound to a specific address\n        localStorage.removeItem(\"lastWithdrawTime\")\n        ethereumModule.state.metamaskChangeAlert = true\n        ethereum.removeAllListeners()\n      }\n    })\n  } catch (err) {\n    Sentry.captureException(err)\n  }\n\n  return ethereum\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"f25e4d0b4381feb8b844297141f99dea692bf15e"},"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/mutations.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/mutations.ts","statementMap":{"0":{"start":{"line":2,"column":4},"end":{"line":2,"column":61}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":51}},"2":{"start":{"line":8,"column":4},"end":{"line":8,"column":32}},"3":{"start":{"line":11,"column":4},"end":{"line":11,"column":42}},"4":{"start":{"line":14,"column":4},"end":{"line":14,"column":45}},"5":{"start":{"line":17,"column":16},"end":{"line":17,"column":28}},"6":{"start":{"line":18,"column":18},"end":{"line":18,"column":40}},"7":{"start":{"line":19,"column":4},"end":{"line":19,"column":47}},"8":{"start":{"line":22,"column":16},"end":{"line":22,"column":44}},"9":{"start":{"line":23,"column":4},"end":{"line":23,"column":42}},"10":{"start":{"line":24,"column":4},"end":{"line":24,"column":27}},"11":{"start":{"line":25,"column":4},"end":{"line":25,"column":72}},"12":{"start":{"line":28,"column":18},"end":{"line":28,"column":46}},"13":{"start":{"line":29,"column":4},"end":{"line":30,"column":26}},"14":{"start":{"line":30,"column":8},"end":{"line":30,"column":26}},"15":{"start":{"line":31,"column":4},"end":{"line":31,"column":27}},"16":{"start":{"line":32,"column":4},"end":{"line":32,"column":72}},"17":{"start":{"line":35,"column":4},"end":{"line":35,"column":23}}},"fnMap":{"0":{"name":"fetchUserData","decl":{"start":{"line":1,"column":9},"end":{"line":1,"column":22}},"loc":{"start":{"line":1,"column":32},"end":{"line":3,"column":1}},"line":1},"1":{"name":"setBalance","decl":{"start":{"line":4,"column":16},"end":{"line":4,"column":26}},"loc":{"start":{"line":4,"column":41},"end":{"line":6,"column":1}},"line":4},"2":{"name":"setBlockNumber","decl":{"start":{"line":7,"column":16},"end":{"line":7,"column":30}},"loc":{"start":{"line":7,"column":47},"end":{"line":9,"column":1}},"line":7},"3":{"name":"setLatestWithdrawalBlock","decl":{"start":{"line":10,"column":16},"end":{"line":10,"column":40}},"loc":{"start":{"line":10,"column":57},"end":{"line":12,"column":1}},"line":10},"4":{"name":"setClaimedReceiptHasExpired","decl":{"start":{"line":13,"column":16},"end":{"line":13,"column":43}},"loc":{"start":{"line":13,"column":60},"end":{"line":15,"column":1}},"line":13},"5":{"name":"initUserData","decl":{"start":{"line":16,"column":16},"end":{"line":16,"column":28}},"loc":{"start":{"line":16,"column":45},"end":{"line":20,"column":1}},"line":16},"6":{"name":"setUserData","decl":{"start":{"line":21,"column":16},"end":{"line":21,"column":27}},"loc":{"start":{"line":21,"column":44},"end":{"line":26,"column":1}},"line":21},"7":{"name":"deleteUserData","decl":{"start":{"line":27,"column":16},"end":{"line":27,"column":30}},"loc":{"start":{"line":27,"column":43},"end":{"line":33,"column":1}},"line":27},"8":{"name":"clearHistory","decl":{"start":{"line":34,"column":16},"end":{"line":34,"column":28}},"loc":{"start":{"line":34,"column":36},"end":{"line":36,"column":1}},"line":34}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":2,"column":59}},"type":"binary-expr","locations":[{"start":{"line":2,"column":22},"end":{"line":2,"column":51}},{"start":{"line":2,"column":55},"end":{"line":2,"column":59}}],"line":2},"1":{"loc":{"start":{"line":29,"column":4},"end":{"line":30,"column":26}},"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":30,"column":26}},{"start":{"line":29,"column":4},"end":{"line":30,"column":26}}],"line":29}},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/mutations.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/mutations.ts"],"names":[],"mappings":"AAIA,SAAS,aAAa,CAAC,OAAe;IACpC,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,CAAA;AAC1D,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,KAAoB,EAAE,KAAY;IAC3D,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,SAAS,CAAA;AAChD,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,KAAoB,EAAE,OAAe;IAClE,KAAK,CAAC,WAAW,GAAG,OAAO,CAAA;AAC7B,CAAC;AAED,MAAM,UAAU,wBAAwB,CAAC,KAAoB,EAAE,OAAe;IAC5E,KAAK,CAAC,qBAAqB,GAAG,OAAO,CAAA;AACvC,CAAC;AAED,MAAM,UAAU,2BAA2B,CAAC,KAAoB,EAAE,OAAgB;IAChF,KAAK,CAAC,wBAAwB,GAAG,OAAO,CAAA;AAC1C,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,KAAoB,EAAE,OAAe;IAChE,MAAM,GAAG,GAAG,IAAI,MAAM,EAAE,CAAA;IACxB,MAAM,KAAK,GAAG,aAAa,CAAC,OAAO,CAAC,CAAA;IACpC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,CAAA;AAC5C,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,KAAoB,EAAE,OAA6B;IAC7E,IAAI,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;IACxC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAA;IACrC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAA;IACtB,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAA;AACrE,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,KAAoB,EAAE,GAAW;IAC9D,MAAM,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;IAC1C,IAAI,KAAK,CAAC,GAAG,CAAC;QAAE,OAAO,KAAK,CAAC,GAAG,CAAC,CAAA;IACjC,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAA;IACtB,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAA;AACrE,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,KAAoB;IAC/C,KAAK,CAAC,OAAO,GAAG,EAAE,CAAA;AACpB,CAAC","sourcesContent":["import { EthereumState } from \"./types\"\nimport BN from \"bn.js\"\nimport { Funds } from \"@/types\"\n\nfunction fetchUserData(address: string) {\n  return JSON.parse(localStorage.getItem(address) || \"{}\")\n}\n\nexport function setBalance(state: EthereumState, funds: Funds) {\n  state.balances[funds.symbol] = funds.weiAmount\n}\n\nexport function setBlockNumber(state: EthereumState, payload: number) {\n  state.blockNumber = payload\n}\n\nexport function setLatestWithdrawalBlock(state: EthereumState, payload: number) {\n  state.latestWithdrawalBlock = payload\n}\n\nexport function setClaimedReceiptHasExpired(state: EthereumState, payload: boolean) {\n  state.claimedReceiptHasExpired = payload\n}\n\nexport function initUserData(state: EthereumState, address: string) {\n  const tmp = new Object()\n  const cache = fetchUserData(address)\n  state.userData = Object.assign(tmp, cache)\n}\n\nexport function setUserData(state: EthereumState, payload: {[key: string]: any}) {\n  let cache = fetchUserData(state.address)\n  cache = Object.assign(cache, payload)\n  state.userData = cache\n  localStorage.setItem(state.address, JSON.stringify(state.userData))\n}\n\nexport function deleteUserData(state: EthereumState, key: string) {\n  const cache = fetchUserData(state.address)\n  if (cache[key]) delete cache[key]\n  state.userData = cache\n  localStorage.setItem(state.address, JSON.stringify(state.userData))\n}\n\nexport function clearHistory(state: EthereumState) {\n  state.history = []\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"6b8c838f6abcbc484482e4a69bb41b5049f07ee9"},"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/portis.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/portis.ts","statementMap":{"0":{"start":{"line":2,"column":29},"end":{"line":22,"column":1}},"1":{"start":{"line":10,"column":8},"end":{"line":10,"column":20}},"2":{"start":{"line":13,"column":20},"end":{"line":13,"column":68}},"3":{"start":{"line":14,"column":20},"end":{"line":14,"column":36}},"4":{"start":{"line":16,"column":23},"end":{"line":16,"column":43}},"5":{"start":{"line":17,"column":8},"end":{"line":17,"column":28}},"6":{"start":{"line":18,"column":8},"end":{"line":20,"column":11}},"7":{"start":{"line":19,"column":12},"end":{"line":19,"column":59}},"8":{"start":{"line":19,"column":33},"end":{"line":19,"column":57}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":13},"end":{"line":11,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":33},"end":{"line":21,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":27},"end":{"line":18,"column":28}},"loc":{"start":{"line":18,"column":48},"end":{"line":20,"column":9}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":19,"column":27},"end":{"line":19,"column":28}},"loc":{"start":{"line":19,"column":33},"end":{"line":19,"column":57}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":20},"end":{"line":13,"column":68}},"type":"cond-expr","locations":[{"start":{"line":13,"column":47},"end":{"line":13,"column":56}},{"start":{"line":13,"column":59},"end":{"line":13,"column":68}}],"line":13}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/portis.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/portis.ts"],"names":[],"mappings":"AAIA,OAAO,MAAM,MAAM,cAAc,CAAA;AAGjC,MAAM,CAAC,MAAM,aAAa,GAAe;IACvC,EAAE,EAAE,QAAQ;IACZ,IAAI,EAAE,QAAQ;IACd,UAAU,EAAE,IAAI;IAChB,cAAc,EAAE,KAAK;IACrB,OAAO,EAAE,IAAI;IACb,MAAM,EAAE,IAAI;IACZ,MAAM;QACJ,OAAO,IAAI,CAAA;IACb,CAAC;IACD,KAAK,CAAC,cAAc,CAAC,MAAsB;QACzC,MAAM,GAAG,GAAG,MAAM,CAAC,SAAS,KAAK,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAA;QAC5D,MAAM,GAAG,GAAG,MAAM,CAAC,SAAU,CAAA;QAC7B,0CAA0C;QAC1C,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;QACnC,MAAM,CAAC,UAAU,EAAE,CAAA;QACnB,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACrC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAA;QAChD,CAAC,CAAC,CAAA;IACJ,CAAC;CACF,CAAA","sourcesContent":["import { ethers } from \"ethers\"\n\nimport { WalletType, EthereumConfig } from \"../types\"\n\nimport Portis from \"@portis/web3\"\nimport Web3 from \"web3\"\n\nexport const PortisAdapter: WalletType = {\n  id: \"portis\",\n  name: \"Portis\",\n  detectable: true,\n  isMultiAccount: false,\n  desktop: true,\n  mobile: true,\n  detect() {\n    return true\n  },\n  async createProvider(config: EthereumConfig) {\n    const net = config.networkId === \"1\" ? \"mainnet\" : \"rinkeby\"\n    const key = config.portisKey!\n    // dappID and network will be change later\n    const portis = new Portis(key, net)\n    portis.showPortis()\n    return new Promise((resolve, reject) => {\n      portis.onLogin(() => resolve(portis.provider))\n    })\n  },\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"406a1c47a7187a234b15e3d8b015919f828204ee"},"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/fortmatic.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/fortmatic.ts","statementMap":{"0":{"start":{"line":2,"column":32},"end":{"line":21,"column":1}},"1":{"start":{"line":10,"column":8},"end":{"line":10,"column":20}},"2":{"start":{"line":13,"column":20},"end":{"line":13,"column":68}},"3":{"start":{"line":14,"column":20},"end":{"line":14,"column":38}},"4":{"start":{"line":16,"column":19},"end":{"line":16,"column":42}},"5":{"start":{"line":17,"column":25},"end":{"line":17,"column":41}},"6":{"start":{"line":18,"column":8},"end":{"line":18,"column":32}},"7":{"start":{"line":19,"column":8},"end":{"line":19,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":13},"end":{"line":11,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":33},"end":{"line":20,"column":5}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":20},"end":{"line":13,"column":68}},"type":"cond-expr","locations":[{"start":{"line":13,"column":47},"end":{"line":13,"column":56}},{"start":{"line":13,"column":59},"end":{"line":13,"column":68}}],"line":13}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"f":{"0":0,"1":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/fortmatic.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/fortmatic.ts"],"names":[],"mappings":"AACA,OAAO,SAAS,MAAM,WAAW,CAAA;AAEjC,MAAM,CAAC,MAAM,gBAAgB,GAAe;IAC1C,EAAE,EAAE,WAAW;IACf,IAAI,EAAE,WAAW;IACjB,UAAU,EAAE,IAAI;IAChB,cAAc,EAAE,KAAK;IACrB,OAAO,EAAE,IAAI;IACb,MAAM,EAAE,IAAI;IACZ,MAAM;QACJ,OAAO,IAAI,CAAA;IACb,CAAC;IACD,KAAK,CAAC,cAAc,CAAC,MAAsB;QACzC,MAAM,GAAG,GAAG,MAAM,CAAC,SAAS,KAAK,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAA;QAC5D,MAAM,GAAG,GAAG,MAAM,CAAC,WAAW,CAAA;QAC9B,0CAA0C;QAC1C,MAAM,EAAE,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;QAClC,MAAM,QAAQ,GAAG,EAAE,CAAC,WAAW,EAAE,CAAA;QACjC,MAAM,QAAQ,CAAC,MAAM,EAAE,CAAA;QACvB,OAAO,QAAQ,CAAA;IACjB,CAAC;CACF,CAAA","sourcesContent":["import { WalletType, EthereumConfig } from \"../types\"\nimport Fortmatic from \"fortmatic\"\n\nexport const FortmaticAdapter: WalletType = {\n  id: \"fortmatic\",\n  name: \"Fortmatic\",\n  detectable: true,\n  isMultiAccount: false,\n  desktop: true,\n  mobile: true,\n  detect() {\n    return true\n  },\n  async createProvider(config: EthereumConfig) {\n    const net = config.networkId === \"1\" ? \"mainnet\" : \"rinkeby\"\n    const key = config.formaticKey\n    // dappID and network will be change later\n    const fm = new Fortmatic(key, net)\n    const provider = fm.getProvider()\n    await provider.enable()\n    return provider\n  },\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"bbe7c356ddc7c04a6d242d150de7ee0935149a34"},"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/test-wallet.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/test-wallet.ts","statementMap":{"0":{"start":{"line":7,"column":33},"end":{"line":21,"column":1}},"1":{"start":{"line":15,"column":8},"end":{"line":15,"column":20}},"2":{"start":{"line":18,"column":25},"end":{"line":18,"column":165}},"3":{"start":{"line":19,"column":8},"end":{"line":19,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":13},"end":{"line":16,"column":5}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":27},"end":{"line":20,"column":5}},"line":17}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/test-wallet.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/test-wallet.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAIH,OAAO,kBAAkB,MAAM,6BAA6B,CAAA;AAE5D,MAAM,CAAC,MAAM,iBAAiB,GAAe;IAC3C,EAAE,EAAE,aAAa;IACjB,IAAI,EAAE,aAAa;IACnB,UAAU,EAAE,IAAI;IAChB,cAAc,EAAE,KAAK;IACrB,OAAO,EAAE,IAAI;IACb,MAAM,EAAE,KAAK;IACb,MAAM;QACJ,OAAO,IAAI,CAAA;IACb,CAAC;IACD,KAAK,CAAC,cAAc;QAClB,MAAM,QAAQ,GAAG,IAAI,kBAAkB,CACrC,kEAAkE,EAClE,gDAAgD,CAAC,CAAA;QAEnD,OAAO,QAAQ,CAAA;IACjB,CAAC;CACF,CAAA","sourcesContent":["/**\n * basically a bunch of wrappers/facades for the contracts calls\n * @module loomrx.ethereum\n * @preferred\n */\n\nimport { WalletType } from \"../types\"\nimport { ethereumModule } from \"..\"\nimport PrivateKeyProvider from \"truffle-privatekey-provider\"\n\nexport const TestWalletAdapter: WalletType = {\n  id: \"test_wallet\",\n  name: \"Test Wallet\",\n  detectable: true,\n  isMultiAccount: false,\n  desktop: true,\n  mobile: false,\n  detect() {\n    return true\n  },\n  async createProvider() {\n    const provider = new PrivateKeyProvider(\n      \"348ce564d427a3311b6536bbcff9390d69395b06ed6c486954e971d960fe8709\",\n      \"https://rinkeby.infura.io/5Ic91y0T9nLh6qUg33K0\")\n\n    return provider\n  },\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"6cd62dfc4bcb4de3e127d35623a155de15434f9b"},"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/walletconnect.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/walletconnect.ts","statementMap":{"0":{"start":{"line":3,"column":22},"end":{"line":15,"column":1}},"1":{"start":{"line":16,"column":36},"end":{"line":48,"column":1}},"2":{"start":{"line":24,"column":8},"end":{"line":24,"column":20}},"3":{"start":{"line":27,"column":20},"end":{"line":27,"column":68}},"4":{"start":{"line":28,"column":25},"end":{"line":32,"column":10}},"5":{"start":{"line":33,"column":8},"end":{"line":33,"column":87}},"6":{"start":{"line":33,"column":49},"end":{"line":33,"column":85}},"7":{"start":{"line":34,"column":8},"end":{"line":34,"column":83}},"8":{"start":{"line":34,"column":47},"end":{"line":34,"column":81}},"9":{"start":{"line":35,"column":8},"end":{"line":35,"column":74}},"10":{"start":{"line":35,"column":48},"end":{"line":35,"column":72}},"11":{"start":{"line":37,"column":8},"end":{"line":44,"column":11}},"12":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"13":{"start":{"line":39,"column":16},"end":{"line":39,"column":28}},"14":{"start":{"line":41,"column":12},"end":{"line":41,"column":57}},"15":{"start":{"line":42,"column":12},"end":{"line":42,"column":45}},"16":{"start":{"line":43,"column":12},"end":{"line":43,"column":55}},"17":{"start":{"line":45,"column":8},"end":{"line":45,"column":32}},"18":{"start":{"line":46,"column":8},"end":{"line":46,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":13},"end":{"line":25,"column":5}},"line":23},"1":{"name":"(anonymous_1)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":33},"end":{"line":47,"column":5}},"line":26},"2":{"name":"(anonymous_2)","decl":{"start":{"line":33,"column":36},"end":{"line":33,"column":37}},"loc":{"start":{"line":33,"column":49},"end":{"line":33,"column":85}},"line":33},"3":{"name":"(anonymous_3)","decl":{"start":{"line":34,"column":38},"end":{"line":34,"column":39}},"loc":{"start":{"line":34,"column":47},"end":{"line":34,"column":81}},"line":34},"4":{"name":"(anonymous_4)","decl":{"start":{"line":35,"column":39},"end":{"line":35,"column":40}},"loc":{"start":{"line":35,"column":48},"end":{"line":35,"column":72}},"line":35},"5":{"name":"(anonymous_5)","decl":{"start":{"line":37,"column":37},"end":{"line":37,"column":38}},"loc":{"start":{"line":37,"column":57},"end":{"line":44,"column":9}},"line":37}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":68}},"type":"cond-expr","locations":[{"start":{"line":27,"column":47},"end":{"line":27,"column":56}},{"start":{"line":27,"column":59},"end":{"line":27,"column":68}}],"line":27},"1":{"loc":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},{"start":{"line":38,"column":12},"end":{"line":40,"column":13}}],"line":38}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/walletconnect.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/wallets/walletconnect.ts"],"names":[],"mappings":"AAEA,OAAO,qBAAqB,MAAM,8BAA8B,CAAA;AAChE,OAAO,wBAAwB,MAAM,6BAA6B,CAAA;AAElE,MAAM,aAAa,GAAG;IACpB,eAAe,EAAE,IAAI;IACrB,QAAQ,EAAE,KAAK;IACf,SAAS,EAAE,KAAK;IAChB,OAAO,EAAE,CAAC;IACV,SAAS,EAAE,KAAK;IAChB,cAAc,EAAE,KAAK;IACrB,GAAG,EAAE,EAAE;IACP,QAAQ,EAAE,EAAE;IACZ,OAAO,EAAE,EAAE;IACX,MAAM,EAAE,IAAI;IACZ,MAAM,EAAE,EAAE;CACX,CAAA;AAED,MAAM,CAAC,MAAM,oBAAoB,GAAe;IAC9C,EAAE,EAAE,eAAe;IACnB,IAAI,EAAE,eAAe;IACrB,UAAU,EAAE,IAAI;IAChB,cAAc,EAAE,KAAK;IACrB,OAAO,EAAE,IAAI;IACb,MAAM,EAAE,IAAI;IACZ,MAAM;QACJ,OAAO,IAAI,CAAA;IACb,CAAC;IACD,KAAK,CAAC,cAAc,CAAC,MAAsB;QAEzC,MAAM,GAAG,GAAG,MAAM,CAAC,SAAS,KAAK,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAA;QAE5D,MAAM,QAAQ,GAAG,IAAI,qBAAqB,CAAC;YACzC,MAAM,EAAE,kCAAkC;YAC1C,gDAAgD;YAChD,QAAQ,EAAE,kCAAkC;SAC7C,CAAC,CAAA;QACF,QAAQ,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC,CAAA;QAC9E,QAAQ,CAAC,EAAE,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAA;QAC1E,QAAQ,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAA;QACjE,uCAAuC;QACvC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC9C,IAAI,KAAK,EAAE;gBACT,MAAM,KAAK,CAAA;aACZ;YACD,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAA;YAC5C,wBAAwB,CAAC,KAAK,EAAE,CAAA;YAChC,QAAQ,CAAC,WAAW,CAAC,EAAC,GAAG,aAAa,EAAC,CAAC,CAAA;QAC1C,CAAC,CAAC,CAAA;QAEF,MAAM,QAAQ,CAAC,MAAM,EAAE,CAAA;QACvB,OAAO,QAAQ,CAAA;IACjB,CAAC;CACF,CAAA","sourcesContent":["import { WalletType, EthereumConfig } from \"../types\"\n\nimport WalletConnectProvider from \"@walletconnect/web3-provider\"\nimport WalletConnectQRCodeModal from \"@walletconnect/qrcode-modal\"\n\nconst INITIAL_STATE = {\n  walletConnector: null,\n  fetching: false,\n  connected: false,\n  chainId: 1,\n  showModal: false,\n  pendingRequest: false,\n  uri: \"\",\n  accounts: [],\n  address: \"\",\n  result: null,\n  assets: [],\n}\n\nexport const WalletConnectAdapter: WalletType = {\n  id: \"walletconnect\",\n  name: \"WalletConnect\",\n  detectable: true,\n  isMultiAccount: false,\n  desktop: true,\n  mobile: true,\n  detect() {\n    return true\n  },\n  async createProvider(config: EthereumConfig) {\n\n    const net = config.networkId === \"1\" ? \"mainnet\" : \"rinkeby\"\n\n    const provider = new WalletConnectProvider({\n      bridge: \"https://bridge.walletconnect.org\",\n      // infuraId: \"5Ic91y0T9nLh6qUg33K0\", // Required\n      infuraId: \"44ad2034a545495ca22dda2a4d50feba\",\n    })\n    provider.on(\"chainChanged\", (chainId) => console.log(\"chainChanged\", chainId))\n    provider.on(\"networkChanged\", (net) => console.log(\"networkChanged\", net))\n    provider.on(\"accountsChanged\", (acc) => window.location.reload())\n    // wc is WalletConnect class in library\n    provider.wc.on('disconnect', (error, payload) => {\n      if (error) {\n        throw error\n      }\n      console.log(\"User cancel a sign-in request\")\n      WalletConnectQRCodeModal.close()\n      provider.updateState({...INITIAL_STATE})\n    })\n\n    await provider.enable()\n    return provider\n  },\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"fee9de77acfb34e7ebcb4c70d24d0232b93b1304"},"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/index.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/index.ts","statementMap":{"0":{"start":{"line":22,"column":12},"end":{"line":22,"column":34}},"1":{"start":{"line":23,"column":13},"end":{"line":23,"column":24}},"2":{"start":{"line":24,"column":16},"end":{"line":31,"column":2}},"3":{"start":{"line":32,"column":21},"end":{"line":69,"column":1}},"4":{"start":{"line":72,"column":16},"end":{"line":72,"column":66}},"5":{"start":{"line":73,"column":20},"end":{"line":73,"column":35}},"6":{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},"7":{"start":{"line":76,"column":8},"end":{"line":76,"column":38}},"8":{"start":{"line":78,"column":4},"end":{"line":78,"column":13}},"9":{"start":{"line":81,"column":30},"end":{"line":109,"column":1}},"10":{"start":{"line":83,"column":8},"end":{"line":83,"column":29}},"11":{"start":{"line":86,"column":8},"end":{"line":86,"column":20}},"12":{"start":{"line":111,"column":23},"end":{"line":111,"column":32}},"13":{"start":{"line":113,"column":4},"end":{"line":113,"column":37}},"14":{"start":{"line":116,"column":19},"end":{"line":116,"column":42}},"15":{"start":{"line":117,"column":4},"end":{"line":121,"column":5}},"16":{"start":{"line":118,"column":8},"end":{"line":118,"column":63}},"17":{"start":{"line":120,"column":8},"end":{"line":120,"column":15}},"18":{"start":{"line":122,"column":4},"end":{"line":122,"column":42}},"19":{"start":{"line":123,"column":4},"end":{"line":137,"column":5}},"20":{"start":{"line":124,"column":8},"end":{"line":124,"column":86}},"21":{"start":{"line":125,"column":8},"end":{"line":125,"column":86}},"22":{"start":{"line":126,"column":8},"end":{"line":133,"column":11}},"23":{"start":{"line":128,"column":42},"end":{"line":128,"column":82}},"24":{"start":{"line":130,"column":12},"end":{"line":130,"column":43}},"25":{"start":{"line":131,"column":12},"end":{"line":131,"column":33}},"26":{"start":{"line":132,"column":12},"end":{"line":132,"column":98}},"27":{"start":{"line":136,"column":8},"end":{"line":136,"column":46}},"28":{"start":{"line":140,"column":4},"end":{"line":140,"column":31}},"29":{"start":{"line":141,"column":4},"end":{"line":141,"column":31}},"30":{"start":{"line":142,"column":4},"end":{"line":142,"column":23}},"31":{"start":{"line":143,"column":19},"end":{"line":143,"column":39}},"32":{"start":{"line":144,"column":20},"end":{"line":144,"column":45}},"33":{"start":{"line":145,"column":4},"end":{"line":145,"column":34}},"34":{"start":{"line":146,"column":4},"end":{"line":146,"column":36}},"35":{"start":{"line":149,"column":21},"end":{"line":149,"column":43}},"36":{"start":{"line":150,"column":25},"end":{"line":152,"column":49}},"37":{"start":{"line":153,"column":4},"end":{"line":153,"column":34}},"38":{"start":{"line":154,"column":4},"end":{"line":154,"column":32}},"39":{"start":{"line":155,"column":4},"end":{"line":155,"column":36}},"40":{"start":{"line":158,"column":4},"end":{"line":158,"column":26}},"41":{"start":{"line":159,"column":4},"end":{"line":159,"column":33}},"42":{"start":{"line":161,"column":4},"end":{"line":161,"column":16}},"43":{"start":{"line":164,"column":4},"end":{"line":164,"column":26}},"44":{"start":{"line":172,"column":4},"end":{"line":181,"column":5}},"45":{"start":{"line":173,"column":21},"end":{"line":173,"column":58}},"46":{"start":{"line":174,"column":8},"end":{"line":180,"column":11}},"47":{"start":{"line":182,"column":4},"end":{"line":186,"column":5}},"48":{"start":{"line":183,"column":18},"end":{"line":183,"column":66}},"49":{"start":{"line":184,"column":8},"end":{"line":184,"column":63}},"50":{"start":{"line":185,"column":8},"end":{"line":185,"column":15}},"51":{"start":{"line":187,"column":21},"end":{"line":187,"column":82}},"52":{"start":{"line":188,"column":22},"end":{"line":188,"column":49}},"53":{"start":{"line":190,"column":4},"end":{"line":190,"column":43}},"54":{"start":{"line":191,"column":4},"end":{"line":191,"column":29}},"55":{"start":{"line":192,"column":4},"end":{"line":205,"column":8}},"56":{"start":{"line":199,"column":8},"end":{"line":199,"column":61}},"57":{"start":{"line":200,"column":8},"end":{"line":200,"column":69}},"58":{"start":{"line":201,"column":8},"end":{"line":201,"column":56}},"59":{"start":{"line":204,"column":8},"end":{"line":204,"column":34}},"60":{"start":{"line":213,"column":38},"end":{"line":213,"column":45}},"61":{"start":{"line":214,"column":21},"end":{"line":214,"column":89}},"62":{"start":{"line":215,"column":4},"end":{"line":220,"column":7}},"63":{"start":{"line":227,"column":38},"end":{"line":227,"column":45}},"64":{"start":{"line":228,"column":21},"end":{"line":228,"column":89}},"65":{"start":{"line":229,"column":15},"end":{"line":234,"column":6}},"66":{"start":{"line":235,"column":4},"end":{"line":235,"column":24}},"67":{"start":{"line":236,"column":4},"end":{"line":236,"column":14}},"68":{"start":{"line":239,"column":32},"end":{"line":239,"column":39}},"69":{"start":{"line":240,"column":21},"end":{"line":240,"column":82}},"70":{"start":{"line":241,"column":19},"end":{"line":246,"column":6}},"71":{"start":{"line":247,"column":4},"end":{"line":247,"column":37}},"72":{"start":{"line":250,"column":4},"end":{"line":250,"column":43}},"73":{"start":{"line":251,"column":25},"end":{"line":251,"column":81}},"74":{"start":{"line":252,"column":4},"end":{"line":252,"column":43}},"75":{"start":{"line":253,"column":4},"end":{"line":255,"column":5}},"76":{"start":{"line":254,"column":8},"end":{"line":254,"column":73}},"77":{"start":{"line":257,"column":21},"end":{"line":257,"column":66}},"78":{"start":{"line":258,"column":4},"end":{"line":258,"column":41}},"79":{"start":{"line":259,"column":20},"end":{"line":259,"column":41}},"80":{"start":{"line":260,"column":20},"end":{"line":260,"column":63}},"81":{"start":{"line":260,"column":26},"end":{"line":260,"column":63}},"82":{"start":{"line":262,"column":17},"end":{"line":267,"column":15}},"83":{"start":{"line":268,"column":20},"end":{"line":273,"column":15}},"84":{"start":{"line":274,"column":4},"end":{"line":274,"column":29}},"85":{"start":{"line":275,"column":4},"end":{"line":275,"column":32}},"86":{"start":{"line":276,"column":4},"end":{"line":276,"column":42}},"87":{"start":{"line":277,"column":4},"end":{"line":277,"column":20}},"88":{"start":{"line":280,"column":4},"end":{"line":280,"column":27}},"89":{"start":{"line":282,"column":25},"end":{"line":282,"column":29}},"90":{"start":{"line":284,"column":4},"end":{"line":286,"column":5}},"91":{"start":{"line":285,"column":8},"end":{"line":285,"column":41}},"92":{"start":{"line":287,"column":4},"end":{"line":291,"column":7}},"93":{"start":{"line":288,"column":28},"end":{"line":288,"column":59}},"94":{"start":{"line":289,"column":8},"end":{"line":289,"column":40}},"95":{"start":{"line":290,"column":8},"end":{"line":290,"column":51}}},"fnMap":{"0":{"name":"requireValue","decl":{"start":{"line":74,"column":9},"end":{"line":74,"column":21}},"loc":{"start":{"line":74,"column":39},"end":{"line":79,"column":1}},"line":74},"1":{"name":"(anonymous_1)","decl":{"start":{"line":82,"column":4},"end":{"line":82,"column":5}},"loc":{"start":{"line":82,"column":16},"end":{"line":84,"column":5}},"line":82},"2":{"name":"(anonymous_2)","decl":{"start":{"line":85,"column":4},"end":{"line":85,"column":5}},"loc":{"start":{"line":85,"column":15},"end":{"line":87,"column":5}},"line":85},"3":{"name":"getERC20","decl":{"start":{"line":112,"column":9},"end":{"line":112,"column":17}},"loc":{"start":{"line":112,"column":25},"end":{"line":114,"column":1}},"line":112},"4":{"name":"setWalletType","decl":{"start":{"line":115,"column":15},"end":{"line":115,"column":28}},"loc":{"start":{"line":115,"column":50},"end":{"line":138,"column":1}},"line":115},"5":{"name":"(anonymous_5)","decl":{"start":{"line":128,"column":18},"end":{"line":128,"column":19}},"loc":{"start":{"line":128,"column":42},"end":{"line":128,"column":82}},"line":128},"6":{"name":"(anonymous_6)","decl":{"start":{"line":129,"column":19},"end":{"line":129,"column":20}},"loc":{"start":{"line":129,"column":30},"end":{"line":133,"column":9}},"line":129},"7":{"name":"setProvider","decl":{"start":{"line":139,"column":15},"end":{"line":139,"column":26}},"loc":{"start":{"line":139,"column":39},"end":{"line":147,"column":1}},"line":139},"8":{"name":"setToExploreMode","decl":{"start":{"line":148,"column":15},"end":{"line":148,"column":31}},"loc":{"start":{"line":148,"column":50},"end":{"line":156,"column":1}},"line":148},"9":{"name":"setConfig","decl":{"start":{"line":157,"column":9},"end":{"line":157,"column":18}},"loc":{"start":{"line":157,"column":34},"end":{"line":162,"column":1}},"line":157},"10":{"name":"clearWalletType","decl":{"start":{"line":163,"column":9},"end":{"line":163,"column":24}},"loc":{"start":{"line":163,"column":32},"end":{"line":165,"column":1}},"line":163},"11":{"name":"refreshBalance","decl":{"start":{"line":171,"column":22},"end":{"line":171,"column":36}},"loc":{"start":{"line":171,"column":54},"end":{"line":206,"column":1}},"line":171},"12":{"name":"(anonymous_12)","decl":{"start":{"line":198,"column":14},"end":{"line":198,"column":15}},"loc":{"start":{"line":198,"column":28},"end":{"line":202,"column":5}},"line":198},"13":{"name":"(anonymous_13)","decl":{"start":{"line":203,"column":17},"end":{"line":203,"column":18}},"loc":{"start":{"line":203,"column":23},"end":{"line":205,"column":5}},"line":203},"14":{"name":"approve","decl":{"start":{"line":212,"column":22},"end":{"line":212,"column":29}},"loc":{"start":{"line":212,"column":48},"end":{"line":221,"column":1}},"line":212},"15":{"name":"transfer","decl":{"start":{"line":226,"column":22},"end":{"line":226,"column":30}},"loc":{"start":{"line":226,"column":49},"end":{"line":237,"column":1}},"line":226},"16":{"name":"allowance","decl":{"start":{"line":238,"column":22},"end":{"line":238,"column":31}},"loc":{"start":{"line":238,"column":50},"end":{"line":248,"column":1}},"line":238},"17":{"name":"initERC20","decl":{"start":{"line":249,"column":16},"end":{"line":249,"column":25}},"loc":{"start":{"line":249,"column":43},"end":{"line":278,"column":1}},"line":249},"18":{"name":"(anonymous_18)","decl":{"start":{"line":260,"column":20},"end":{"line":260,"column":21}},"loc":{"start":{"line":260,"column":26},"end":{"line":260,"column":63}},"line":260},"19":{"name":"clearERC20","decl":{"start":{"line":279,"column":16},"end":{"line":279,"column":26}},"loc":{"start":{"line":279,"column":29},"end":{"line":281,"column":1}},"line":279},"20":{"name":"pollLastBlockNumber","decl":{"start":{"line":283,"column":16},"end":{"line":283,"column":35}},"loc":{"start":{"line":283,"column":45},"end":{"line":292,"column":1}},"line":283},"21":{"name":"(anonymous_21)","decl":{"start":{"line":287,"column":51},"end":{"line":287,"column":52}},"loc":{"start":{"line":287,"column":63},"end":{"line":291,"column":5}},"line":287}},"branchMap":{"0":{"loc":{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},{"start":{"line":75,"column":4},"end":{"line":77,"column":5}}],"line":75},"1":{"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":37}},"type":"binary-expr","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":18}},{"start":{"line":75,"column":22},"end":{"line":75,"column":37}}],"line":75},"2":{"loc":{"start":{"line":117,"column":4},"end":{"line":121,"column":5}},"type":"if","locations":[{"start":{"line":117,"column":4},"end":{"line":121,"column":5}},{"start":{"line":117,"column":4},"end":{"line":121,"column":5}}],"line":117},"3":{"loc":{"start":{"line":123,"column":4},"end":{"line":137,"column":5}},"type":"if","locations":[{"start":{"line":123,"column":4},"end":{"line":137,"column":5}},{"start":{"line":123,"column":4},"end":{"line":137,"column":5}}],"line":123},"4":{"loc":{"start":{"line":150,"column":25},"end":{"line":152,"column":49}},"type":"cond-expr","locations":[{"start":{"line":151,"column":8},"end":{"line":151,"column":54}},{"start":{"line":152,"column":8},"end":{"line":152,"column":49}}],"line":150},"5":{"loc":{"start":{"line":172,"column":4},"end":{"line":181,"column":5}},"type":"if","locations":[{"start":{"line":172,"column":4},"end":{"line":181,"column":5}},{"start":{"line":172,"column":4},"end":{"line":181,"column":5}}],"line":172},"6":{"loc":{"start":{"line":182,"column":4},"end":{"line":186,"column":5}},"type":"if","locations":[{"start":{"line":182,"column":4},"end":{"line":186,"column":5}},{"start":{"line":182,"column":4},"end":{"line":186,"column":5}}],"line":182},"7":{"loc":{"start":{"line":253,"column":4},"end":{"line":255,"column":5}},"type":"if","locations":[{"start":{"line":253,"column":4},"end":{"line":255,"column":5}},{"start":{"line":253,"column":4},"end":{"line":255,"column":5}}],"line":253},"8":{"loc":{"start":{"line":284,"column":4},"end":{"line":286,"column":5}},"type":"if","locations":[{"start":{"line":284,"column":4},"end":{"line":286,"column":5}},{"start":{"line":284,"column":4},"end":{"line":286,"column":5}}],"line":284}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/index.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/ethereum/index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @module dpos-dashboard.ethereum\n */\nimport * as Sentry from \"@sentry/browser\"\n\nimport { ERC20 } from \"@/store/plasma/web3-contracts/ERC20\"\nimport { Transfer } from \"@/types\"\nimport BN from \"bn.js\"\nimport debug from \"debug\"\nimport ERC20ABI from \"loom-js/dist/mainnet-contracts/ERC20.json\"\nimport { BareActionContext, getStoreBuilder } from \"vuex-typex\"\nimport Web3 from \"web3\"\nimport {\n  EthereumConfig,\n  EthereumState,\n  HasEthereumState,\n  WalletType,\n} from \"./types\"\nimport { LedgerAdapter } from \"./wallets/ledger\"\nimport { MetaMaskAdapter } from \"./wallets/metamask\"\nimport { tokenService } from \"@/services/TokenService\"\nimport {\n  setBlockNumber,\n  setLatestWithdrawalBlock,\n  setClaimedReceiptHasExpired,\n  initUserData,\n  setUserData,\n  deleteUserData,\n  clearHistory,\n} from \"./mutations\"\nimport { provider } from \"web3-providers/types\"\nimport { feedbackModule } from \"@/feedback/store\"\nimport { getMetamaskSigner } from \"loom-js\"\nimport { timer, Subscription } from \"rxjs\"\nimport { i18n } from \"@/i18n\"\nimport { PortisAdapter } from \"./wallets/portis\"\nimport { FortmaticAdapter } from \"./wallets/fortmatic\"\nimport { TestWalletAdapter } from \"./wallets/test-wallet\"\nimport { WalletConnectAdapter } from \"./wallets/walletconnect\"\nimport Connector from \"@walletconnect/core\"\n\ndeclare type ActionContext = BareActionContext<EthereumState, HasEthereumState>\n\nconst log = debug(\"dash.ethereum\")\nconst ZERO = new BN(\"0\")\n\nconst wallets: Map<string, WalletType> = new Map([\n  [\"metamask\", MetaMaskAdapter],\n  [\"ledger\", LedgerAdapter],\n  [\"portis\", PortisAdapter],\n  [\"fortmatic\", FortmaticAdapter],\n  [\"test_wallet\", TestWalletAdapter],\n  [\"walletconnect\", WalletConnectAdapter],\n])\n\nconst initialState: EthereumState = {\n  networkId: \"\",\n  networkName: \"\",\n  chainId: \"\",\n  endpoint: \"\",\n  blockExplorer: \"\",\n  provider: null,\n  address: \"\",\n  signer: null,\n  walletType: \"\",\n  balances: {\n    ETH: ZERO,\n    LOOM: ZERO,\n  },\n  // not used\n  LOOM: {\n    contract: null,\n    balance: ZERO,\n    address: \"\",\n  },\n  coins: {\n    LOOM: {\n      balance: ZERO,\n      loading: true,\n      decimals: 18,\n    },\n  },\n  contracts: {},\n  blockNumber: 0,\n  // TODO move to gateway module\n  latestWithdrawalBlock: 0,\n  claimedReceiptHasExpired: false,\n  history: [],\n  metamaskChangeAlert: false,\n  userData: {\n    pendingWithdrawal: false,\n  },\n}\n\n// web3 instance\nlet web3: Web3 | null\n\nconst builder = getStoreBuilder<HasEthereumState>().module(\n  \"ethereum\",\n  initialState,\n)\nconst stateGetter = builder.state()\n\nfunction requireValue<T>(v: T | null | undefined, errorMessage: string): T {\n  if (v === null || v === undefined) {\n    throw new Error(errorMessage)\n  }\n  return v\n}\n\n// vuex typedd module\nexport const ethereumModule = {\n  get state() {\n    return stateGetter()\n  },\n\n  get web3(): Web3 {\n    return web3\n  },\n\n  getERC20,\n  setConfig: builder.commit(setConfig),\n  setUserData: builder.commit(setUserData),\n  initUserData: builder.commit(initUserData),\n  removeUserData: builder.commit(deleteUserData),\n\n  refreshBalance: builder.dispatch(refreshBalance),\n  approve: builder.dispatch(approve),\n  transfer: builder.dispatch(transfer),\n\n  setWalletType: builder.dispatch(setWalletType),\n  setProvider: builder.dispatch(setProvider),\n  clearWalletType: builder.commit(clearWalletType),\n\n  setToExploreMode: builder.dispatch(setToExploreMode),\n  allowance: builder.dispatch(allowance),\n\n  initERC20: builder.dispatch(initERC20),\n  clearERC20: builder.dispatch(clearERC20),\n\n  clearHistory: builder.commit(clearHistory),\n  setBlockNumber: builder.commit(setBlockNumber),\n  pollLastBlockNumber: builder.dispatch(pollLastBlockNumber),\n\n  // TODO move these to gateway module\n  setLatestWithdrawalBlock: builder.commit(setLatestWithdrawalBlock),\n  setClaimedReceiptHasExpired: builder.commit(setClaimedReceiptHasExpired),\n}\n\n// holds the contracts. We don't need to exposed these on the state\nconst erc20Contracts: Map<string, ERC20> = new Map()\n\nfunction getERC20(token: string) {\n  return erc20Contracts.get(token)\n}\n\nasync function setWalletType(context: ActionContext, walletType: string) {\n  const wallet = wallets.get(walletType)\n  if (wallet === undefined) {\n    console.error(\"unsupported wallet type \" + walletType)\n    // to do tell the user about the error\n    return\n  }\n  context.state.walletType = walletType\n  if (wallet.isMultiAccount === false) {\n    feedbackModule.setTask(i18n.t(\"feedback_msg.task.connect_wallet\").toString())\n    feedbackModule.setStep(i18n.t(\"feedback_msg.task.connect_wallet\").toString())\n\n    await wallet\n      .createProvider(context.state)\n      .then(async (web3provider) => await setProvider(context, web3provider))\n      .catch((error) => {\n        Sentry.captureException(error)\n        console.error(error)\n        feedbackModule.showError(i18n.t(\"feedback_msg.error.connect_wallet_prob\").toString())\n      })\n  } else {\n    context.state.walletType = walletType\n  }\n}\n\nasync function setProvider(context: ActionContext, p: provider) {\n  log(\"setting provider\", p)\n  context.state.provider = p\n  web3 = new Web3(p)\n  const signer = getMetamaskSigner(p)\n  const address = await signer.getAddress()\n  context.state.signer = signer\n  context.state.address = address\n}\n\nasync function setToExploreMode(context: ActionContext, address: string) {\n  const endpoint = context.state.endpoint\n  const web3Provider = /^ws/.test(endpoint) ?\n    new Web3.providers.WebsocketProvider(endpoint) :\n    new Web3.providers.HttpProvider(endpoint)\n\n  web3 = new Web3(web3Provider)\n  context.state.signer = null\n  context.state.address = address\n}\n\nfunction setConfig(state: EthereumState, config: EthereumConfig) {\n  log(\"config\", config)\n  Object.assign(state, config)\n  // remove any web3 stuff\n  web3 = null\n}\n\nfunction clearWalletType(state: EthereumState) {\n  state.walletType = \"\"\n}\n\n/**\n * deposit from ethereum account to gateway\n * @param symbol\n * @param tokenAmount\n */\nexport async function refreshBalance(context: ActionContext, symbol: string) {\n  if (!(symbol in context.state.coins)) {\n    const info = tokenService.getTokenbySymbol(symbol)\n    context.state.coins = Object.assign(\n      context.state.coins,\n      {\n        [symbol]: {\n          balance: ZERO,\n          loading: true,\n          decimals: info.decimals,\n        },\n      },\n    )\n  }\n  if (symbol === \"ETH\") {\n    const b = await web3.eth.getBalance(context.state.address)\n    context.state.coins.ETH.balance = new BN(b.toString())\n    return\n  }\n  const contract = requireValue(erc20Contracts.get(symbol), \"No contract found\")\n  const coinState = context.state.coins[symbol]\n  // @ts-ignore\n  console.log(symbol, contract._address)\n  coinState.loading = true\n  return (\n    contract.methods\n      .balanceOf(context.state.address)\n      // @ts-ignore\n      .call({\n        from: context.state.address,\n      })\n      .then((ethersBN) => {\n        log(\"balanceOf %s %s \", symbol, ethersBN.toString())\n        context.state.balances[symbol] = new BN(ethersBN.toString())\n        coinState.balance = new BN(ethersBN.toString())\n      })\n      .finally(() => {\n        coinState.loading = false\n      })\n  )\n}\n\n/**\n * approve amount for ERC20 tokens\n * @param symbol\n * @param tokenAmount\n */\nexport async function approve(context: ActionContext, payload: Transfer) {\n  const { symbol, weiAmount, to } = payload\n  const contract = requireValue(\n    erc20Contracts.get(symbol),\n    \"Contract not initialized\",\n  )\n  await contract.methods\n    .approve(to, weiAmount.toString())\n    // @ts-ignore\n    .send({\n      from: context.state.address,\n    })\n}\n\n/**\n * withdraw from gateway to ethereum account\n * @param symbol\n */\nexport async function transfer(\n  context: ActionContext,\n  payload: Transfer,\n): Promise<any> {\n  const { symbol, weiAmount, to } = payload\n  const contract = requireValue(\n    erc20Contracts.get(symbol),\n    \"Contract not initialized\",\n  )\n  const tx = await contract.methods\n    .transfer(to, weiAmount.toString())\n    // @ts-ignore\n    .send({\n      from: context.state.address,\n    })\n  log(\"transfer\", tx)\n  return tx\n}\n\nexport async function allowance(\n  context: ActionContext,\n  payload: { symbol: string; spender: string },\n): Promise<BN> {\n  const { symbol, spender } = payload\n  const contract = requireValue<ERC20>(\n    erc20Contracts.get(symbol),\n    \"Expected contract\",\n  )\n  const amount = await contract.methods\n    .allowance(context.state.address, spender)\n    // @ts-ignore\n    .call({\n      from: context.state.address,\n    })\n  return new BN(amount.toString())\n}\n\nexport function initERC20(context: ActionContext, symbol: string) {\n  log(\"initERC20\", symbol, tokenService)\n  const contractAddr = tokenService.getTokenAddressBySymbol(symbol, \"ethereum\")\n  log(\"initERC20\", symbol, contractAddr)\n  if (contractAddr === undefined) {\n    throw new Error(\"Could not find contract address for \" + symbol)\n  }\n  // @ts-ignore\n  const contract = new web3.eth.Contract(ERC20ABI, contractAddr) as ERC20\n  erc20Contracts.set(symbol, contract)\n\n  const account = context.state.address\n  const refresh = () => ethereumModule.refreshBalance(symbol)\n\n  // out out filters\n  const send = contract.events.Transfer(\n    {\n      fromBlock: \"latest\",\n      filter: {\n        from: account,\n      },\n    },\n    refresh,\n  )\n  const receive = contract.events.Transfer(\n    {\n      fromBlock: \"latest\",\n      filter: {\n        to: account,\n      },\n    },\n    refresh,\n  )\n\n  send.on(\"data\", refresh)\n  receive.on(\"data\", refresh)\n\n  ethereumModule.refreshBalance(symbol)\n\n  return contract\n}\n\nexport function clearERC20() {\n  erc20Contracts.clear()\n}\n\nlet pollingBlockNumber: Subscription | null = null\n\nexport function pollLastBlockNumber(context: ActionContext) {\n  if (pollingBlockNumber != null) {\n    pollingBlockNumber.unsubscribe()\n  }\n  pollingBlockNumber = timer(0, 15000).subscribe(async () => {\n    const blockNumber = await web3!.eth.getBlockNumber()\n    log(\"blockNumber\", blockNumber)\n    setBlockNumber(context.state, blockNumber)\n  })\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"c0cade83c54cd756fecdf41c21795d66c6fee282"},"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/reactions.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/reactions.ts","statementMap":{"0":{"start":{"line":9,"column":12},"end":{"line":9,"column":30}},"1":{"start":{"line":12,"column":21},"end":{"line":18,"column":1}},"2":{"start":{"line":19,"column":28},"end":{"line":19,"column":30}},"3":{"start":{"line":22,"column":4},"end":{"line":22,"column":19}},"4":{"start":{"line":23,"column":4},"end":{"line":23,"column":55}},"5":{"start":{"line":23,"column":23},"end":{"line":23,"column":38}},"6":{"start":{"line":24,"column":4},"end":{"line":24,"column":58}},"7":{"start":{"line":24,"column":23},"end":{"line":24,"column":39}},"8":{"start":{"line":25,"column":4},"end":{"line":32,"column":7}},"9":{"start":{"line":27,"column":12},"end":{"line":30,"column":13}},"10":{"start":{"line":28,"column":16},"end":{"line":28,"column":35}},"11":{"start":{"line":29,"column":16},"end":{"line":29,"column":43}},"12":{"start":{"line":33,"column":4},"end":{"line":42,"column":7}},"13":{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},"14":{"start":{"line":39,"column":16},"end":{"line":39,"column":39}},"15":{"start":{"line":44,"column":4},"end":{"line":51,"column":7}},"16":{"start":{"line":45,"column":8},"end":{"line":46,"column":19}},"17":{"start":{"line":46,"column":12},"end":{"line":46,"column":19}},"18":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"19":{"start":{"line":48,"column":12},"end":{"line":48,"column":55}},"20":{"start":{"line":50,"column":8},"end":{"line":50,"column":41}},"21":{"start":{"line":53,"column":25},"end":{"line":60,"column":1}},"22":{"start":{"line":62,"column":4},"end":{"line":62,"column":25}},"23":{"start":{"line":63,"column":4},"end":{"line":65,"column":5}},"24":{"start":{"line":64,"column":8},"end":{"line":64,"column":51}},"25":{"start":{"line":66,"column":4},"end":{"line":66,"column":42}},"26":{"start":{"line":67,"column":4},"end":{"line":67,"column":43}},"27":{"start":{"line":70,"column":4},"end":{"line":70,"column":35}},"28":{"start":{"line":71,"column":4},"end":{"line":71,"column":27}},"29":{"start":{"line":73,"column":4},"end":{"line":73,"column":42}},"30":{"start":{"line":74,"column":4},"end":{"line":74,"column":43}},"31":{"start":{"line":77,"column":17},"end":{"line":77,"column":56}},"32":{"start":{"line":79,"column":18},"end":{"line":79,"column":52}},"33":{"start":{"line":80,"column":4},"end":{"line":80,"column":43}},"34":{"start":{"line":81,"column":4},"end":{"line":81,"column":93}},"35":{"start":{"line":81,"column":52},"end":{"line":81,"column":84}},"36":{"start":{"line":84,"column":4},"end":{"line":84,"column":56}},"37":{"start":{"line":85,"column":4},"end":{"line":85,"column":41}},"38":{"start":{"line":86,"column":4},"end":{"line":88,"column":5}},"39":{"start":{"line":87,"column":8},"end":{"line":87,"column":47}},"40":{"start":{"line":91,"column":4},"end":{"line":91,"column":32}},"41":{"start":{"line":92,"column":4},"end":{"line":94,"column":5}},"42":{"start":{"line":93,"column":8},"end":{"line":93,"column":44}},"43":{"start":{"line":95,"column":4},"end":{"line":95,"column":36}},"44":{"start":{"line":98,"column":19},"end":{"line":98,"column":56}},"45":{"start":{"line":99,"column":19},"end":{"line":99,"column":45}},"46":{"start":{"line":100,"column":4},"end":{"line":100,"column":73}},"47":{"start":{"line":101,"column":4},"end":{"line":101,"column":25}}},"fnMap":{"0":{"name":"dposReactions","decl":{"start":{"line":21,"column":16},"end":{"line":21,"column":29}},"loc":{"start":{"line":21,"column":38},"end":{"line":52,"column":1}},"line":21},"1":{"name":"(anonymous_1)","decl":{"start":{"line":23,"column":16},"end":{"line":23,"column":17}},"loc":{"start":{"line":23,"column":23},"end":{"line":23,"column":38}},"line":23},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":16},"end":{"line":24,"column":17}},"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":39}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":8},"end":{"line":26,"column":9}},"loc":{"start":{"line":26,"column":22},"end":{"line":31,"column":9}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":34,"column":8},"end":{"line":34,"column":9}},"loc":{"start":{"line":34,"column":22},"end":{"line":41,"column":9}},"line":34},"5":{"name":"(anonymous_5)","decl":{"start":{"line":44,"column":48},"end":{"line":44,"column":49}},"loc":{"start":{"line":44,"column":54},"end":{"line":51,"column":5}},"line":44},"6":{"name":"onClientReady","decl":{"start":{"line":61,"column":15},"end":{"line":61,"column":28}},"loc":{"start":{"line":61,"column":31},"end":{"line":68,"column":1}},"line":61},"7":{"name":"onAccountChange","decl":{"start":{"line":69,"column":15},"end":{"line":69,"column":30}},"loc":{"start":{"line":69,"column":33},"end":{"line":75,"column":1}},"line":69},"8":{"name":"scheduleElectionTimeCall","decl":{"start":{"line":76,"column":9},"end":{"line":76,"column":33}},"loc":{"start":{"line":76,"column":36},"end":{"line":82,"column":1}},"line":76},"9":{"name":"(anonymous_9)","decl":{"start":{"line":81,"column":46},"end":{"line":81,"column":47}},"loc":{"start":{"line":81,"column":52},"end":{"line":81,"column":84}},"line":81},"10":{"name":"refreshDPoSState","decl":{"start":{"line":83,"column":15},"end":{"line":83,"column":31}},"loc":{"start":{"line":83,"column":34},"end":{"line":89,"column":1}},"line":83},"11":{"name":"refreshDPoSUserState","decl":{"start":{"line":90,"column":9},"end":{"line":90,"column":29}},"loc":{"start":{"line":90,"column":32},"end":{"line":96,"column":1}},"line":90},"12":{"name":"createContract","decl":{"start":{"line":97,"column":15},"end":{"line":97,"column":29}},"loc":{"start":{"line":97,"column":38},"end":{"line":102,"column":1}},"line":97}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":12},"end":{"line":30,"column":13}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":30,"column":13}},{"start":{"line":27,"column":12},"end":{"line":30,"column":13}}],"line":27},"1":{"loc":{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},{"start":{"line":35,"column":12},"end":{"line":40,"column":13}}],"line":35},"2":{"loc":{"start":{"line":35,"column":16},"end":{"line":38,"column":94}},"type":"binary-expr","locations":[{"start":{"line":35,"column":16},"end":{"line":35,"column":42}},{"start":{"line":38,"column":16},"end":{"line":38,"column":94}}],"line":35},"3":{"loc":{"start":{"line":45,"column":8},"end":{"line":46,"column":19}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":46,"column":19}},{"start":{"line":45,"column":8},"end":{"line":46,"column":19}}],"line":45},"4":{"loc":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},{"start":{"line":47,"column":8},"end":{"line":49,"column":9}}],"line":47},"5":{"loc":{"start":{"line":63,"column":4},"end":{"line":65,"column":5}},"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":65,"column":5}},{"start":{"line":63,"column":4},"end":{"line":65,"column":5}}],"line":63},"6":{"loc":{"start":{"line":86,"column":4},"end":{"line":88,"column":5}},"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":88,"column":5}},{"start":{"line":86,"column":4},"end":{"line":88,"column":5}}],"line":86},"7":{"loc":{"start":{"line":92,"column":4},"end":{"line":94,"column":5}},"type":"if","locations":[{"start":{"line":92,"column":4},"end":{"line":94,"column":5}},{"start":{"line":92,"column":4},"end":{"line":94,"column":5}}],"line":92}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":2,"8":1,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":1,"24":0,"25":1,"26":1,"27":2,"28":2,"29":2,"30":2,"31":1,"32":1,"33":1,"34":1,"35":1,"36":2,"37":2,"38":2,"39":1,"40":2,"41":2,"42":1,"43":2,"44":2,"45":2,"46":2,"47":2},"f":{"0":1,"1":2,"2":2,"3":0,"4":0,"5":0,"6":1,"7":2,"8":1,"9":1,"10":2,"11":2,"12":2},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,1],"6":[1,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/dpos/store/reactions.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/dpos/store/reactions.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @module dashboard.dpos\n */\n\nimport { Store } from \"vuex\"\nimport { dposModule } from \".\"\nimport { plasmaModule } from \"@/store/plasma\"\nimport { contracts as plasmaTokenContracts } from \"@/store/plasma/tokens\"\nimport debug from \"debug\"\nimport { DPOS3 } from \"loom-js/dist/contracts\"\nimport { DashboardState } from \"@/types\"\nconst log = debug(\"dash.dpos\")\n//\n// After user dpos actions, refresh plasma balance and stakes:\nconst DPOS_ACTIONS = [\n  \"dpos/redelegate\",\n  \"dpos/consolidate\",\n  \"dpos/delegate\",\n  \"dpos/undelegate\",\n  \"dpos/claimRewards\",\n]\n\nlet scheduledElectionCall: number = -1\nlet store: Store<DashboardState>\n\nexport function dposReactions(_store: Store<DashboardState>) {\n  store = _store\n\n  store.watch((s) => s.plasma.client, onClientReady)\n\n  store.watch((s) => s.plasma.address, onAccountChange)\n\n  store.subscribeAction({\n    after(action) {\n      if (action.type === \"dpos/refreshElectionTime\") {\n        refreshDPoSState()\n        scheduleElectionTimeCall()\n      }\n    },\n  })\n\n  store.subscribeAction({\n    after(action) {\n      if (\n        store.state.plasma.address &&\n        // DPOS_ACTIONS.find((a) => a === action.type)\n        // TODO: link to chrome on windows bug\n        /(redelegate|consolidate|delegate|undelegate|claimRewards)$/.test(action.type)\n      ) {\n        refreshDPoSUserState()\n      }\n    },\n  })\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API\n  window.addEventListener(\"visibilitychange\", () => {\n    if (document.hidden) return\n    if (scheduledElectionCall > 0) {\n      window.clearTimeout(scheduledElectionCall)\n    }\n    dposModule.refreshElectionTime()\n  })\n}\n\nexport const dposUtils = {\n  onClientReady,\n  onAccountChange,\n  scheduleElectionTimeCall,\n  refreshDPoSState,\n  refreshDPoSUserState,\n  createContract,\n}\n\nasync function onClientReady() {\n  log(\"onClientReady\")\n  if (scheduledElectionCall > 0) {\n    window.clearTimeout(scheduledElectionCall)\n  }\n  await dposUtils.createContract(store)\n  await dposModule.refreshElectionTime()\n}\n\nasync function onAccountChange() {\n  console.log(\"onAccountChange\")\n  log(\"onAccountChange\")\n  // recreate the contract with the right caller\n  await dposUtils.createContract(store)\n  await dposUtils.refreshDPoSUserState()\n}\n\nfunction scheduleElectionTimeCall() {\n  const time = store.state.dpos.electionTime.getTime()\n  // throttle to one call per 10 seconds\n  const delay = Math.max(time - Date.now(), 10000)\n  log(\"elections call in\", delay / 1000)\n  scheduledElectionCall = window.setTimeout(\n    () => dposModule.refreshElectionTime(),\n    delay,\n  )\n}\n\nasync function refreshDPoSState() {\n  log(\"refreshDPoSState\", store.state.plasma.address)\n  await dposModule.refreshValidators()\n\n  if (store.state.plasma.address) {\n    await dposUtils.refreshDPoSUserState()\n  }\n}\n\nfunction refreshDPoSUserState() {\n  log(\"refreshDPoSUserState\")\n  if (plasmaTokenContracts.has(\"LOOM\")) {\n    plasmaModule.refreshBalance(\"LOOM\")\n  }\n  dposModule.refreshDelegations()\n}\n\nasync function createContract(_store: Store<DashboardState>) {\n  const caller = await plasmaModule.getCallerAddress()\n  const client = _store.state.plasma.client!\n  _store.state.dpos.contract = await DPOS3.createAsync(client, caller)\n  log(\"dpos3 created\")\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"796fea39b1ac06cc6411cf51cae03e42af00a13b"},"/Users/tharathip_loom/Documents/dashboard/src/config/production.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/config/production.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/config/production.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/config/production.ts"],"names":[],"mappings":"AAEA,eAAe;IACb,IAAI,EAAE,YAAY;IAClB,MAAM,EAAE;QACN,SAAS,EAAE,QAAQ;QACnB,OAAO,EAAE,SAAS;QAClB,QAAQ,EAAE,6BAA6B;QACvC,aAAa,EAAE,gDAAgD;QAC/D,iBAAiB,EAAE,iCAAiC;QACpD,UAAU,EAAE,oEAAoE;KACjF;IACD,QAAQ,EAAE;QACR,SAAS,EAAE,GAAG;QACd,WAAW,EAAE,SAAS;QACtB,OAAO,EAAE,KAAK;QACd,QAAQ,EAAE,gDAAgD;QAC1D,aAAa,EAAE,uBAAuB;QACtC,SAAS,EAAE;YACT,WAAW,EAAE,4CAA4C;YACzD,WAAW,EAAE,4CAA4C;SAC1D;KACF;IACD,IAAI,EAAE;QACJ,cAAc,EAAE;YACd,4CAA4C;YAC5C,4CAA4C;YAC5C,4CAA4C;YAC5C,4CAA4C;YAC5C,4CAA4C;YAC5C,4CAA4C;SAC7C;QACD,YAAY,EAAE,wBAAwB;KACvC;IACD,OAAO,EAAE;QACP,MAAM,EAAE,CAAC,UAAU,CAAC;QACpB,QAAQ,EAAE;YACR,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,KAAK;SACZ;QACD,mBAAmB,EAAE,qEAAqE;QAC1F,oBAAoB,EAAE,2DAA2D;QACjF,OAAO,EAAE;YACP,cAAc,EAAE,4CAA4C;YAC5D,GAAG,EAAE,KAAK;SACX;KACF;IACD,WAAW,EAAE,gCAAgC;IAC7C,QAAQ,EAAE,CAAC,QAAQ,EAAE,WAAW,EAAE,eAAe,CAAC;IAClD,MAAM,EAAE,CAAC,UAAU,EAAE,SAAS,CAAC;IAC/B,YAAY,EAAE;QACZ,cAAc,EAAE,IAAI;QACpB,KAAK,EAAE,KAAK;QACZ,IAAI,EAAE,IAAI;KACX;CACiB,CAAA","sourcesContent":["import { DashboardConfig } from \"@/types\"\n\nexport default {\n  name: \"production\",\n  plasma: {\n    networkId: \"plasma\",\n    chainId: \"default\",\n    endpoint: \"wss://plasma.dappchains.com\",\n    blockExplorer: \"https://basechain-blockexplorer.dappchains.com\",\n    loomGamesEndpoint: \"https://loom.games/en/dpos-link\",\n    historyUrl: \"https://api.loom.games/plasma/address/{address}?sort=-block_height\",\n  },\n  ethereum: {\n    networkId: \"1\",\n    networkName: \"mainnet\",\n    chainId: \"eth\",\n    endpoint: \"https://mainnet.infura.io/5Ic91y0T9nLh6qUg33K0\",\n    blockExplorer: \"https://etherscan.com\",\n    contracts: {\n      mainGateway: \"0xe080079ac12521d57573f39543e1725ea3e16dcc\",\n      loomGateway: \"0x8f8e8b3c4de76a31971fe6a87297d8f703be8570\",\n    },\n  },\n  dpos: {\n    bootstrapNodes: [\n      \"0x0e99fc16e32e568971908f2ce54b967a42663a26\",\n      \"0xac3211caecc45940a6d2ba006ca465a647d8464f\",\n      \"0x69c48768dbac492908161be787b7a5658192df35\",\n      \"0x2a3a7c850586d4f80a12ac1952f88b1b69ef48e1\",\n      \"0x4a1b8b15e50ce63cc6f65603ea79be09206cae70\",\n      \"0x0ce7b61c97a6d5083356f115288f9266553e191e\",\n    ],\n    analyticsUrl: \"https://api.loom.games\",\n  },\n  gateway: {\n    chains: [\"ethereum\"],\n    multisig: {\n      loom: true,\n      main: false,\n    },\n    checkMarketplaceURL: \"https://auth.loom.games/wallet/address?address={address}&wallet=eth\",\n    tokenContractLogsURL: \"https://api.loom.games/plasma/tokencontract/eth:{address}\",\n    binance: {\n      gatewayAccount: \"bnb17mxq8p5jmw27dtt6s92fd35yltdml6snw3r98t\",\n      fee: 37500,\n    },\n  },\n  coinDataUrl: \"/tokens/production.tokens.json\",\n  disabled: [\"portis\", \"fortmatic\", \"walletconnect\"],\n  chains: [\"ethereum\", \"binance\"],\n  announcement: {\n    validatorsPage: true,\n    popup: false,\n    home: true,\n  },\n} as DashboardConfig\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"05cccd45385c6754d470ab51ccffbf50da0660a0"},"/Users/tharathip_loom/Documents/dashboard/src/config/dev.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/config/dev.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/config/dev.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/config/dev.ts"],"names":[],"mappings":"AAEA,eAAe;IACb,IAAI,EAAE,KAAK;IACX,MAAM,EAAE;QACN,SAAS,EAAE,OAAO;QAClB,OAAO,EAAE,OAAO;QAChB,QAAQ,EAAE,mCAAmC;QAC7C,aAAa,EAAE,qCAAqC;QACpD,iBAAiB,EAAE,uCAAuC;QAC1D,UAAU,EAAE,2EAA2E;KACxF;IACD,QAAQ,EAAE;QACR,SAAS,EAAE,GAAG;QACd,WAAW,EAAE,SAAS;QACtB,OAAO,EAAE,KAAK;QACd,QAAQ,EAAE,4BAA4B;QACtC,aAAa,EAAE,8BAA8B;QAC7C,SAAS,EAAE;YACT,WAAW,EAAE,4CAA4C;YACzD,WAAW,EAAE,4CAA4C;SAC1D;QACD,SAAS,EAAE,sCAAsC;QACjD,WAAW,EAAE,0BAA0B;KACxC;IACD,IAAI,EAAE;QACJ,cAAc,EAAE,EAAE;QAClB,YAAY,EAAE,sBAAsB;KACrC;IACD,WAAW,EAAE,yBAAyB;IACtC,OAAO,EAAE;QACP,MAAM,EAAE,CAAC,UAAU,CAAC;QACpB,QAAQ,EAAE;YACR,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;SACX;QACD,mBAAmB,EAAE,yEAAyE;QAC9F,OAAO,EAAE;YACP,cAAc,EAAE,6CAA6C;YAC7D,GAAG,EAAE,KAAK;SACX;QACD,oBAAoB,EAAE,+DAA+D;KACtF;IACD,QAAQ,EAAE,EAAE;IACZ,MAAM,EAAE,CAAC,UAAU,EAAE,SAAS,CAAC;IAC/B,YAAY,EAAE;QACZ,cAAc,EAAE,IAAI;QACpB,KAAK,EAAE,IAAI;QACX,IAAI,EAAE,IAAI;KACX;CACiB,CAAA","sourcesContent":["import { DashboardConfig } from \"@/types\"\n\nexport default {\n  name: \"dev\",\n  plasma: {\n    networkId: \"asia1\",\n    chainId: \"asia1\",\n    endpoint: \"wss://test-z-asia1.dappchains.com\",\n    blockExplorer: \"http://asia1-blockexplorer.devdc.io\",\n    loomGamesEndpoint: \"https://stage.loom.games/en/dpos-link\",\n    historyUrl: \"http://dev-api.loom.games/plasma/address/eth:{address}?sort=-block_height\",\n  },\n  ethereum: {\n    networkId: \"4\",\n    networkName: \"rinkeby\",\n    chainId: \"eth\",\n    endpoint: \"wss://rinkeby.infura.io/ws\",\n    blockExplorer: \"https://rinkeby.etherscan.io\",\n    contracts: {\n      mainGateway: \"0xa6BaAA13CD9d027e15Ae219C90b90991Af373796\",\n      loomGateway: \"0x065F7D2636880aE34a98dD7600b9bD1D5EcAFA97\",\n    },\n    portisKey: \"10589118-6329-43a0-818c-93800c206786\",\n    formaticKey: \"pk_test_58DB7D96C460470B\",\n  },\n  dpos: {\n    bootstrapNodes: [],\n    analyticsUrl: \"//dev-api.loom.games\",\n  },\n  coinDataUrl: \"/tokens/dev.tokens.json\",\n  gateway: {\n    chains: [\"ethereum\"],\n    multisig: {\n      loom: true,\n      main: true,\n    },\n    checkMarketplaceURL: \"https://dev-auth.loom.games/wallet/address?address={address}&wallet=eth\",\n    binance: {\n      gatewayAccount: \"tbnb14sa7gnlalxd0e336clc0ltgke6e6hdanyl6pqq\",\n      fee: 37500,\n    },\n    tokenContractLogsURL: \"https://dev-api.loom.games/plasma/tokencontract/eth:{address}\",\n  },\n  disabled: [],\n  chains: [\"ethereum\", \"binance\"],\n  announcement: {\n    validatorsPage: true,\n    popup: true,\n    home: true,\n  },\n} as DashboardConfig\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"69f26c1308b7d0006ed99d1aece4f363c53b806c"},"/Users/tharathip_loom/Documents/dashboard/src/config/local.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/config/local.ts","statementMap":{},"fnMap":{},"branchMap":{},"s":{},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/config/local.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/config/local.ts"],"names":[],"mappings":"AAEA,eAAe;IACb,IAAI,EAAE,OAAO;IACb,MAAM,EAAE;QACN,SAAS,EAAE,SAAS;QACpB,OAAO,EAAE,SAAS;QAClB,QAAQ,EAAE,sBAAsB;QAChC,aAAa,EAAE,EAAE;QACjB,iBAAiB,EAAE,yBAAyB;QAC5C,UAAU,EAAE,oCAAoC;KACjD;IACD,QAAQ,EAAE;QACR,SAAS,EAAE,SAAS;QACpB,WAAW,EAAE,SAAS;QACtB,QAAQ,EAAE,qBAAqB;QAC/B,aAAa,EAAE,EAAE;QACjB,OAAO,EAAE,KAAK;QACd,SAAS,EAAE;YACT,OAAO,EAAE,4CAA4C;YACrD,WAAW,EAAE,4CAA4C;SAC1D;KACF;IACD,IAAI,EAAE;QACJ,cAAc,EAAE,EAAE;QAClB,YAAY,EAAE,sBAAsB;KACrC;IACD,OAAO,EAAE;QACP,MAAM,EAAE,CAAC,UAAU,CAAC;QACpB,QAAQ,EAAE;YACR,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;SACX;QACD,mBAAmB,EAAE,yEAAyE;QAC9F,oBAAoB,EAAE,+DAA+D;QACrF,OAAO,EAAE;YACP,cAAc,EAAE,6CAA6C;YAC7D,GAAG,EAAE,KAAK;SACX;KACF;IACD,WAAW,EAAE,EAAE;IACf,QAAQ,EAAE,EAAE;IACZ,MAAM,EAAE,CAAC,UAAU,CAAC;IACpB,YAAY,EAAE;QACZ,cAAc,EAAE,IAAI;QACpB,KAAK,EAAE,IAAI;QACX,IAAI,EAAE,IAAI;KACX;CACiB,CAAA","sourcesContent":["import { DashboardConfig } from \"@/types\"\n\nexport default {\n  name: \"local\",\n  plasma: {\n    networkId: \"default\",\n    chainId: \"default\",\n    endpoint: \"ws://localhost:46658\",\n    blockExplorer: \"\",\n    loomGamesEndpoint: \"https://localhost:8000/\",\n    historyUrl: \"https://stage.loom.games/{address}\",\n  },\n  ethereum: {\n    networkId: \"default\",\n    networkName: \"Ganache\",\n    endpoint: \"ws://localhost:8484\",\n    blockExplorer: \"\",\n    chainId: \"eth\",\n    contracts: {\n      gateway: \"0xE57e0793f953684Bc9D2EF3D795408afb4a100c3\",\n      loomGateway: \"0x76c41effc2871e73f42b2eae5eaf8efe50bdbf73\",\n    },\n  },\n  dpos: {\n    bootstrapNodes: [],\n    analyticsUrl: \"//dev-api.loom.games\",\n  },\n  gateway: {\n    chains: [\"ethereum\"],\n    multisig: {\n      loom: true,\n      main: true,\n    },\n    checkMarketplaceURL: \"https://dev-auth.loom.games/wallet/address?address={address}&wallet=eth\",\n    tokenContractLogsURL: \"https://dev-api.loom.games/plasma/tokencontract/eth:{address}\",\n    binance: {\n      gatewayAccount: \"tbnb14sa7gnlalxd0e336clc0ltgke6e6hdanyl6pqq\",\n      fee: 37500,\n    },\n  },\n  coinDataUrl: \"\",\n  disabled: [],\n  chains: [\"ethereum\"],\n  announcement: {\n    validatorsPage: true,\n    popup: true,\n    home: true,\n  },\n} as DashboardConfig\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"7a4886b9aa24942ce9bf59cecec7c491ff227369"},"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/getters.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/getters.ts","statementMap":{"0":{"start":{"line":2,"column":4},"end":{"line":2,"column":30}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":31}}},"fnMap":{"0":{"name":"getCardInstance","decl":{"start":{"line":1,"column":16},"end":{"line":1,"column":31}},"loc":{"start":{"line":1,"column":39},"end":{"line":3,"column":1}},"line":1},"1":{"name":"getPacksInstance","decl":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"loc":{"start":{"line":4,"column":40},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":0,"1":1},"f":{"0":0,"1":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/getters.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/getters.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,eAAe,CAAC,KAAkB;IAChD,OAAO,KAAK,CAAC,YAAY,CAAA;AAC3B,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,KAAkB;IACjD,OAAO,KAAK,CAAC,aAAa,CAAA;AAC5B,CAAC","sourcesContent":["import { AssetsState } from \"./types\"\n\nexport function getCardInstance(state: AssetsState) {\n  return state.cardContract\n}\n\nexport function getPacksInstance(state: AssetsState) {\n  return state.packsContract\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"75d4a384826638942ec3447ffac4d1308763de5c"},"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/mutations.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/mutations.ts","statementMap":{"0":{"start":{"line":2,"column":4},"end":{"line":2,"column":57}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":33}},"2":{"start":{"line":8,"column":4},"end":{"line":8,"column":32}},"3":{"start":{"line":11,"column":4},"end":{"line":11,"column":32}},"4":{"start":{"line":14,"column":4},"end":{"line":14,"column":43}},"5":{"start":{"line":17,"column":4},"end":{"line":17,"column":43}},"6":{"start":{"line":20,"column":4},"end":{"line":20,"column":47}}},"fnMap":{"0":{"name":"setPacksContract","decl":{"start":{"line":1,"column":16},"end":{"line":1,"column":32}},"loc":{"start":{"line":1,"column":49},"end":{"line":3,"column":1}},"line":1},"1":{"name":"setCardContract","decl":{"start":{"line":4,"column":16},"end":{"line":4,"column":31}},"loc":{"start":{"line":4,"column":48},"end":{"line":6,"column":1}},"line":4},"2":{"name":"setCardBalance","decl":{"start":{"line":7,"column":16},"end":{"line":7,"column":30}},"loc":{"start":{"line":7,"column":47},"end":{"line":9,"column":1}},"line":7},"3":{"name":"setPackBalance","decl":{"start":{"line":10,"column":16},"end":{"line":10,"column":30}},"loc":{"start":{"line":10,"column":47},"end":{"line":12,"column":1}},"line":10},"4":{"name":"setCardToTransferSelected","decl":{"start":{"line":13,"column":16},"end":{"line":13,"column":41}},"loc":{"start":{"line":13,"column":58},"end":{"line":15,"column":1}},"line":13},"5":{"name":"setPackToTransferSelected","decl":{"start":{"line":16,"column":16},"end":{"line":16,"column":41}},"loc":{"start":{"line":16,"column":58},"end":{"line":18,"column":1}},"line":16},"6":{"name":"setAllCardsToTransferSelected","decl":{"start":{"line":19,"column":16},"end":{"line":19,"column":45}},"loc":{"start":{"line":19,"column":62},"end":{"line":21,"column":1}},"line":19}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/mutations.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/mutations.ts"],"names":[],"mappings":"AAMA,MAAM,UAAU,gBAAgB,CAC9B,KAAkB,EAClB,OAA6C;IAE7C,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAA;AACtD,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,KAAkB,EAAE,OAAwB;IAC1E,KAAK,CAAC,YAAY,GAAG,OAAO,CAAA;AAC9B,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,KAAkB,EAAE,OAAqB;IACtE,KAAK,CAAC,WAAW,GAAG,OAAO,CAAA;AAC7B,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,KAAkB,EAAE,OAAqB;IACtE,KAAK,CAAC,WAAW,GAAG,OAAO,CAAA;AAC7B,CAAC;AAED,MAAM,UAAU,yBAAyB,CACvC,KAAkB,EAClB,OAAmB;IAEnB,KAAK,CAAC,sBAAsB,GAAG,OAAO,CAAA;AACxC,CAAC;AAED,MAAM,UAAU,yBAAyB,CACvC,KAAkB,EAClB,OAAyC;IAEzC,KAAK,CAAC,sBAAsB,GAAG,OAAO,CAAA;AACxC,CAAC;AAED,MAAM,UAAU,6BAA6B,CAC3C,KAAkB,EAClB,OAIC;IAED,KAAK,CAAC,0BAA0B,GAAG,OAAO,CAAA;AAC5C,CAAC","sourcesContent":["import { PlasmaState, CardDetail, PackDetail } from \"../types\"\nimport { Contract } from \"web3-eth-contract\"\nimport { MigratedZBGCard } from \"@/contracts/types/web3-contracts/MigratedZBGCard\"\nimport { BoosterPack } from \"./web3-contracts/BoosterPack\"\nimport { AssetsState } from \"./types\"\n\nexport function setPacksContract(\n  state: AssetsState,\n  payload: { name: string; contract: Contract },\n) {\n  state.packsContract[payload.name] = payload.contract\n}\n\nexport function setCardContract(state: AssetsState, payload: MigratedZBGCard) {\n  state.cardContract = payload\n}\n\nexport function setCardBalance(state: AssetsState, payload: CardDetail[]) {\n  state.cardBalance = payload\n}\n\nexport function setPackBalance(state: AssetsState, payload: PackDetail[]) {\n  state.packBalance = payload\n}\n\nexport function setCardToTransferSelected(\n  state: AssetsState,\n  payload: CardDetail,\n) {\n  state.cardToTransferSelected = payload\n}\n\nexport function setPackToTransferSelected(\n  state: AssetsState,\n  payload: { type: string; amount: number },\n) {\n  state.packToTransferSelected = payload\n}\n\nexport function setAllCardsToTransferSelected(\n  state: AssetsState,\n  payload: {\n    edition: string\n    cards: CardDetail[]\n    amount: number,\n  },\n) {\n  state.allCardsToTransferSelected = payload\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"814b98fe1f3802c8c708d224555816443c5ee430"},"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/reactions.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/reactions.ts","statementMap":{"0":{"start":{"line":6,"column":12},"end":{"line":6,"column":30}},"1":{"start":{"line":8,"column":26},"end":{"line":19,"column":1}},"2":{"start":{"line":23,"column":4},"end":{"line":39,"column":7}},"3":{"start":{"line":23,"column":27},"end":{"line":23,"column":44}},"4":{"start":{"line":24,"column":8},"end":{"line":27,"column":9}},"5":{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},"6":{"start":{"line":28,"column":24},"end":{"line":28,"column":52}},"7":{"start":{"line":29,"column":29},"end":{"line":31,"column":79}},"8":{"start":{"line":32,"column":8},"end":{"line":32,"column":51}},"9":{"start":{"line":33,"column":8},"end":{"line":38,"column":9}},"10":{"start":{"line":34,"column":33},"end":{"line":36,"column":62}},"11":{"start":{"line":37,"column":12},"end":{"line":37,"column":82}}},"fnMap":{"0":{"name":"zbcardsReactions","decl":{"start":{"line":20,"column":16},"end":{"line":20,"column":32}},"loc":{"start":{"line":20,"column":40},"end":{"line":40,"column":1}},"line":20},"1":{"name":"(anonymous_1)","decl":{"start":{"line":23,"column":16},"end":{"line":23,"column":17}},"loc":{"start":{"line":23,"column":27},"end":{"line":23,"column":44}},"line":23},"2":{"name":"(anonymous_2)","decl":{"start":{"line":23,"column":46},"end":{"line":23,"column":47}},"loc":{"start":{"line":23,"column":56},"end":{"line":39,"column":5}},"line":23}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":27,"column":9}},{"start":{"line":24,"column":8},"end":{"line":27,"column":9}}],"line":24}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/reactions.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/reactions.ts"],"names":[],"mappings":"AAEA,OAAO,mBAAmB,MAAM,kCAAkC,CAAA;AAClE,OAAO,eAAe,MAAM,8BAA8B,CAAA;AAC1D,OAAO,aAAa,MAAM,8BAA8B,CAAA;AAKxD,OAAO,KAAK,MAAM,OAAO,CAAA;AAEzB,OAAO,EAAE,YAAY,EAAE,MAAM,GAAG,CAAA;AAEhC,MAAM,GAAG,GAAG,KAAK,CAAC,WAAW,CAAC,CAAA;AAE9B,sCAAsC;AACtC,MAAM,CAAC,MAAM,UAAU,GAAG;IACxB,SAAS;IACT,OAAO;IACP,KAAK;IACL,OAAO;IACP,MAAM;IACN,MAAM;IACN,OAAO;IACP,OAAO;IACP,SAAS;IACT,MAAM;CACP,CAAA;AAED,MAAM,UAAU,gBAAgB,CAAC,KAA4B;IAC3D,0CAA0C;IAC1C,uBAAuB;IACvB,KAAK,CAAC,KAAK,CACT,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,EAC5B,CAAC,IAAI,EAAE,EAAE;QACP,IAAI,IAAI,KAAK,IAAI,EAAE;YACjB,8CAA8C;YAC9C,OAAM;SACP;QACD,MAAM,OAAO,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAA;QAC5C,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ;QACxC,aAAa;QACb,mBAAmB,CAAC,GAAG,EACvB,mBAAmB,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,CAC3B,CAAA;QACpB,YAAY,CAAC,eAAe,CAAC,YAAY,CAAC,CAAA;QAE1C,KAAK,MAAM,IAAI,IAAI,UAAU,EAAE;YAC7B,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ;YACxC,aAAa;YACb,eAAe,CAAC,GAAG,EACnB,aAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAC7B,CAAA;YACD,YAAY,CAAC,gBAAgB,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,CAAC,CAAA;SACtE;IACH,CAAC,CACF,CAAA;AACH,CAAC","sourcesContent":["import { HasPlasmaState } from \"../types\"\nimport { Store } from \"vuex\"\nimport MigratedZBGCardJSON from \"@/contracts/MigratedZBGCard.json\"\nimport BoosterPackJSON from \"@/contracts/BoosterPack.json\"\nimport packAddresses from \"@/data/ZBGPackAddresses.json\"\n\nimport { plasmaModule } from \"..\"\nimport { MigratedZBGCard } from \"@/contracts/types/web3-contracts/MigratedZBGCard\"\n\nimport debug from \"debug\"\nimport { DashboardState } from \"@/types\"\nimport { assetsModule } from \".\"\n\nconst log = debug(\"ui.assets\")\n\n// Can we get these from the contracts\nexport const PACKS_NAME = [\n  \"booster\",\n  \"super\",\n  \"air\",\n  \"earth\",\n  \"fire\",\n  \"life\",\n  \"toxic\",\n  \"water\",\n  \"binance\",\n  \"tron\",\n]\n\nexport function zbcardsReactions(store: Store<DashboardState>) {\n  // When a new plasma web3 instance is set,\n  // create new contracts\n  store.watch(\n    (state) => state.plasma.web3,\n    (web3) => {\n      if (web3 === null) {\n        // todo dispose of contracts if that's a thing\n        return\n      }\n      const envName = store.state.plasma.networkId\n      const cardInstance = new web3.eth.Contract(\n        // @ts-ignore\n        MigratedZBGCardJSON.abi,\n        MigratedZBGCardJSON.networks[envName].address,\n      ) as MigratedZBGCard\n      assetsModule.setCardContract(cardInstance)\n\n      for (const pack of PACKS_NAME) {\n        const packInstance = new web3.eth.Contract(\n          // @ts-ignore\n          BoosterPackJSON.abi,\n          packAddresses[envName][pack],\n        )\n        assetsModule.setPacksContract({ name: pack, contract: packInstance })\n      }\n    },\n  )\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"c297ddc344d9e4692b0a0810bea5dbd58cfec53a"},"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/index.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/index.ts","statementMap":{"0":{"start":{"line":11,"column":12},"end":{"line":11,"column":27}},"1":{"start":{"line":13,"column":4},"end":{"line":39,"column":6}},"2":{"start":{"line":41,"column":16},"end":{"line":41,"column":66}},"3":{"start":{"line":42,"column":20},"end":{"line":42,"column":35}},"4":{"start":{"line":43,"column":28},"end":{"line":62,"column":1}},"5":{"start":{"line":45,"column":8},"end":{"line":45,"column":29}},"6":{"start":{"line":64,"column":20},"end":{"line":64,"column":52}},"7":{"start":{"line":65,"column":19},"end":{"line":65,"column":56}},"8":{"start":{"line":66,"column":19},"end":{"line":69,"column":48}},"9":{"start":{"line":70,"column":18},"end":{"line":70,"column":20}},"10":{"start":{"line":71,"column":4},"end":{"line":75,"column":7}},"11":{"start":{"line":72,"column":21},"end":{"line":72,"column":52}},"12":{"start":{"line":73,"column":8},"end":{"line":73,"column":55}},"13":{"start":{"line":74,"column":8},"end":{"line":74,"column":25}},"14":{"start":{"line":76,"column":4},"end":{"line":76,"column":39}},"15":{"start":{"line":79,"column":20},"end":{"line":79,"column":52}},"16":{"start":{"line":80,"column":19},"end":{"line":80,"column":56}},"17":{"start":{"line":81,"column":18},"end":{"line":81,"column":20}},"18":{"start":{"line":82,"column":4},"end":{"line":87,"column":7}},"19":{"start":{"line":83,"column":23},"end":{"line":85,"column":52}},"20":{"start":{"line":86,"column":8},"end":{"line":86,"column":37}},"21":{"start":{"line":88,"column":4},"end":{"line":88,"column":39}},"22":{"start":{"line":91,"column":4},"end":{"line":91,"column":82}},"23":{"start":{"line":92,"column":4},"end":{"line":92,"column":84}},"24":{"start":{"line":93,"column":4},"end":{"line":93,"column":42}},"25":{"start":{"line":94,"column":4},"end":{"line":123,"column":5}},"26":{"start":{"line":96,"column":27},"end":{"line":96,"column":64}},"27":{"start":{"line":97,"column":33},"end":{"line":97,"column":60}},"28":{"start":{"line":98,"column":30},"end":{"line":98,"column":62}},"29":{"start":{"line":99,"column":23},"end":{"line":102,"column":45}},"30":{"start":{"line":103,"column":8},"end":{"line":103,"column":45}},"31":{"start":{"line":104,"column":8},"end":{"line":104,"column":46}},"32":{"start":{"line":105,"column":8},"end":{"line":105,"column":33}},"33":{"start":{"line":106,"column":8},"end":{"line":110,"column":25}},"34":{"start":{"line":113,"column":8},"end":{"line":113,"column":33}},"35":{"start":{"line":114,"column":8},"end":{"line":122,"column":9}},"36":{"start":{"line":115,"column":12},"end":{"line":115,"column":83}},"37":{"start":{"line":118,"column":12},"end":{"line":120,"column":29}},"38":{"start":{"line":121,"column":12},"end":{"line":121,"column":24}},"39":{"start":{"line":126,"column":4},"end":{"line":126,"column":42}},"40":{"start":{"line":127,"column":4},"end":{"line":157,"column":5}},"41":{"start":{"line":128,"column":8},"end":{"line":128,"column":85}},"42":{"start":{"line":129,"column":8},"end":{"line":129,"column":88}},"43":{"start":{"line":130,"column":27},"end":{"line":130,"column":64}},"44":{"start":{"line":131,"column":33},"end":{"line":131,"column":60}},"45":{"start":{"line":132,"column":25},"end":{"line":132,"column":64}},"46":{"start":{"line":133,"column":23},"end":{"line":135,"column":45}},"47":{"start":{"line":136,"column":8},"end":{"line":136,"column":45}},"48":{"start":{"line":137,"column":8},"end":{"line":137,"column":87}},"49":{"start":{"line":138,"column":8},"end":{"line":138,"column":46}},"50":{"start":{"line":139,"column":8},"end":{"line":139,"column":33}},"51":{"start":{"line":140,"column":8},"end":{"line":144,"column":25}},"52":{"start":{"line":147,"column":8},"end":{"line":147,"column":33}},"53":{"start":{"line":148,"column":8},"end":{"line":156,"column":9}},"54":{"start":{"line":149,"column":12},"end":{"line":149,"column":83}},"55":{"start":{"line":152,"column":12},"end":{"line":154,"column":29}},"56":{"start":{"line":155,"column":12},"end":{"line":155,"column":24}}},"fnMap":{"0":{"name":"initialState","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":21}},"loc":{"start":{"line":12,"column":24},"end":{"line":40,"column":1}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":16},"end":{"line":46,"column":5}},"line":44},"2":{"name":"checkCardBalance","decl":{"start":{"line":63,"column":22},"end":{"line":63,"column":38}},"loc":{"start":{"line":63,"column":48},"end":{"line":77,"column":1}},"line":63},"3":{"name":"(anonymous_3)","decl":{"start":{"line":71,"column":27},"end":{"line":71,"column":28}},"loc":{"start":{"line":71,"column":38},"end":{"line":75,"column":5}},"line":71},"4":{"name":"checkPackBalance","decl":{"start":{"line":78,"column":22},"end":{"line":78,"column":38}},"loc":{"start":{"line":78,"column":48},"end":{"line":89,"column":1}},"line":78},"5":{"name":"(anonymous_5)","decl":{"start":{"line":82,"column":23},"end":{"line":82,"column":24}},"loc":{"start":{"line":82,"column":39},"end":{"line":87,"column":5}},"line":82},"6":{"name":"transferCards","decl":{"start":{"line":90,"column":22},"end":{"line":90,"column":35}},"loc":{"start":{"line":90,"column":54},"end":{"line":124,"column":1}},"line":90},"7":{"name":"transferPacks","decl":{"start":{"line":125,"column":22},"end":{"line":125,"column":35}},"loc":{"start":{"line":125,"column":54},"end":{"line":158,"column":1}},"line":125}},"branchMap":{"0":{"loc":{"start":{"line":114,"column":8},"end":{"line":122,"column":9}},"type":"if","locations":[{"start":{"line":114,"column":8},"end":{"line":122,"column":9}},{"start":{"line":114,"column":8},"end":{"line":122,"column":9}}],"line":114},"1":{"loc":{"start":{"line":148,"column":8},"end":{"line":156,"column":9}},"type":"if","locations":[{"start":{"line":148,"column":8},"end":{"line":156,"column":9}},{"start":{"line":148,"column":8},"end":{"line":156,"column":9}}],"line":148}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":1,"10":1,"11":3,"12":3,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":10,"20":10,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0},"f":{"0":1,"1":0,"2":1,"3":3,"4":1,"5":10,"6":1,"7":1},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/index.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/store/plasma/assets/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { AssetsState, HasAssetsState, AssetsContext } from \"./types\"\nimport { getStoreBuilder } from \"vuex-typex\"\n// assets (make this a sepoerate module)\nimport * as getters from \"./getters\"\nimport * as mutations from \"./mutations\"\n\nimport { CardDetail, PackDetail } from \"../types\"\nimport { getCardByTokenId, formatFromLoomAddress } from \"@/utils\"\nimport { PACKS_NAME } from \"./reactions\"\nimport { plasmaModule } from \"..\"\nimport { i18n } from \"@/i18n\"\nimport debug from \"debug\"\nimport { feedbackModule } from \"@/feedback/store\"\nconst log = debug(\"assets\")\n\nfunction initialState(): AssetsState {\n  return {\n    packsContract: {},\n    cardContract: null,\n    cardBalance: [],\n    packBalance: [],\n    cardToTransferSelected: {\n      id: \"0\",\n      amount: 0,\n      display_name: \"default\",\n      image: \"default\",\n      title: \"default\",\n      variant: \"default\",\n      variation: \"default\",\n      mould_type: \"default\",\n      element: \"default\",\n      originalID: \"default\",\n    },\n    packToTransferSelected: {\n      type: \"Booster\",\n      amount: 0,\n    },\n    allCardsToTransferSelected: {\n      edition: \"none\",\n      cards: [],\n      amount: 0,\n    },\n  }\n}\n\nconst builder = getStoreBuilder<HasAssetsState>().module(\n  \"assets\",\n  initialState(),\n)\nconst stateGetter = builder.state()\n\nexport const assetsModule = {\n  get state() {\n    return stateGetter()\n  },\n  // // Getters\n  getCardInstance: builder.read(getters.getCardInstance),\n  // Mutations\n  setPacksContract: builder.commit(mutations.setPacksContract),\n  setCardContract: builder.commit(mutations.setCardContract),\n  setCardBalance: builder.commit(mutations.setCardBalance),\n  setPackBalance: builder.commit(mutations.setPackBalance),\n  setCardToTransferSelected: builder.commit(\n    mutations.setCardToTransferSelected,\n  ),\n  setAllCardsToTransferSelected: builder.commit(\n    mutations.setAllCardsToTransferSelected,\n  ),\n  setPackToTransferSelected: builder.commit(\n    mutations.setPackToTransferSelected,\n  ),\n\n  // // Actions\n  checkCardBalance: builder.dispatch(checkCardBalance),\n  checkPackBalance: builder.dispatch(checkPackBalance),\n  transferPacks: builder.dispatch(transferPacks),\n  transferCards: builder.dispatch(transferCards),\n}\n\nexport async function checkCardBalance(context: AssetsContext) {\n  const account = context.rootState.plasma.address\n  const caller = await plasmaModule.getCallerAddress()\n\n  const tokens = await context.state\n    .cardContract!.methods.tokensOwned(account)\n    // @ts-ignore\n    .call({ from: caller.local.toString() })\n  const cards: CardDetail[] = []\n  tokens.indexes.forEach((id: string, i: number) => {\n    const card = getCardByTokenId(id.toString())\n    card.amount = parseInt(tokens.balances[i], 10)\n    cards.push(card)\n  })\n  assetsModule.setCardBalance(cards)\n}\n\nexport async function checkPackBalance(context: AssetsContext) {\n  const account = context.rootState.plasma.address\n  const caller = await plasmaModule.getCallerAddress()\n  const packs: PackDetail[] = []\n\n  PACKS_NAME.forEach(async (type) => {\n    const amount = await context.state.packsContract[type].methods\n      .balanceOf(account)\n      .call({ from: caller.local.toString() })\n    packs.push({ type, amount })\n  })\n  assetsModule.setPackBalance(packs)\n}\n\nexport async function transferCards(\n  context: AssetsContext,\n  payload: {\n    cardIds: string[]\n    amounts: number[]\n    receiver: string,\n  },\n) {\n  feedbackModule.setTask(i18n.t(\"feedback_msg.task.batch_transfer\").toString())\n  feedbackModule.setStep(i18n.t(\"feedback_msg.step.transfering_card\").toString())\n  log(\"transferCards payload\", payload)\n  try {\n    // caller address is either eth if eth signer is there or plasma address i\n    const ethAddress = await plasmaModule.getCallerAddress()\n    const ethAddressString = ethAddress.local.toString()\n    const plasmaAddress = context.rootState.plasma.address\n    const result = await context.state\n      .cardContract!.methods.batchTransferFrom(\n        plasmaAddress,\n        formatFromLoomAddress(payload.receiver),\n        payload.cardIds,\n        payload.amounts,\n      )\n      // @ts-ignore\n      .send({ from: ethAddressString })\n    log(\"transfer cards result\", result)\n    await assetsModule.checkCardBalance()\n    feedbackModule.endTask()\n    feedbackModule.showSuccess(\n      i18n\n        .t(\"messages.transfer_card_success_tx\", {\n          transactionHash: result.transactionHash,\n        })\n        .toString(),\n    )\n  } catch (error) {\n    feedbackModule.endTask()\n    if (error.message.includes(\"denied\")) {\n      feedbackModule.showError(i18n.t(\"messages.user_denied_tx\").toString())\n    } else {\n      feedbackModule.showError(\n        i18n\n          .t(\"messages.transfer_card_err_tx\", { msg: error.message })\n          .toString(),\n      )\n      throw error\n    }\n  }\n}\n\nexport async function transferPacks(\n  context: AssetsContext,\n  payload: {\n    packType: string\n    amount: number\n    receiver: string,\n  },\n) {\n  log(\"transferPacks payload\", payload)\n  try {\n    feedbackModule.setTask(i18n.t(\"feedback_msg.task.pack_transfer\").toString())\n    feedbackModule.setStep(i18n.t(\"feedback_msg.step.transfering_pack\").toString())\n    const ethAddress = await plasmaModule.getCallerAddress()\n    const ethAddressString = ethAddress.local.toString()\n    const receiver = formatFromLoomAddress(payload.receiver)\n    const result = await context.state.packsContract[payload.packType].methods\n      .transfer(receiver, payload.amount)\n      .send({ from: ethAddressString })\n    log(\"transfer packs result\", result)\n    feedbackModule.setStep(i18n.t(\"feedback_msg.step.refresh_balance\").toString())\n    await assetsModule.checkPackBalance()\n\n    feedbackModule.endTask()\n    feedbackModule.showSuccess(\n      i18n\n        .t(\"messages.transfer_pack_success_tx\", {\n          transactionHash: result.transactionHash,\n        })\n        .toString(),\n    )\n  } catch (error) {\n    feedbackModule.endTask()\n    if (error.message.includes(\"denied\")) {\n      feedbackModule.showError(i18n.t(\"messages.user_denied_tx\").toString())\n    } else {\n      feedbackModule.showError(\n        i18n\n          .t(\"messages.transfer_pack_err_tx\", { msg: error.message })\n          .toString(),\n      )\n      throw error\n    }\n  }\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"4975fb1a130c52809138b8894b8a13bd4e1ff2db"},"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/mutations.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/mutations.ts","statementMap":{"0":{"start":{"line":2,"column":4},"end":{"line":2,"column":42}},"1":{"start":{"line":5,"column":4},"end":{"line":5,"column":41}},"2":{"start":{"line":8,"column":4},"end":{"line":8,"column":26}},"3":{"start":{"line":11,"column":4},"end":{"line":11,"column":93}},"4":{"start":{"line":14,"column":4},"end":{"line":14,"column":44}}},"fnMap":{"0":{"name":"setUserDeployerWhitelist","decl":{"start":{"line":1,"column":16},"end":{"line":1,"column":40}},"loc":{"start":{"line":1,"column":57},"end":{"line":3,"column":1}},"line":1},"1":{"name":"setUserDeployersAddress","decl":{"start":{"line":4,"column":16},"end":{"line":4,"column":39}},"loc":{"start":{"line":4,"column":56},"end":{"line":6,"column":1}},"line":4},"2":{"name":"setDefaultTiers","decl":{"start":{"line":7,"column":16},"end":{"line":7,"column":31}},"loc":{"start":{"line":7,"column":48},"end":{"line":9,"column":1}},"line":7},"3":{"name":"setDeployedContractAddress","decl":{"start":{"line":10,"column":16},"end":{"line":10,"column":42}},"loc":{"start":{"line":10,"column":59},"end":{"line":12,"column":1}},"line":10},"4":{"name":"setDefaultDeployedContractAddress","decl":{"start":{"line":13,"column":16},"end":{"line":13,"column":49}},"loc":{"start":{"line":13,"column":66},"end":{"line":15,"column":1}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/mutations.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/mutations.ts"],"names":[],"mappings":"AAIA,MAAM,UAAU,wBAAwB,CACtC,KAAqB,EACrB,OAA8B;IAE9B,KAAK,CAAC,qBAAqB,GAAG,OAAO,CAAA;AACvC,CAAC;AAED,MAAM,UAAU,uBAAuB,CACrC,KAAqB,EACrB,OAA0B;IAE1B,KAAK,CAAC,oBAAoB,GAAG,OAAO,CAAA;AACtC,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,KAAqB,EAAE,OAAgB;IACrE,KAAK,CAAC,KAAK,GAAG,OAAO,CAAA;AACvB,CAAC;AAED,MAAM,UAAU,0BAA0B,CACxC,KAAqB,EACrB,OAAqE;IAErE,KAAK,CAAC,uBAAuB,CAAC,OAAO,CAAC,eAAe,CAAC,GAAG,OAAO,CAAC,uBAAuB,CAAA;AAC1F,CAAC;AAED,MAAM,UAAU,iCAAiC,CAC/C,KAAqB,EAAE,OAAgC;IAEvD,KAAK,CAAC,uBAAuB,GAAG,OAAO,CAAA;AACzC,CAAC","sourcesContent":["import { UserDeployerWhitelist } from \"loom-js/dist/contracts\"\nimport { WhiteListState, DeployerAddress, DeployedContractAddress } from \"./types\"\nimport { ITier } from \"loom-js/dist/contracts/user-deployer-whitelist\"\n\nexport function setUserDeployerWhitelist(\n  state: WhiteListState,\n  payload: UserDeployerWhitelist,\n) {\n  state.userDeployerWhitelist = payload\n}\n\nexport function setUserDeployersAddress(\n  state: WhiteListState,\n  payload: DeployerAddress[],\n) {\n  state.userDeployersAddress = payload\n}\n\nexport function setDefaultTiers(state: WhiteListState, payload: ITier[]) {\n  state.tiers = payload\n}\n\nexport function setDeployedContractAddress(\n  state: WhiteListState,\n  payload: {deployerAddress: string, deployedContractAddress: string[]},\n) {\n  state.deployedContractAddress[payload.deployerAddress] = payload.deployedContractAddress\n}\n\nexport function setDefaultDeployedContractAddress(\n  state: WhiteListState, payload: DeployedContractAddress,\n) {\n  state.deployedContractAddress = payload\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"a60b8852ce494592ff15a3ca50c4cfa6ee3cd9c5"},"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/index.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/index.ts","statementMap":{"0":{"start":{"line":11,"column":12},"end":{"line":11,"column":30}},"1":{"start":{"line":12,"column":21},"end":{"line":22,"column":1}},"2":{"start":{"line":23,"column":16},"end":{"line":23,"column":67}},"3":{"start":{"line":24,"column":20},"end":{"line":24,"column":35}},"4":{"start":{"line":25,"column":31},"end":{"line":40,"column":1}},"5":{"start":{"line":27,"column":8},"end":{"line":27,"column":29}},"6":{"start":{"line":46,"column":19},"end":{"line":46,"column":50}},"7":{"start":{"line":47,"column":19},"end":{"line":47,"column":56}},"8":{"start":{"line":48,"column":21},"end":{"line":48,"column":76}},"9":{"start":{"line":49,"column":4},"end":{"line":49,"column":51}},"10":{"start":{"line":57,"column":34},"end":{"line":57,"column":69}},"11":{"start":{"line":59,"column":4},"end":{"line":64,"column":5}},"12":{"start":{"line":60,"column":8},"end":{"line":60,"column":82}},"13":{"start":{"line":63,"column":8},"end":{"line":63,"column":45}},"14":{"start":{"line":65,"column":4},"end":{"line":65,"column":22}},"15":{"start":{"line":73,"column":34},"end":{"line":73,"column":69}},"16":{"start":{"line":74,"column":26},"end":{"line":74,"column":124}},"17":{"start":{"line":75,"column":4},"end":{"line":75,"column":83}},"18":{"start":{"line":76,"column":4},"end":{"line":89,"column":5}},"19":{"start":{"line":77,"column":32},"end":{"line":77,"column":78}},"20":{"start":{"line":78,"column":31},"end":{"line":82,"column":10}},"21":{"start":{"line":83,"column":8},"end":{"line":83,"column":40}},"22":{"start":{"line":86,"column":8},"end":{"line":86,"column":36}},"23":{"start":{"line":87,"column":8},"end":{"line":87,"column":33}},"24":{"start":{"line":88,"column":8},"end":{"line":88,"column":15}},"25":{"start":{"line":91,"column":4},"end":{"line":112,"column":5}},"26":{"start":{"line":92,"column":8},"end":{"line":92,"column":91}},"27":{"start":{"line":94,"column":8},"end":{"line":94,"column":77}},"28":{"start":{"line":95,"column":8},"end":{"line":95,"column":47}},"29":{"start":{"line":96,"column":8},"end":{"line":96,"column":45}},"30":{"start":{"line":97,"column":8},"end":{"line":97,"column":95}},"31":{"start":{"line":100,"column":8},"end":{"line":100,"column":45}},"32":{"start":{"line":101,"column":27},"end":{"line":101,"column":40}},"33":{"start":{"line":102,"column":8},"end":{"line":107,"column":9}},"34":{"start":{"line":103,"column":12},"end":{"line":103,"column":77}},"35":{"start":{"line":105,"column":13},"end":{"line":107,"column":9}},"36":{"start":{"line":106,"column":12},"end":{"line":106,"column":81}},"37":{"start":{"line":108,"column":8},"end":{"line":108,"column":102}},"38":{"start":{"line":111,"column":8},"end":{"line":111,"column":33}},"39":{"start":{"line":119,"column":20},"end":{"line":119,"column":52}},"40":{"start":{"line":120,"column":26},"end":{"line":120,"column":58}},"41":{"start":{"line":121,"column":21},"end":{"line":121,"column":56}},"42":{"start":{"line":122,"column":24},"end":{"line":122,"column":73}},"43":{"start":{"line":125,"column":4},"end":{"line":132,"column":5}},"44":{"start":{"line":126,"column":8},"end":{"line":126,"column":63}},"45":{"start":{"line":127,"column":8},"end":{"line":127,"column":59}},"46":{"start":{"line":130,"column":8},"end":{"line":130,"column":46}},"47":{"start":{"line":131,"column":8},"end":{"line":131,"column":31}},"48":{"start":{"line":133,"column":36},"end":{"line":133,"column":38}},"49":{"start":{"line":134,"column":4},"end":{"line":134,"column":91}},"50":{"start":{"line":134,"column":45},"end":{"line":134,"column":87}},"51":{"start":{"line":135,"column":4},"end":{"line":135,"column":63}},"52":{"start":{"line":136,"column":4},"end":{"line":136,"column":79}},"53":{"start":{"line":144,"column":21},"end":{"line":144,"column":56}},"54":{"start":{"line":145,"column":28},"end":{"line":145,"column":30}},"55":{"start":{"line":146,"column":4},"end":{"line":157,"column":5}},"56":{"start":{"line":147,"column":8},"end":{"line":147,"column":94}},"57":{"start":{"line":148,"column":8},"end":{"line":148,"column":62}},"58":{"start":{"line":149,"column":26},"end":{"line":149,"column":88}},"59":{"start":{"line":149,"column":58},"end":{"line":149,"column":87}},"60":{"start":{"line":150,"column":8},"end":{"line":153,"column":11}},"61":{"start":{"line":156,"column":8},"end":{"line":156,"column":54}},"62":{"start":{"line":158,"column":4},"end":{"line":158,"column":29}},"63":{"start":{"line":165,"column":4},"end":{"line":173,"column":7}},"64":{"start":{"line":166,"column":32},"end":{"line":166,"column":48}},"65":{"start":{"line":167,"column":8},"end":{"line":172,"column":10}},"66":{"start":{"line":180,"column":4},"end":{"line":180,"column":75}},"67":{"start":{"line":181,"column":4},"end":{"line":181,"column":86}},"68":{"start":{"line":182,"column":21},"end":{"line":182,"column":39}},"69":{"start":{"line":183,"column":17},"end":{"line":183,"column":45}},"70":{"start":{"line":184,"column":41},"end":{"line":184,"column":115}},"71":{"start":{"line":185,"column":26},"end":{"line":185,"column":83}},"72":{"start":{"line":186,"column":22},"end":{"line":186,"column":118}},"73":{"start":{"line":187,"column":4},"end":{"line":187,"column":29}},"74":{"start":{"line":188,"column":4},"end":{"line":188,"column":43}},"75":{"start":{"line":189,"column":4},"end":{"line":189,"column":49}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":16},"end":{"line":28,"column":5}},"line":26},"1":{"name":"createContract","decl":{"start":{"line":45,"column":22},"end":{"line":45,"column":36}},"loc":{"start":{"line":45,"column":46},"end":{"line":50,"column":1}},"line":45},"2":{"name":"getTierInfo","decl":{"start":{"line":56,"column":22},"end":{"line":56,"column":33}},"loc":{"start":{"line":56,"column":52},"end":{"line":66,"column":1}},"line":56},"3":{"name":"addDeployer","decl":{"start":{"line":72,"column":22},"end":{"line":72,"column":33}},"loc":{"start":{"line":72,"column":52},"end":{"line":113,"column":1}},"line":72},"4":{"name":"getDeployers","decl":{"start":{"line":118,"column":22},"end":{"line":118,"column":34}},"loc":{"start":{"line":118,"column":44},"end":{"line":137,"column":1}},"line":118},"5":{"name":"(anonymous_5)","decl":{"start":{"line":134,"column":30},"end":{"line":134,"column":31}},"loc":{"start":{"line":134,"column":43},"end":{"line":134,"column":89}},"line":134},"6":{"name":"getDeployedContractAddresses","decl":{"start":{"line":143,"column":22},"end":{"line":143,"column":50}},"loc":{"start":{"line":143,"column":69},"end":{"line":159,"column":1}},"line":143},"7":{"name":"(anonymous_7)","decl":{"start":{"line":149,"column":48},"end":{"line":149,"column":49}},"loc":{"start":{"line":149,"column":58},"end":{"line":149,"column":87}},"line":149},"8":{"name":"formatDeployersAddress","decl":{"start":{"line":164,"column":9},"end":{"line":164,"column":31}},"loc":{"start":{"line":164,"column":43},"end":{"line":174,"column":1}},"line":164},"9":{"name":"(anonymous_9)","decl":{"start":{"line":165,"column":25},"end":{"line":165,"column":26}},"loc":{"start":{"line":165,"column":39},"end":{"line":173,"column":5}},"line":165},"10":{"name":"generateSeeds","decl":{"start":{"line":179,"column":22},"end":{"line":179,"column":35}},"loc":{"start":{"line":179,"column":45},"end":{"line":190,"column":1}},"line":179}},"branchMap":{"0":{"loc":{"start":{"line":102,"column":8},"end":{"line":107,"column":9}},"type":"if","locations":[{"start":{"line":102,"column":8},"end":{"line":107,"column":9}},{"start":{"line":102,"column":8},"end":{"line":107,"column":9}}],"line":102},"1":{"loc":{"start":{"line":105,"column":13},"end":{"line":107,"column":9}},"type":"if","locations":[{"start":{"line":105,"column":13},"end":{"line":107,"column":9}},{"start":{"line":105,"column":13},"end":{"line":107,"column":9}}],"line":105}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":0,"47":0,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":0,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1},"f":{"0":0,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/index.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/index.ts"],"names":[],"mappings":"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","sourcesContent":["import debug from \"debug\"\n\nimport { getStoreBuilder } from \"vuex-typex\"\n\nimport { Address, LocalAddress, CryptoUtils } from \"loom-js\"\nimport { UserDeployerWhitelist } from \"loom-js/dist/contracts\"\nimport { ITier, IDeployedContract } from \"loom-js/dist/contracts/user-deployer-whitelist\"\nimport { TierID } from \"loom-js/dist/proto/user_deployer_whitelist_pb\"\nimport { generateMnemonic, mnemonicToSeedSync } from \"bip39\"\nimport { sha256 } from \"js-sha256\"\n\nimport { i18n } from \"@/i18n\"\nimport { plasmaModule } from \"@/store/plasma\"\nimport { feedbackModule } from \"@/feedback/store\"\n\nimport {\n  WhiteListState,\n  HasWhiteListState,\n  DeployerAddress,\n  DeployerAddressResponse,\n  WhiteListContext,\n} from \"@/whitelist/store/types\"\nimport * as mutations from \"./mutations\"\nimport { async } from \"rxjs/internal/scheduler/async\"\n\nconst log = debug(\"whitelist\")\n\nconst initialState: WhiteListState = {\n  userDeployerWhitelist: null,\n  userDeployersAddress: [],\n  tierIDs: [0], // TODO: update this if we have more tier: add more tier ID\n  tiers: [],\n  deployedContractAddress: {},\n  seed: {\n    mnemonic: \"\",\n    publicAddress: \"\",\n  },\n}\nconst builder = getStoreBuilder<HasWhiteListState>().module(\n  \"whiteList\",\n  initialState,\n)\nconst stateGetter = builder.state()\n\nexport const whiteListModule = {\n  get state() {\n    return stateGetter()\n  },\n\n  setUserDeployerWhitelist: builder.commit(mutations.setUserDeployerWhitelist),\n  setUserDeployersAddress: builder.commit(mutations.setUserDeployersAddress),\n  setDefaultTiers: builder.commit(mutations.setDefaultTiers),\n  setDeployedContractAddress: builder.commit(mutations.setDeployedContractAddress),\n  setDefaultDeployedContractAddress: builder.commit(mutations.setDefaultDeployedContractAddress),\n\n  createContract: builder.dispatch(createContract),\n  addDeployer: builder.dispatch(addDeployer),\n  getDeployers: builder.dispatch(getDeployers),\n  getTierInfo: builder.dispatch(getTierInfo),\n  generateSeeds: builder.dispatch(generateSeeds),\n  getDeployedContractAddresses: builder.dispatch(getDeployedContractAddresses),\n}\n\n/**\n *\n * @param context\n */\nexport async function createContract(context: WhiteListContext) {\n  const client = context.rootState.plasma.client!\n  const caller = await plasmaModule.getCallerAddress()\n  const contract = await UserDeployerWhitelist.createAsync(client, caller)\n  context.state.userDeployerWhitelist = contract\n}\n\n/**\n *\n * @param context\n * @param payload\n */\nexport async function getTierInfo(\n  context: WhiteListContext,\n  payload: { tierID: TierID },\n) {\n  const userDeployerWhitelist = context.state.userDeployerWhitelist\n  let tierDetail\n  try {\n    tierDetail = await userDeployerWhitelist!.getTierInfoAsync(payload.tierID)\n  } catch (error) {\n    log(\"getTierInfoAsync error\", error)\n  }\n  return tierDetail\n}\n\n/**\n *\n * @param context\n * @param payload\n */\nexport async function addDeployer(\n  context: WhiteListContext,\n  payload: { deployer: string; tier: ITier },\n) {\n  const userDeployerWhitelist = context.state.userDeployerWhitelist!\n  const deployAddress = new Address(\n    context.rootState.plasma.client!.chainId,\n    LocalAddress.fromHexString(payload.deployer),\n  )\n  feedbackModule.setTask(i18n.t(\"feedback_msg.task.adding_deployer\").toString())\n  try {\n    const contractAddress = userDeployerWhitelist.address.local.toString()\n    const approvedResult = await plasmaModule.approve({\n      symbol: \"LOOM\",\n      weiAmount: payload.tier.fee,\n      to: contractAddress,\n    })\n    log(\"approved\", approvedResult)\n  } catch (error) {\n    console.log(\"catch\", error)\n    feedbackModule.endTask()\n    return\n  }\n\n  let result\n  try {\n    feedbackModule.setStep(i18n.t(\"feedback_msg.step.adding_new_deployer\").toString())\n    // TODO: update this if we have more tier: pass tier\n    result = await userDeployerWhitelist.addDeployerAsync(deployAddress)\n    log(\"addDeployerAsync result\", result)\n    await whiteListModule.getDeployers()\n    feedbackModule.showSuccess(\n      i18n.t(\"messages.add_deployer_addr_success_tx\").toString(),\n    )\n  } catch (error) {\n    log(\"addDeployerAsync error\", error)\n    let errorMessage = error.message\n    if (error.message.includes(\"User denied message\")) {\n      errorMessage = i18n.t(\"messages.user_denied_sign_tx\").toString()\n    } else if (error.message.includes(\"deployer already exists\")) {\n      errorMessage = i18n.t(\"messages.deployer_already_exists\").toString()\n    }\n    feedbackModule.showError(\n      i18n.t(\"messages.add_key_err_tx\", { msg: errorMessage }).toString(),\n    )\n  } finally {\n    feedbackModule.endTask()\n  }\n}\n\n/**\n *\n * @param context\n */\nexport async function getDeployers(context: WhiteListContext) {\n  const chainId = context.rootState.plasma.chainId\n  const accountString = context.rootState.plasma.address\n  const contract = context.state.userDeployerWhitelist!\n  const accountAddr = Address.fromString(`${chainId}:${accountString}`)\n  let result\n  let deployerAddresses\n  try {\n    result = await contract.getDeployersAsync(accountAddr)\n    deployerAddresses = formatDeployersAddress(result)\n  } catch (error) {\n    log(\"getDeployersAsync error\", error)\n    deployerAddresses = []\n  }\n  const deployedContractAddress = {}\n  deployerAddresses.forEach((address) => { deployedContractAddress[address.hex] = [] })\n  whiteListModule.setUserDeployersAddress(deployerAddresses)\n  whiteListModule.setDefaultDeployedContractAddress(deployedContractAddress)\n}\n\n/**\n *\n * @param context\n * @param payload\n */\nexport async function getDeployedContractAddresses(context: WhiteListContext, payload: {deployerAddress: Address}) {\n  const contract = context.state.userDeployerWhitelist!\n  let contractAddresses: IDeployedContract[] | [] = []\n\n  try {\n    contractAddresses = await contract.getDeployedContractsAsync(payload.deployerAddress)\n    log(\"deployed contract addresses\", contractAddresses)\n    const Addresses = contractAddresses.map((addr) => addr.address.local.toString())\n    whiteListModule.setDeployedContractAddress({\n      deployerAddress: payload.deployerAddress.local.toString(),\n      deployedContractAddress: Addresses,\n    })\n  } catch (error) {\n    log(\"getDeployedContractsAsync error\", error)\n  }\n  return contractAddresses\n}\n\n/**\n * helper function to format deployer info\n * @param deployers\n */\nfunction formatDeployersAddress(\n  deployers: DeployerAddressResponse[],\n): DeployerAddress[] {\n  return deployers.map((deployer) => {\n    const deployerAddress = deployer.address\n    return {\n      address: deployerAddress,\n      hex: deployerAddress.local.toString(),\n      tier: deployer.tierId,\n      base64: Buffer.from(\n        deployerAddress.local.toString().split(\"x\")[1],\n        \"hex\",\n      ).toString(\"base64\"),\n    }\n  })\n}\n\n/**\n *\n * @param context\n */\nexport async function generateSeeds(context: WhiteListContext) {\n  feedbackModule.setTask(i18n.t(\"feedback_msg.task.new_key\").toString())\n  feedbackModule.setStep(i18n.t(\"feedback_msg.step.generating_new_key\").toString())\n\n  const mnemonic = generateMnemonic()\n  const seed = mnemonicToSeedSync(mnemonic)\n  const privateKeyUint8ArrayFromSeed = CryptoUtils.generatePrivateKeyFromSeed(new Uint8Array(sha256.array(seed)))\n  const privateKeyB64 = CryptoUtils.Uint8ArrayToB64(privateKeyUint8ArrayFromSeed)\n  const publicKey = await plasmaModule.getPublicAddrePriaKeyUint8Array({ privateKey: privateKeyUint8ArrayFromSeed })\n\n  feedbackModule.endTask()\n\n  context.state.seed.mnemonic = mnemonic\n  context.state.seed.publicAddress = publicKey\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"ddc0fe904c3960a0fe1349ce9a4acc0583bc99ab"},"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/reactions.ts":{"path":"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/reactions.ts","statementMap":{"0":{"start":{"line":4,"column":12},"end":{"line":4,"column":35}},"1":{"start":{"line":8,"column":4},"end":{"line":15,"column":7}},"2":{"start":{"line":8,"column":27},"end":{"line":8,"column":47}},"3":{"start":{"line":9,"column":8},"end":{"line":14,"column":9}},"4":{"start":{"line":10,"column":12},"end":{"line":10,"column":19}},"5":{"start":{"line":13,"column":12},"end":{"line":13,"column":51}},"6":{"start":{"line":18,"column":4},"end":{"line":25,"column":7}},"7":{"start":{"line":18,"column":27},"end":{"line":18,"column":64}},"8":{"start":{"line":19,"column":22},"end":{"line":19,"column":24}},"9":{"start":{"line":20,"column":8},"end":{"line":23,"column":11}},"10":{"start":{"line":21,"column":31},"end":{"line":21,"column":76}},"11":{"start":{"line":22,"column":12},"end":{"line":22,"column":35}},"12":{"start":{"line":24,"column":8},"end":{"line":24,"column":47}},"13":{"start":{"line":28,"column":4},"end":{"line":36,"column":7}},"14":{"start":{"line":30,"column":12},"end":{"line":34,"column":13}},"15":{"start":{"line":31,"column":16},"end":{"line":31,"column":42}},"16":{"start":{"line":32,"column":16},"end":{"line":32,"column":47}},"17":{"start":{"line":33,"column":16},"end":{"line":33,"column":52}}},"fnMap":{"0":{"name":"whiteListReaction","decl":{"start":{"line":5,"column":16},"end":{"line":5,"column":33}},"loc":{"start":{"line":5,"column":41},"end":{"line":37,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":16},"end":{"line":8,"column":17}},"loc":{"start":{"line":8,"column":27},"end":{"line":8,"column":47}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":8,"column":49},"end":{"line":8,"column":50}},"loc":{"start":{"line":8,"column":61},"end":{"line":15,"column":5}},"line":8},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":16},"end":{"line":18,"column":17}},"loc":{"start":{"line":18,"column":27},"end":{"line":18,"column":64}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":18,"column":66},"end":{"line":18,"column":67}},"loc":{"start":{"line":18,"column":78},"end":{"line":25,"column":5}},"line":18},"5":{"name":"(anonymous_5)","decl":{"start":{"line":20,"column":46},"end":{"line":20,"column":47}},"loc":{"start":{"line":20,"column":64},"end":{"line":23,"column":9}},"line":20},"6":{"name":"(anonymous_6)","decl":{"start":{"line":29,"column":8},"end":{"line":29,"column":9}},"loc":{"start":{"line":29,"column":22},"end":{"line":35,"column":9}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":14,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":14,"column":9}},{"start":{"line":9,"column":8},"end":{"line":14,"column":9}}],"line":9},"1":{"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":79}},"type":"binary-expr","locations":[{"start":{"line":9,"column":12},"end":{"line":9,"column":32}},{"start":{"line":9,"column":36},"end":{"line":9,"column":79}}],"line":9},"2":{"loc":{"start":{"line":30,"column":12},"end":{"line":34,"column":13}},"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":34,"column":13}},{"start":{"line":30,"column":12},"end":{"line":34,"column":13}}],"line":30}},"s":{"0":1,"1":1,"2":2,"3":1,"4":0,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0},"f":{"0":1,"1":2,"2":1,"3":1,"4":0,"5":0,"6":0},"b":{"0":[0,1],"1":[1,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/reactions.ts","sourceRoot":"","sources":["/Users/tharathip_loom/Documents/dashboard/src/whitelist/store/reactions.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,MAAM,OAAO,CAAA;AAEzB,OAAO,EAAE,eAAe,EAAE,MAAM,GAAG,CAAA;AAEnC,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAA;AAE7C,MAAM,GAAG,GAAG,KAAK,CAAC,gBAAgB,CAAC,CAAA;AAEnC,MAAM,UAAU,iBAAiB,CAAC,KAA4B;IAC5D,gCAAgC;IAChC,oBAAoB;IACpB,KAAK,CAAC,KAAK,CACT,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAC/B,KAAK,IAAI,EAAE;QACT,IAAI,KAAK,CAAC,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;YACvE,OAAM;SACP;aAAM;YACL,MAAM,eAAe,CAAC,cAAc,EAAE,CAAA;SACvC;IACH,CAAC,CACF,CAAA;IAED,4BAA4B;IAC5B,aAAa;IACb,KAAK,CAAC,KAAK,CACT,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,qBAAqB,EAChD,KAAK,IAAI,EAAE;QACT,MAAM,KAAK,GAAY,EAAE,CAAA;QACzB,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE;YACrD,MAAM,UAAU,GAAG,MAAM,eAAe,CAAC,WAAW,CAAC,EAAE,MAAM,EAAE,CAAC,CAAA;YAChE,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QACxB,CAAC,CAAC,CAAA;QACF,eAAe,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;IACxC,CAAC,CACF,CAAA;IAED,8BAA8B;IAC9B,qCAAqC;IACrC,KAAK,CAAC,eAAe,CAAC;QACpB,KAAK,CAAC,MAAM;YACV,IAAI,MAAM,CAAC,IAAI,KAAK,YAAY,GAAG,eAAe,CAAC,WAAW,CAAC,IAAI,EAAE;gBACnE,GAAG,CAAC,oBAAoB,CAAC,CAAA;gBACzB,eAAe,CAAC,YAAY,EAAE,CAAA;gBAC9B,YAAY,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA;aACpC;QACH,CAAC;KACF,CAAC,CAAA;AACJ,CAAC","sourcesContent":["import { Store } from \"vuex\"\nimport debug from \"debug\"\nimport { DashboardState } from \"@/types\"\nimport { whiteListModule } from \".\"\nimport { ITier } from \"loom-js/dist/contracts/user-deployer-whitelist\"\nimport { plasmaModule } from \"@/store/plasma\"\n\nconst log = debug(\"dash.whitelist\")\n\nexport function whiteListReaction(store: Store<DashboardState>) {\n  // Once we have a plasma account\n  // create a contract\n  store.watch(\n    (state) => state.plasma.address,\n    async () => {\n      if (store.state.disabled && store.state.disabled.includes(\"dev-deploy\")) {\n        return\n      } else {\n        await whiteListModule.createContract()\n      }\n    },\n  )\n\n  // Once we have the contract\n  // load tiers\n  store.watch(\n    (state) => state.whiteList.userDeployerWhitelist,\n    async () => {\n      const tiers: ITier[] = []\n      store.state.whiteList.tierIDs.forEach(async (tierID) => {\n        const tierDetail = await whiteListModule.getTierInfo({ tierID })\n        tiers.push(tierDetail)\n      })\n      whiteListModule.setDefaultTiers(tiers)\n    },\n  )\n\n  // After adding a new deployer\n  // refresh deployers and loom balance\n  store.subscribeAction({\n    after(action) {\n      if (action.type === \"whiteList/\" + whiteListModule.addDeployer.name) {\n        log(\"Loading tiers info\")\n        whiteListModule.getDeployers()\n        plasmaModule.refreshBalance(\"LOOM\")\n      }\n    },\n  })\n}\n"]},"_coverageSchema":"43e27e138ebf9cfc5966b082cf9a028302ed4184","hash":"25002fcf3b10145b93cdf1f9e6796f2ef54df58e"}}